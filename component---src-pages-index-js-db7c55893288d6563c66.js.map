{"version":3,"sources":["webpack:///./node_modules/probe.gl/dist/esm/lib/utils/globals.js","webpack:///./node_modules/probe.gl/dist/esm/lib/utils/local-storage.js","webpack:///./node_modules/probe.gl/dist/esm/lib/utils/timestamp.js","webpack:///./node_modules/probe.gl/dist/esm/lib/utils/formatters.js","webpack:///./node_modules/probe.gl/dist/esm/lib/utils/color.js","webpack:///./node_modules/probe.gl/dist/esm/lib/utils/autobind.js","webpack:///./node_modules/probe.gl/dist/esm/lib/utils/assert.js","webpack:///./node_modules/probe.gl/dist/esm/lib/log.js","webpack:///./node_modules/luma.gl/dist/esm/utils/log.js","webpack:///./node_modules/luma.gl/dist/esm/webgl1/polyfill-context.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/consolidated-events/lib/index.esm.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/set-parameters.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/texture.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/typed-array-utils.js","webpack:///./node_modules/assert/assert.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/texture-cube.js","webpack:///./node_modules/luma.gl/dist/esm/utils/is-electron.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/accessor.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/buffer.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/webgl-types.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/probe.gl/dist/esm/env/globals.js","webpack:///./node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///./node_modules/util/util.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/resource.js","webpack:///./node_modules/luma.gl/dist/es5/webgl-debug/debug-parameters.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/texture-3d.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/core-js/modules/es.math.hypot.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/create-headless-context.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/create-canvas.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/create-browser-context.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/debug-context.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/context-limits.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/query-manager.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/context.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/context-features.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/shader.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/renderbuffer.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/clear.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/format-utils.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/framebuffer.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/sampler.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/uniforms.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/attribute-utils.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/program-configuration.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/program.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/query.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/fence-sync.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/texture-2d-array.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/transform-feedback.js","webpack:///./node_modules/luma.gl/dist/esm/utils/array-utils-flat.js","webpack:///./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/vertex-array-object.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/vertex-array.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/math.gl/dist/esm/lib/common.js","webpack:///./node_modules/math.gl/dist/esm/lib/math-array.js","webpack:///./node_modules/math.gl/dist/esm/lib/vector.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/math.gl/dist/esm/vector3.js","webpack:///./node_modules/math.gl/dist/esm/lib/validators.js","webpack:///./node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/math.gl/dist/esm/vector2.js","webpack:///./node_modules/math.gl/dist/esm/vector4.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/math.gl/dist/esm/matrix4.js","webpack:///./node_modules/luma.gl/dist/esm/core/object-3d.js","webpack:///./node_modules/luma.gl/dist/esm/core/attribute.js","webpack:///./node_modules/luma.gl/dist/esm/geometry/geometry.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/shaders/index.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/shaders/modular-vertex.glsl.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/shaders/modular-fragment.glsl.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/transpile-shader.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/utils/assert.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/shader-module.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/resolve-modules.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/shader-module-registry.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/utils/is-old-ie.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/utils/webgl-info.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/module-injectors.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/inject-shader.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/assemble-shaders.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/constants.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/lib/platform-defines.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/fp64/fp64-arithmetic.glsl.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/fp64/fp64.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/fp64/fp64-functions.glsl.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/project/project.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/lighting/lighting.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/lighting/lighting-common.glsl.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/lighting/lighting-vertex.glsl.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/lighting/lighting-fragment.glsl.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/dirlight/dirlight.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/picking/picking.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/diffuse/diffuse.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/utils/shader-utils.js","webpack:///./node_modules/luma.gl/dist/esm/shadertools/src/modules/transform/transform.js","webpack:///./node_modules/luma.gl/dist/esm/debug/seer-integration.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-debug/debug-uniforms.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-debug/debug-vertex-array.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-debug/debug-program-configuration.js","webpack:///./node_modules/luma.gl/dist/esm/core/model.js","webpack:///./node_modules/luma.gl/dist/esm/core/animation-loop.js","webpack:///./node_modules/luma.gl/dist/esm/core/picking-colors.js","webpack:///./node_modules/luma.gl/dist/esm/core/transform-shader-utils.js","webpack:///./node_modules/luma.gl/dist/esm/core/transform.js","webpack:///./node_modules/luma.gl/dist/esm/geometry/cube-geometry.js","webpack:///./node_modules/luma.gl/dist/esm/models/cone.js","webpack:///./node_modules/luma.gl/dist/esm/models/cube.js","webpack:///./node_modules/luma.gl/dist/esm/index.js","webpack:///./src/components/hero.js","webpack:///./src/components/manifesto-section.js","webpack:///./src/pages/index.js","webpack:///./node_modules/luma.gl/dist/esm/webgl/texture-2d.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/context-state.js","webpack:///./node_modules/luma.gl/dist/esm/webgl1/polyfill-get-parameter.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/webgl-checks.js","webpack:///./src/components/styling/components.js","webpack:///./node_modules/luma.gl/dist/esm/init.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/texture-utils.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/constants-to-keys.js","webpack:///./node_modules/luma.gl/dist/es5/debug.js","webpack:///./node_modules/luma.gl/dist/esm/utils/is-old-ie.js","webpack:///./node_modules/seer/dist/index.js","webpack:///./node_modules/luma.gl/dist/esm/utils/utils.js","webpack:///./node_modules/luma.gl/dist/esm/utils/format-value.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/luma.gl/dist/esm/utils/assert.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/luma.gl/dist/esm/utils/stub-methods.js","webpack:///./node_modules/luma.gl/dist/esm/utils/globals.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-context/track-context-state.js","webpack:///./node_modules/luma.gl/dist/esm/utils/is-browser.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/webgl-debug/index.js","webpack:///./node_modules/luma.gl/debug.js","webpack:///./node_modules/react-waypoint/es/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/request-animation-frame.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/get-shader-name.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/format-glsl-error.js","webpack:///./node_modules/luma.gl/dist/esm/webgl-utils/shader-utils.js"],"names":["isBrowser","getStorage","type","storage","window","x","setItem","removeItem","e","LocalStorage","id","defaultSettings","arguments","length","undefined","this","config","Object","assign","_loadConfiguration","key","value","configuration","updateConfiguration","serialized","JSON","stringify","serializedConfiguration","getItem","parse","getTimestamp","secondsAndNanoseconds","hrtime","performance","now","Date","formatImage","image","message","scale","maxWidth","imageUrl","src","replace","width","Math","min","height","style","concat","floor","join","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","color","toUpperCase","autobind","obj","predefined","proto","getPrototypeOf","propNames","getOwnPropertyNames","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","find","name","bind","_iterator","Symbol","iterator","next","done","err","return","condition","Error","originalConsole","debug","console","log","info","warn","error","DEFAULT_SETTINGS","enabled","priority","noop","cache","Log","_ref","VERSION","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","userData","timeStamp","seal","Number","toPrecision","level","_len","args","Array","_key","_getLogFunction","method","once","_len2","_key2","oldUsage","newUsage","_len3","_key3","time","_len4","_key4","_len5","_key5","_len6","_key6","_table","columns","tag","table","title","getTableHeader","_ref2","_image","_ref2$message","_ref2$scale","getPriority","_logImageInBrowser","_logImageInNode","setting","_ref3","_ref3$scale","asciify","fit","round","then","data","_ref4","_ref4$message","_ref4$scale","img","Image","onload","_console","apply","_console2","element","nodeName","toLowerCase","_img","_console3","toDataURL","timeEnd","opts","collapsed","_opts","_normalizeArguments","groupCollapsed","group","groupEnd","func","trace","_normalizePriority","isEnabled","total","getTotal","delta","getDelta","_shouldLog","_parseArguments","_decorateMessage","options","normOpts","_this$_getElapsedTime","_getElapsedTime","resolvedPriority","isFinite","_ref5","_ref5$args","newOpts","unshift","string","padLength","max","repeat","leftPad","ms","toFixed","background","set","newPriority","get","enable","_WEBGL_CONTEXT_POLYFI","assert","isWebGL2","gl","WEBGL_CONTEXT_POLYFILLS","meta","suffix","createVertexArray","deleteVertexArray","bindVertexArray","isVertexArray","vertexAttribDivisor","location","divisor","drawElementsInstanced","drawArraysInstanced","drawBuffers","createQuery","deleteQuery","beginQuery","endQuery","getQuery","handle","pname","getQueryObject","getQueryParameter","queryCounter","readBuffer","originalFunc","attachment","getVertexAttrib","result","_getExtensionData","extension","webgl2","ext","getExtension","getExtensionData","getProgramParameter","program","getInternalformatParameter","target","format","Int32Array","getTexParameter","luma","extensions","TEXTURE_MAX_ANISOTROPY_EXT","getParameter","hint","polyfillExtension","target2","defaults","_defaults$meta","_meta$suffix","keys","forEach","extKey","polyfill","global","polyfillContext","EXTENSIONS","getSupportedExtensions","initializeExtensions","polyfilled","OVERRIDES","installOverrides","_classCallCheck","instance","Constructor","TypeError","CAN_USE_DOM","document","createElement","memoized","canUsePassiveEventListeners","addEventListener","removeEventListener","defineProperty","supportsPassiveOption","testPassiveEventListeners","ensureCanMutateNextEventHandlers","eventHandlers","handlers","nextHandlers","slice","TargetEventHandlers","events","prototype","getEventHandlers","eventName","normalizedEventOptions","String","capture","passive","handleEvent","event","handler","add","listener","_this","push","isSubscribed","index","indexOf","splice","eventOptions","normalizeEventOptions","module","exports","arg","copy","fill","readUInt8","process","browser","_GL_PARAMETER_DEFAULT","_GL_PARAMETER_SETTERS","_GL_PARAMETER_GETTERS","GL_PARAMETER_DEFAULTS","Float32Array","disable","pixelStorei","GL_PARAMETER_SETTERS","blendColor","clearColor","colorMask","cullFace","clearDepth","depthFunc","depthRange","depthMask","bindFramebuffer","frontFace","lineWidth","scissor","clearStencil","stencilMaskSeparate","viewport","COMPOSITE_GL_PARAMETER_SETTERS","blendEquation","values","blendEquationSeparate","blendFunc","blendFuncSeparate","polygonOffset","sampleCoverage","stencilFuncFront","stencilFuncSeparate","stencilFuncBack","stencilOpFront","stencilOpSeparate","stencilOpBack","GL_PARAMETER_GETTERS","setParameters","compositeSetters","glConstant","setter","state","mergedValues","compositeSetter","getter","getParameters","parameters","parameterKeys","isArray","resetParameters","_TEXTURE_FORMATS","NPOT_MIN_FILTERS","TEXTURE_FORMATS","dataFormat","types","gl2","isFormatSupported","gl1","isLinearFilteringSupported","Texture","_Resource","_opts$id","call","hasFloatTexture","textureUnit","linearFiltering","supported","_opts$pixels","pixels","_opts$format","_opts$type","_opts$border","border","_opts$recreate","recreate","_opts$parameters","_opts$pixelStore","pixelStore","_opts$textureUnit","_opts$unpackFlipY","unpackFlipY","_opts$mipmaps","mipmaps","_this$_deduceParamete","_deduceParameters","compressed","activeTexture","bindTexture","DEFAULT_TEXTURE_SETTINGS","glSettings","_isNPOT","_updateForNPOT","setImageData","generateMipmap","initialize","_this2","params","_ref3$target","_ref3$pixels","_ref3$data","_ref3$width","_ref3$height","_ref3$level","_ref3$format","_ref3$type","_ref3$dataFormat","_ref3$offset","offset","_ref3$border","_ref3$compressed","_ref3$parameters","_this$_deduceParamete2","dataType","_this$_getDataType","_getDataType","texImage2D","bindBuffer","compressedTexImage2D","_this3","_ref4$target","_ref4$pixels","_ref4$data","_ref4$x","_ref4$y","y","_ref4$width","_ref4$height","_ref4$level","_ref4$format","_ref4$type","_ref4$dataFormat","_ref4$compressed","_ref4$offset","_ref4$border","_ref4$parameters","_this$_deduceParamete3","ndarray","shape","compressedTexSubImage2D","texSubImage2D","ArrayBuffer","isView","_ref5$target","framebuffer","_ref5$x","_ref5$y","_ref5$level","_ref5$internalFormat","internalFormat","_ref5$border","copyTexImage2D","unbind","_ref6","_ref6$compressed","_ref7","_ref7$level","_ref7$internalformat","internalformat","_ref7$depth","depth","_ref7$border","_ref7$type","_ref7$offset","texImage3D","textureFormat","_this$_deduceImageSiz","_deduceImageSize","size","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","HTMLVideoElement","videoWidth","videoHeight","createTexture","deleteTexture","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","getGLTypeFromTypedArray","arrayOrType","constructor","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","Int8Array","Int16Array","getTypedArrayFromGLType","glType","_ref$clamped","clamped","flipRows","_ref2$bytesPerPixel","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","subarray","copyWithin","scalePixels","newWidth","newHeight","newData","c","objectAssign","compare","a","b","i","len","isBuffer","Buffer","_isBuffer","util","hasOwn","hasOwnProperty","pSlice","functionsHaveNames","pToString","toString","arrbuf","DataView","buffer","ok","regex","getName","isFunction","match","truncate","s","n","inspect","something","rawname","fail","actual","expected","operator","stackStartFunction","AssertionError","_deepEqual","strict","memos","isDate","getTime","isRegExp","source","multiline","lastIndex","ignoreCase","Float64Array","actualIndex","actualVisitedObjects","isPrimitive","aIsArgs","isArguments","bIsArgs","ka","objectKeys","kb","sort","objEquiv","object","expectedException","test","isPrototypeOf","_throws","shouldThrow","block","_tryBlock","userProvidedMessage","isUnexpectedException","isError","generatedMessage","self","getMessage","captureStackTrace","stack","out","fn_name","idx","next_line","substring","inherits","equal","notEqual","deepEqual","deepStrictEqual","notDeepEqual","notDeepStrictEqual","strictEqual","notStrictEqual","throws","doesNotThrow","ifError","FACES","TextureCube","_Texture","_opts$width","_opts$height","setCubeMapImageData","face","_ref$x","_ref$y","_ref$mipmapLevel","mipmapLevel","_subImage","_ref2$border","_ref2$format","_ref2$type","_i","_i2","_face","versions","Boolean","electron","navigator","userAgent","DEFAULT_ACCESSOR_VALUES","stride","normalized","integer","Accessor","accessors","accessor","_assign","freeze","BYTES_PER_ELEMENT","props","instanced","deprecated","isInstanced","getBytesPerElement","getBytesPerVertex","stubRemovedMethods","_initialize","byteLength","setData","_setByteLength","bytesUsed","_props","_props$offset","_props$srcOffset","srcOffset","bufferSubData","debugData","setAccessor","sourceBuffer","_ref$readOffset","readOffset","_ref$writeOffset","writeOffset","copyBufferSubData","_ref2$dstData","dstData","_ref2$srcByteOffset","srcByteOffset","_ref2$dstOffset","dstOffset","_ref2$length","dstAvailableElementCount","dstElementCount","ArrayType","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","copyElementCount","getBufferSubData","_ref3$index","bindBufferRange","bindBufferBase","_ref4$index","isIndexedBuffer","changed","getData","bytes","usage","_setData","_getTarget","bufferData","sourceElementOffset","getElementCount","createBuffer","deleteBuffer","getBufferParameter","reallocate","removed","isElectron","mockUserAgent","realUserAgent","headlessTypes","headlessGL","DummyType","_ref$WebGLRenderingCo","WebGLRenderingContext","_ref$WebGLBuffer","WebGLProgram","WebGLShader","WebGLBuffer","WebGLFramebuffer","WebGLRenderbuffer","WebGLTexture","WebGLUniformLocation","WebGLActiveInfo","WebGLShaderPrecisionFormat","WebGL2RenderingContext","WebGL2RenderingContextNotSupported","_assertThisInitialized","ReferenceError","_inherits","subClass","superClass","create","writable","configurable","globals","window_","process_","ctor","superCtor","super_","enumerable","TempCtor","getOwnPropertyDescriptors","descriptors","getOwnPropertyDescriptor","formatRegExp","f","isString","objects","str","_","isNull","isObject","deprecate","fn","msg","noDeprecation","warned","throwDeprecation","traceDeprecation","debugEnviron","debugs","ctx","seen","stylize","stylizeNoColor","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","styles","recurseTimes","ret","primitive","simple","isNumber","formatPrimitive","visibleKeys","array","hash","val","arrayToHash","formatError","RegExp","output","base","braces","toUTCString","l","formatProperty","formatArray","map","pop","reduce","prev","cur","numLinesEst","reduceToSingleString","desc","split","line","substr","ar","re","objectToString","d","o","pad","debuglog","NODE_DEBUG","pid","isNullOrUndefined","isSymbol","months","timestamp","getHours","getMinutes","getSeconds","getDate","getMonth","prop","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","promiseResolve","promiseReject","promise","Promise","resolve","reject","setPrototypeOf","defineProperties","custom","callbackify","callbackified","maybeCb","nextTick","rej","ERR_RESOURCE_METHOD_UNDEFINED","Resource","_opts$userData","_bound","_handle","_createHandle","_addStats","_ref$deleteChildren","deleteChildren","children","_deleteHandle","_removeStats","filter","child","delete","funcOrHandle","_bindHandle","PARAMETERS","parameter","isWebgl2","parameterAvailable","webgl1Default","webgl1","webgl2Default","defaultValue","_getParameter","_setParameter","setParameter","className","version","methodNames","stats","resourceCount","resourceMap","created","active","_interopRequireDefault","installParameterDefinitions","TEXTURE_PARAMETERS","SAMPLER_PARAMETERS","RENDERBUFFER_PARAMETERS","PROGRAM_PARAMETERS","FRAMEBUFFER_STATUS","FRAMEBUFFER_ATTACHMENT_PARAMETERS","FENCE_SYNC_PARAMETERS","BUFFER_PARAMETERS","GLboolean","GLuint","GLint","GLfloat","GLenum","_BUFFER_PARAMETERS","_FRAMEBUFFER_STATUS","_PROGRAM_PARAMETERS","_RENDERBUFFER_PARAMET","_SAMPLER_PARAMETERS","_TEXTURE_PARAMETERS","_defineProperty2","default","Texture3D","_this$opts","settings","setImage3D","_ref$level","_ref$internalformat","_ref$depth","_ref$border","_ref$type","_ref$offset","_slicedToArray","arr","_arr","_n","_d","_e","_s","unsupportedIterableToArray","$","$hypot","hypot","abs","sqrt","stat","forced","Infinity","NaN","value1","value2","div","sum","aLen","larg","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","Parent","Class","Function","createHeadlessContext","onError","pageLoadPromise","isPage","isPageLoaded","readyState","getPageLoadPromise","getCanvas","targetCanvas","canvas","_ref2$onError","getElementById","_ref$width","_ref$height","_ref$id","_ref$insert","insert","body","insertBefore","firstChild","createCanvas","createBrowserContext","_ref$opts","_ref$onError","onContextCreationError","statusMessage","_opts$webgl","_opts$webgl2","getContext","getContextData","makeDebugContext","_ref$debug","getDebugContext","getRealContext","realContext","WebGLDebug","debugContext","onGLError","onValidateGLFunc","WebGLDebugContext","getFunctionString","functionName","functionArgs","glFunctionArgsToString","errorMessage","glEnumToString","throw","functionString","break","every","breakOn","_WEBGL_LIMITS","negative","QueryManager","pendingQueries","Set","invalidQueryType","invalidErrorMessage","checkInvalid","cancelInvalidQueries","query","isResultAvailable","getResult","resolveQuery","queryType","onComplete","cancelQuery","resolvers","catch","rejectQuery","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","invalidateQuery","glContext","TEXTURE_BINDING_3D","contextDefaults","throwOnFailure","manageState","createGLContext","throwOnError","copyState","logInfo","webGL","vendorMasked","rendererMasked","vendor","UNMASKED_VENDOR_WEBGL","renderer","UNMASKED_RENDERER_WEBGL","shadingLanguageVersion","getGLContextInfo2","glGetDebugInfo","driver","WEBGL_FEATURES","VERTEX_ARRAY_OBJECT","TIMER_QUERY","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","ELEMENT_INDEX_UINT32","BLEND_EQUATION_MINMAX","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","FEATURES","getFeature","cap","feature","extensionName","hasFeature","hasFeatures","features","Shader","getTypeName","shaderType","shaderName","_compile","getShaderParameter","getShaderSource","getTranslatedShaderSource","shaderSource","compileShader","infoLog","getShaderInfoLog","_parseGLSLCompilerErr","errors","warnings","deleteShader","getSource","_Shader","VertexShader","createShader","_Shader2","FragmentShader","property","receiver","_RENDERBUFFER_FORMATS","CB_FLOAT_WEBGL2","RENDERBUFFER_FORMATS","formats","Renderbuffer","_ref3$samples","samples","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","getRenderbufferParameter","_ref$framebuffer","_ref$color","_ref$stencil","stencil","clearFlags","clear","clearBuffer","_ref2$framebuffer","_ref2$buffer","_ref2$drawBuffer","drawBuffer","_ref2$value","clearBufferiv","clearBufferuiv","clearBufferfv","_value","clearBufferfi","glFormatToComponents","Framebuffer","attachments","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","colorBufferFloat","colorBufferHalfFloat","defaultFramebuffer","_ref2$width","_ref2$height","_ref2$attachments","_ref2$color","_ref2$depth","_ref2$stencil","_ref2$check","check","resize","_createDefaultAttachments","update","clearAttachments","checkStatus","_ref3$attachments","_ref3$clearAttachment","_ref3$resizeAttachmen","resizeAttachments","attach","prevHandle","_setReadBuffer","_setDrawBuffers","drawingBufferWidth","drawingBufferHeight","attachmentPoint","_ref5$clearAttachment","_ref5$resizeAttachmen","newAttachments","descriptor","_attachRenderbuffer","renderbuffer","_descriptor","texture","_descriptor$","layer","_descriptor$2","_attachTexture","_unattach","status","checkFramebufferStatus","STATUS","_getFrameBufferStatus","_ref6$drawBuffers","_ref7$x","_ref7$y","_ref7$width","_ref7$height","_ref7$format","_ref7$pixelArray","pixelArray","_ref7$attachment","components","readPixels","_ref8","_ref8$x","_ref8$y","_ref8$width","_ref8$height","_ref8$format","_ref8$buffer","_ref8$byteOffset","byteOffset","byteCount","glTypeToBytes","_ref9","_ref9$attachment","_ref9$maxHeight","maxHeight","MAX_SAFE_INTEGER","_scalePixels","context","imageData","createImageData","putImageData","_ref10","_ref10$image","_ref10$attachment","_ref10$maxHeight","dataUrl","readDataUrl","_ref11","_ref11$xoffset","xoffset","_ref11$yoffset","yoffset","_ref11$zoffset","zoffset","_ref11$mipmapLevel","_ref11$x","_ref11$y","copyTexSubImage2D","copyTexSubImage3D","_ref12","srcFramebuffer","_ref12$attachment","_ref12$srcX","srcX0","_ref12$srcY","srcY0","srcX1","srcY1","_ref12$dstX","dstX0","_ref12$dstY","dstY0","dstX1","dstY1","_ref12$color","_ref12$depth","_ref12$stencil","_ref12$mask","mask","_ref12$filter","prevDrawHandle","prevReadHandle","blitFramebuffer","_ref13","_ref13$attachments","_ref13$x","_ref13$y","invalidateFramebuffer","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","ATTACHMENT_PARAMETERS","getAttachmentParameter","attachmentName","getAttachmentParameters","open","copyToDataUrl","_ref14","_ref14$target","_ref15","_ref15$target","_parameters","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","_ref16","_ref16$attachment","_ref17","_ref17$attachment","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","caps","getFeatures","EXT_sRGB","createFramebuffer","deleteFramebuffer","_UNIFORM_SETTERS","Sampler","unit","bindSampler","createSampler","deleteSampler","getSamplerParameter","samplerParameterf","samplerParameteri","UNIFORM_SETTERS","uniform1fv","toFloatArray","uniform2fv","uniform3fv","uniform4fv","uniform1iv","toIntArray","uniform2iv","uniform3iv","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform1i","uniform1uiv","toUIntArray","uniform2uiv","uniform3uiv","uniform4uiv","uniformMatrix2x3fv","uniformMatrix2x4fv","uniformMatrix3x2fv","uniformMatrix3x4fv","uniformMatrix4x2fv","uniformMatrix4x3fv","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","array1","toTypedArray","uniformLength","Type","parseUniformName","matches","getUniformSetter","checkUniformValues","uniforms","uniformMap","uniformName","checkUniformValue","checkLength","checkUniformArray","areUniformsEqual","uniform1","uniform2","getUniformCopy","uniform","_COMPOSITE_GL_TYPES","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","drawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","_typeAndSize","getCompositeGLType","_COMPOSITE_GL_TYPES$g","compType","compComponents","ProgramConfiguration","attributeInfos","attributeInfosByName","varyingInfos","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","locationOrName","attributeInfo","getAttributeInfo","varying","getVaryingInfo","count","_gl$getActiveAttrib","getActiveAttrib","getAttribLocation","_addAttribute","_gl$getTransformFeedb","getTransformFeedbackVarying","_addVarying","compositeType","_decomposeCompositeGL","_inferProperties","_decomposeCompositeGL2","Program","_isCached","_setId","vs","fs","varyings","_props$bufferMode","bufferMode","samplers","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","setProps","setUniforms","logPriority","_ref$drawMode","vertexCount","start","end","_ref$isIndexed","isIndexed","_ref$indexType","indexType","_ref$isInstanced","_ref$instanceCount","instanceCount","_ref$vertexArray","vertexArray","transformFeedback","_ref$parameters","_ref$uniforms","_ref$samplers","fb","useProgram","bindForDraw","_bindTextures","primitiveMode","begin","isNaN","drawRangeElements","drawElements","drawArrays","_onChangeCallback","somethingChanged","changedUniforms","_uniformSetters","_setUniforms","uniformSetter","textureIndex","sampler","_textureIndexCounter","createProgram","deleteProgram","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","attachShader","linkProgram","validateProgram","getProgramInfoLog","_uniformCount","getActiveUniform","_parseUniformName","getUniformLocation","uniformIndices","getActiveUniforms","blockName","getUniformBlockIndex","blockIndex","getActiveUniformBlockParameter","blockBinding","uniformBlockBinding","Query","_opts$onComplete","_opts$onError","hasTimerQuery","queryCounterBits","_ref$conservative","conservative","isSupported","poll","setInvalidator","TransformFeedback","buffers","unused","bindOnUse","_unbindBuffers","setBuffers","bufferName","setBuffer","bufferOrParams","_this4","_getVaryingIndex","_this$_getBufferParam","_getBufferParams","sizeInBytes","offsetInBytes","_bindBuffer","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","bufferIndex","_this$_getBufferParam2","createTransformFeedback","deleteTransformFeedback","arrayBuffer","getScratchArray","getBrowser","navigator_","isMSIE","isTrident","chrome","safari","mozInnerScreenX","ERR_ELEMENTS","VertexArrayObject","hasVertexArrays","bufferValue","constantAttributeZero","defaultVertexArray","MAX_ATTRIBUTES","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","elementBuffer","setElementBuffer","vertexAttribIPointer","vertexAttribPointer","enableVertexAttribArray","_enable","disablingAttributeZero","disableVertexAttribArray","elementCount","constantValue","_normalizeConstantArrayValue","updateNeeded","setByteLength","_compareConstantArrayValues","typedArray","_ref$start","_ref$count","copied","fillArray","subData","arrayValue","v1","v2","elements","getVertexAttribOffset","getMaxAttributes","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","VertexArray","drawParams","vertexArrayObject","getDefaultArray","reset","setAttributes","attributes","appParameters","_updateDrawParams","setConstant","clearDrawParams","isDefaultArray","appAccessor","_this$_resolveLocatio","_resolveLocationAndAccessor","_this$_resolveLocatio2","_setConstantAttributes","bindBuffers","unbindBuffers","valueAccessor","_this5","_getAttributeIndex","accessInfo","_getAttributeInfo","attributeName","getAttributeLocation","constant","_setConstantAttributeZero","_setConstantAttribute","getConstantBuffer","isDefault","indexCount","_updateDrawParamsForLocation","getVertexCount","_cache","Map","has","Wrapper","checkNumber","EPSILON","_ref$precision","precision","parseFloat","clone","degrees","PI","printTypes","printDegrees","printRowMajor","_Array","MathArray","ELEMENTS","formatString","t","ai","vector","minVector","maxVector","valid","validate","subtract","addScalar","m","_MathArray","Vector","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","vectors","_i3","_i4","_scale","multiply","distance","multiplyScalar","ARRAY_TYPE","random","vec","ORIGIN","_Vector","Vector3","z","ax","ay","az","bx","by","bz","mag","cosine","acos","radians","_ref$origin","rad","p","r","cos","sin","_ref2$origin","_ref3$origin","_operation","validateVector","v","Vector2","atan2","Vector4","w","transformVector","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b0","b1","b2","b3","fovy","aspect","near","far","nf","tan","IDENTITY","Matrix4","identity","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","setColumnMajor","j","columnMajor","q","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","left","right","bottom","top","rl","tb","eye","_ref2$center","center","_ref2$up","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","_ref3$near","_ref3$far","lr","bt","_ref4$fovy","_ref4$aspect","_ref4$focalDistance","focalDistance","_ref4$near","_ref4$far","halfY","ortho","_ref5$fov","fov","_ref5$aspect","_ref5$near","_ref5$far","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","rx","ry","rz","rotateX","rotateY","rotateZ","axis","b12","b20","b21","b22","factor","transformVector2","transformVector3","transformVector4","_transformVector","translate","Object3D","display","position","rotation","matrix","_ref2$update","setPosition","setRotation","setScale","updateMatrix","pos","rot","rotateXYZ","viewMatrix","modelMatrix","worldMatrix","multiplyRight","worldInverse","invert","worldInverseTranspose","transpose","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","parent","endPosition","endRotation","endScale","ch","transform","Attribute","_opts$isIndexed","externalBuffer","_validateAttributeDefinition","_opts$constant","_setAccessor","_opts$size","_opts$offset","_opts$stride","_opts$normalized","_opts$integer","_opts$divisor","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","getDrawMode","mode","Geometry","_opts$drawMode","_opts$vertexCount","needsRedraw","redraw","_ref$clearRedrawFlags","clearRedrawFlags","indices","vertices","positions","attribute","_print","_autoDetectAttribute","setNeedsRedraw","category","MODULAR_SHADERS","transpileShader","targetGLSLVersion","isVertex","convertVertexShaderTo300","convertFragmentShaderTo300","convertVertexShaderTo100","convertFragmentShaderTo100","ShaderModule","_ref$dependencies","dependencies","_ref$getUniforms","getUniforms","_ref$deprecations","deprecations","vertexShader","fragmentShader","getModuleUniforms","_parseDeprecationDefinitions","moduleSource","def","old","new","shaderModuleRegistry","ShaderModuleRegistry","shaderModules","defaultShaderModules","modules","resolveModules","shaderModuleList","_ref$ignoreMultipleRe","ignoreMultipleRegistrations","shaderModule","_registerShaderModule","moduleOrName","getShaderModule","getShaderDependencies","moduleMap","moduleDepth","getDependencyGraph","_module","isOldIE","behavior","shader","canCompile","_MODULE_INJECTORS","_SHADER_TYPE","MODULE_INJECTORS","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","SHADER_TYPE","assembleShader","_ref$modules","_ref$defines","defines","_ref$inject","inject","_ref$prologue","prologue","sourceLines","glslVersion","versionLine","coreSource","assembledSource","getShaderName","gpuVendor","identifyGPUVendor","getPlatformShaderDefines","isFragment","versionDefines","getVersionDefines","sourceText","define","getApplicationDefines","injectStandardStubs","checkDeprecations","getModuleSource","fragment","injectShader","assembleGetUniforms","moduleUniforms","assembleModuleMap","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","moduleName","IDENTITY_MATRIX","DEFAULT_MODULE_OPTIONS","projectionMatrix","cameraPositionWorld","common","viewProjectionMatrix","lightDirection","dirlight_uLightDirection","project","FS100","model","listItem","recursiveSet","path","overrides","__SEER_INITIALIZED__","overs","valuePath","getDebugTableForUniforms","_ref$header","header","_ref$undefinedOnly","undefinedOnly","SHADER_MODULE_UNIFORM_REGEXP","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","uniformNames","_uniformName","addUniformToTable","_uniformName2","_uniformName3","unusedCount","unusedTable","_table$uniformName","isDefined","isUniformDefined","getDebugTableRow","isInteger","marker","verts","_buffer$getDebugData","getDebugData","modified","getGLSLDeclaration","typeAndName","_attributeInfo$access","listenFor","payload","itemKey","DEPRECATED_PICKING_UNIFORMS","_Object3D","Model","lastLogTime","_createProgram","_attributes","animatedUniforms","animated","animationLoop","timerQueryEnabled","timeElapsedQuery","lastQueryReturned","accumulatedFrameTime","averageFrameTime","profileFrameCount","pickable","moduleSettings","onBeforeRender","onAfterRender","setGeometry","geometry","_setFeedbackBuffers","_feedbackBuffers","_setAnimationProps","_animationProps","_animationLoop","deleteItem","getNeedsRedraw","_createBuffersFromAttributeDescriptors","getAttributes","_extractAnimatedUniforms","_checkForDeprecatedUniforms","animationProps","_evaluateAnimateUniforms","_opts$moduleSettings","_opts$uniforms","_opts$attributes","_opts$samplers","_opts$transformFeedba","_opts$vertexArray","updateModuleSettings","_refreshAnimationProps","_logDrawCallStart","getDrawParams","_timerQueryStart","draw","_timerQueryEnd","_logDrawCallEnd","_opts$discard","discard","feedbackBuffers","_opts$unbindModels","unbindModels","_ref2$vs","_ref2$fs","_ref2$modules","_ref2$defines","_ref2$inject","_ref2$shaderCache","shaderCache","_ref2$varyings","_ref2$bufferMode","_ref2$program","assembleResult","assembleShaders","getProgram","valueFunction","foundAnimated","newValue","staticUniforms","beginTimeElapsedQuery","elapsedTime","lastFrameTime","layout","getValue","logDrawTimeout","attributeTable","ELEMENT_ARRAY_BUFFER","attributeLocation","rowHeader","getDebugTableForVertexArray","_getDebugTableForUnif","uniformTable","_getDebugTableForUnif2","missingTable","configTable","glslDeclaration","varyingInfo","_glslDeclaration","getDebugTableForProgramConfiguration","isReady","throttle","attributesObject","uniformsObject","multiUpdate","DEFAULT_GL_OPTIONS","preserveDrawingBuffer","AnimationLoop","_props$onCreateContex","onCreateContext","_props$onAddHTML","onAddHTML","_props$onInitialize","onInitialize","_props$onRender","onRender","_props$onFinalize","onFinalize","_props$gl","_props$glOptions","glOptions","_props$debug","_props$createFramebuf","_props$autoResizeView","autoResizeViewport","_props$autoResizeDraw","autoResizeDrawingBuffer","_props$useDevicePixel","useDevicePixels","useDevicePixelRatio","_initialized","_running","_animationFrameId","_startPromise","stop","_onMousemove","_onMouseleave","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","initializationPromise","appContext","_addCallbackData","_startLoop","_setupFrame","_clearNeedsRedraw","offScreen","commit","_finalizeCallbackData","_this$props","_this$props2","_this$props3","_this$props4","renderFrame","_onSetupFrame","_resizeFramebuffer","startTime","tick","tock","_mousePosition","_this$_getSizeAndAspe","_getSizeAndAspect","_offScreen","OffscreenCanvas","_createInfoDiv","wrapperDiv","appendChild","html","innerHTML","_this$gl$canvas","clientWidth","clientHeight","devicePixelRatio","resizeGLContext","offsetX","offsetY","_SRC_TEX_PARAMETER_OV","_Geometry","CubeGeometry","getCubeAttributes","CUBE_INDICES","CUBE_POSITIONS","CUBE_NORMALS","CUBE_TEX_COORDS","normals","texCoords","_Model","Cube","depthTest","LEQUAL","cube","makeInstancedCube","perspective","uTime","uProjection","uView","lookAt","uLightDirection","uModel","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","render","offsets","SIDE","dirlight","instanceOffsets","instanceColors","Hero","componentWillUnmount","_animationStop","_animationStart","onEnter","onLeave","zIndex","Component","TitleSection","styled","H1","theme","fontFamilyLight","backgroundImg","ContributorContainer","OpenGovContainer","ContributorSection","gray","SectionContainer","SectionTitle","fontFamilyMedium","SectionContent","ListTitle","ListItem","ManifestoSection","imageResolver","href","padding","marginTop","IndexPage","allFile","edges","curr","node","relativePath","publicURL","page","Texture2D","LUMA_SETTERS","_framebuffer","blend","cull","dither","derivativeHint","mipmapHint","polygonOffsetFill","scissorTest","stencilTest","stencilMask","_value2","backMask","stencilFunc","_args","_args2","ref","backFunc","backRef","stencilOp","_args3","_args4","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","withParameters","_parameters$nocatch","nocatch","frameBuffer","_WEBGL_PARAMETERS","getWebGL2ValueOrZero","WEBGL_PARAMETERS","GPU_DISJOINT_EXT","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","getParameterPolyfill","originalGetParameter","limit","_typeof","isWebGL","glAlias","ARRAY_BUFFER","assertWebGLContext","assertWebGL2Context","ContainerLg","attrs","containerMaxWidth","breakpointsMediaQueries","xl","ContainerSm","Headline","fontFamilySemiBold","fontSizeUltraHeading","lineHeightUltraHeading","letterSpacingUltraHeading","fontWeightUltraHeading","fontSizeH1","lineHeightH1","darkBlue","letterSpacingH1","H2","fontSizeH2","lineHeightH2","H3","fontFamily","fontSizeH3","lineHeightH3","Paragraph","fontSizeH4","lineHeightH4","fontSizeP1","lineHeightP1","List","ul","li","code","nodeIO","_getPrototypeOf","__proto__","cloneTextureFrom","refTexture","TextureType","getKeyValue","number","getKey","glKey","_debugParameters","timers","delay","replacer","includes","send","postMessage","listeners","_message$data","typeListeners","init","__SEER_LISTENER__","list","updateItem","addLog","removeListener","clean","uidCounters","uid","isPowerOfTwo","isObjectEmpty","isEmpty","formatArrayValue","_opts$maxElts","maxElts","terminator","_opts$isInteger","decimal","__esModule","_possibleConstructorReturn","upgradeMessage","methodName","global_","isArrayX","isArrayY","GL_STATE_SETTERS","_hint","_update5","g","_update9","modeRGB","modeAlpha","_update10","dst","_update11","srcRGB","dstRGB","srcAlpha","dstAlpha","_update12","zNear","zFar","units","_update23","_update24","_update26","_update28","_update29","zfail","zpass","_update30","_update31","installGetterOverride","originalGetterFunc","installSetterSpy","originalSetterFunc","_gl$state","_setter","_updateCache","valueChanged","oldValue","GLState","_ref$copyState","_ref$log","stateStack","oldValues","trackContextState","_ref2$enable","pushContextState","popContextState","_defineProperty","WebGLDebugUtils","glValidEnumContexts","1","0","3","4","2","6","8","5","10","9","7","11","12","glEnums","enumStringToValue","propertyName","checkInit","glFunctionArgToString","numArgs","argumentIndex","funcInfo","enums","orResult","orEnums","enumValue","makePropertyWrapper","wrapper","__defineGetter__","__defineSetter__","resetToInitialState","isWebGL2RenderingContext","numAttribs","MAX_VERTEX_ATTRIBS","tmp","ii","FLOAT","vertexAttrib1f","numTextureUnits","MAX_TEXTURE_IMAGE_UNITS","TEXTURE0","TEXTURE_CUBE_MAP","TEXTURE_2D","TEXTURE_2D_ARRAY","TEXTURE_3D","FRAMEBUFFER","RENDERBUFFER","BLEND","CULL_FACE","DEPTH_TEST","DITHER","SCISSOR_TEST","FUNC_ADD","ONE","ZERO","BACK","LESS","CCW","GENERATE_MIPMAP_HINT","DONT_CARE","PACK_ALIGNMENT","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","BROWSER_DEFAULT_WEBGL","ALWAYS","KEEP","STENCIL_BUFFER_BIT","COPY_READ_BUFFER","COPY_WRITE_BUFFER","PIXEL_PACK_BUFFER","PIXEL_UNPACK_BUFFER","numTransformFeedbacks","MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS","TRANSFORM_FEEDBACK_BUFFER","numUBOs","MAX_UNIFORM_BUFFER_BINDINGS","UNIFORM_BUFFER","RASTERIZER_DISCARD","UNPACK_IMAGE_HEIGHT","UNPACK_SKIP_IMAGES","UNPACK_ROW_LENGTH","UNPACK_SKIP_ROWS","UNPACK_SKIP_PIXELS","PACK_ROW_LENGTH","PACK_SKIP_ROWS","PACK_SKIP_PIXELS","FRAGMENT_SHADER_DERIVATIVE_HINT","getError","argStr","opt_onErrorFunc","opt_onFunc","opt_err_ctx","glErrorShadow","makeErrorWrapper","wrapped","NO_ERROR","unwrappedContext_","onLost_","onRestored_","wrappedContext_","contextId_","contextLost_","resourceDb_","numCallsToLoseContext_","numCalls_","canRestore_","restoreTimeout_","glErrorShadow_","wrapEvent","makeLostContextSimulatingContext","addOnContextLostListener","addOnContextRestoredListener","loseContextIfTime","loseContext","makeLostContextFunctionWrapper","makeWebGLContextEvent","preventDefault","bubble","wrapAddEventListener","k","clearErrors","CONTEXT_LOST_WEBGL","callbacks","setTimeout","restoreContext","resource","WebGLQuery","WebGLSampler","WebGLSync","deleteSync","WebGLTransformFeedback","WebGLVertexArrayObject","freeResources","loseContextInNCalls","numCalls","getNumCalls","setRestoreTimeout","timeout","creationFunctions","__webglDebugContextLostId__","functionsThatShouldReturnNull","isFunctions","FRAMEBUFFER_UNSUPPORTED","isContextLost","getFragDataLocation","clientWaitSync","WAIT_FAILED","INVALID_INDEX","computeOffsetPixels","contextHeight","pixelOffset","percentOffset","parseOffsetAsPercentage","constants","ensureChildrenIsValid","Children","only","isDOMElement","timeoutQueue","onNextTick","item","shift","clearTimeout","_createClass","protoProps","staticProps","defaultProps","horizontal","onPositionChange","fireOnRapidScroll","Waypoint","_BaseClass","refElement","getWindow","cancelOnNextTick","ensureRefIsProvidedByChild","_handleScroll","scrollableAncestor","_findScrollableAncestor","scrollEventListenerUnsubscribe","resizeEventListenerUnsubscribe","newProps","resolveScrollableAncestorProp","parentNode","getComputedStyle","overflow","getPropertyValue","bounds","_getBounds","currentPosition","viewportBottom","viewportTop","waypointTop","waypointBottom","getCurrentPosition","previousPosition","_previousPosition","callbackArg","isRapidScrollDown","isRapidScrollUp","_ref$getBoundingClien","getBoundingClientRect","contextScrollTop","innerWidth","innerHeight","offsetWidth","offsetHeight","_props2","fontSize","current","cloneElement","innerRef","PureComponent","above","below","inside","invisible","displayName","_defineProperties","requestAnimationFrame","callback","cancelAnimationFrame","timerId","defaultName","SHADER_NAME_REGEXP","parseGLSLCompilerError","errLog","errorStrings","shaderDescription","getShaderTypeName","errorString","segments","parseInt","lines","delim","maxDigits","lineNumber","digits","padLeft","addLineNumbers","formatErrors","column","trim","getShaderVersion","words"],"mappings":"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","file":"component---src-pages-index-js-db7c55893288d6563c66.js","sourcesContent":["import checkIfBrowser from '../../env/is-browser';\nexport { self, window, global, document, process, console } from '../../env/globals';\nexport var VERSION = typeof \"2.1.0\" !== 'undefined' ? \"2.1.0\" : 'untranspiled source';\nexport var isBrowser = checkIfBrowser();","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction getStorage(type) {\n  try {\n    var storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nvar LocalStorage = function () {\n  function LocalStorage(id, defaultSettings) {\n    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'sessionStorage';\n\n    _classCallCheck(this, LocalStorage);\n\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  _createClass(LocalStorage, [{\n    key: \"getConfiguration\",\n    value: function getConfiguration() {\n      return this.config;\n    }\n  }, {\n    key: \"setConfiguration\",\n    value: function setConfiguration(configuration) {\n      this.config = {};\n      return this.updateConfiguration(configuration);\n    }\n  }, {\n    key: \"updateConfiguration\",\n    value: function updateConfiguration(configuration) {\n      Object.assign(this.config, configuration);\n\n      if (this.storage) {\n        var serialized = JSON.stringify(this.config);\n        this.storage.setItem(this.id, serialized);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_loadConfiguration\",\n    value: function _loadConfiguration() {\n      var configuration = {};\n\n      if (this.storage) {\n        var serializedConfiguration = this.storage.getItem(this.id);\n        configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n      }\n\n      Object.assign(this.config, configuration);\n      return this;\n    }\n  }]);\n\n  return LocalStorage;\n}();\n\nexport { LocalStorage as default };","import { window, process, isBrowser } from './globals';\nexport function getTimestamp() {\n  if (!isBrowser) {\n    var secondsAndNanoseconds = process.hrtime();\n    return secondsAndNanoseconds[0] + secondsAndNanoseconds[1] / 1e6;\n  }\n\n  if (window.performance) {\n    return window.performance.now();\n  }\n\n  return Date.now();\n}\nexport var startTimestamp = getTimestamp();","export function formatTime(ms) {\n  var formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\n\nfunction splitIntoBaseAndExponent(number) {\n  var base = number;\n  var exponent = 0;\n\n  if (number !== 0) {\n    while (base >= 10 || base <= -10) {\n      base /= 10;\n      exponent++;\n    }\n\n    while (base < 1 && base > -1) {\n      base *= 10;\n      exponent--;\n    }\n  }\n\n  return {\n    base: base,\n    exponent: exponent\n  };\n}\n\nexport function getSISuffix(multipleOf3) {\n  var SI_SUFFIXES = {\n    0: '',\n    1: 'K',\n    2: 'M',\n    3: 'G',\n    '-1': 'm',\n    '-2': '',\n    '-3': 'n'\n  };\n  var key = String(multipleOf3);\n  return key in SI_SUFFIXES ? SI_SUFFIXES[key] : \"e\".concat(multipleOf3 * 3);\n}\nexport function formatSI(number) {\n  var precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n\n  var _splitIntoBaseAndExpo = splitIntoBaseAndExponent(number),\n      base = _splitIntoBaseAndExpo.base,\n      exponent = _splitIntoBaseAndExpo.exponent;\n\n  var multipleOf3 = Math.floor(exponent / 3);\n  var remaining = exponent - multipleOf3 * 3;\n  var digits = base * Math.pow(10, remaining);\n  return \"\".concat(digits.toPrecision(precision)).concat(getSISuffix(multipleOf3));\n}\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale) {\n  var maxWidth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 600;\n  var imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  var width = image.width * scale;\n  var height = image.height * scale;\n  var style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}","import { isBrowser } from './globals';\nexport var COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}","export function autobind(obj) {\n  var predefined = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['constructor'];\n  var proto = Object.getPrototypeOf(obj);\n  var propNames = Object.getOwnPropertyNames(proto);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var key = _step.value;\n\n      if (typeof obj[key] === 'function') {\n        if (!predefined.find(function (name) {\n          return key === name;\n        })) {\n          obj[key] = obj[key].bind(obj);\n        }\n      }\n    };\n\n    for (var _iterator = propNames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { VERSION } from './utils/globals';\nimport LocalStorage from './utils/local-storage';\nimport { getTimestamp } from './utils/timestamp';\nimport { formatImage, formatTime, leftPad } from './utils/formatters';\nimport { addColor } from './utils/color';\nimport { autobind } from './utils/autobind';\nimport { isBrowser } from './utils/globals';\nimport _assert from '../lib/utils/assert';\nvar originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nvar DEFAULT_SETTINGS = {\n  enabled: false,\n  priority: 0\n};\n\nfunction noop() {}\n\nvar cache = {};\n\nfunction getTableHeader(table) {\n  for (var key in table) {\n    for (var title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nvar Log = function () {\n  function Log() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        id = _ref.id;\n\n    _classCallCheck(this, Log);\n\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getTimestamp();\n    this._deltaTs = getTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  _createClass(Log, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this._storage.config.enabled;\n    }\n  }, {\n    key: \"getPriority\",\n    value: function getPriority() {\n      return this._storage.config.priority;\n    }\n  }, {\n    key: \"getLevel\",\n    value: function getLevel() {\n      return this._storage.config.priority;\n    }\n  }, {\n    key: \"getTotal\",\n    value: function getTotal() {\n      return Number((getTimestamp() - this._startTs).toPrecision(10));\n    }\n  }, {\n    key: \"getDelta\",\n    value: function getDelta() {\n      return Number((getTimestamp() - this._deltaTs).toPrecision(10));\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this._storage.updateConfiguration({\n        enabled: enabled\n      });\n\n      return this;\n    }\n  }, {\n    key: \"setLevel\",\n    value: function setLevel(level) {\n      this._storage.updateConfiguration({\n        priority: level\n      });\n\n      return this;\n    }\n  }, {\n    key: \"assert\",\n    value: function assert(condition, message) {\n      _assert(condition, message);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return this._getLogFunction({\n        message: message,\n        args: args,\n        method: originalConsole.warn,\n        once: true\n      });\n    }\n  }, {\n    key: \"error\",\n    value: function error(message) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      return this._getLogFunction({\n        message: message,\n        args: args,\n        method: originalConsole.error\n      });\n    }\n  }, {\n    key: \"deprecated\",\n    value: function deprecated(oldUsage, newUsage) {\n      return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"removed\",\n    value: function removed(oldUsage, newUsage) {\n      return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"probe\",\n    value: function probe(priority, message) {\n      for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        args[_key3 - 2] = arguments[_key3];\n      }\n\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        args: args,\n        method: originalConsole.log,\n        time: true,\n        once: true\n      });\n    }\n  }, {\n    key: \"log\",\n    value: function log(priority, message) {\n      for (var _len4 = arguments.length, args = new Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n        args[_key4 - 2] = arguments[_key4];\n      }\n\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        args: args,\n        method: originalConsole.debug\n      });\n    }\n  }, {\n    key: \"info\",\n    value: function info(priority, message) {\n      for (var _len5 = arguments.length, args = new Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n        args[_key5 - 2] = arguments[_key5];\n      }\n\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        args: args,\n        method: console.info\n      });\n    }\n  }, {\n    key: \"once\",\n    value: function once(priority, message) {\n      for (var _len6 = arguments.length, args = new Array(_len6 > 2 ? _len6 - 2 : 0), _key6 = 2; _key6 < _len6; _key6++) {\n        args[_key6 - 2] = arguments[_key6];\n      }\n\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        args: args,\n        method: originalConsole.debug || originalConsole.info,\n        once: true\n      });\n    }\n  }, {\n    key: \"table\",\n    value: function table(priority, _table, columns) {\n      if (_table) {\n        var tag = getTableHeader(_table);\n        return this._getLogFunction({\n          priority: priority,\n          message: _table,\n          args: columns && [columns],\n          tag: tag,\n          method: console.table || noop\n        });\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"image\",\n    value: function image(_ref2) {\n      var priority = _ref2.priority,\n          _image = _ref2.image,\n          _ref2$message = _ref2.message,\n          message = _ref2$message === void 0 ? '' : _ref2$message,\n          _ref2$scale = _ref2.scale,\n          scale = _ref2$scale === void 0 ? 1 : _ref2$scale;\n\n      if (priority > this.getPriority()) {\n        return noop;\n      }\n\n      return isBrowser ? this._logImageInBrowser({\n        image: _image,\n        message: message,\n        scale: scale\n      }) : this._logImageInNode({\n        image: _image,\n        message: message,\n        scale: scale\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      if (console.table) {\n        console.table(this._storage.config);\n      } else {\n        console.log(this._storage.config);\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get(setting) {\n      return this._storage.config[setting];\n    }\n  }, {\n    key: \"set\",\n    value: function set(setting, value) {\n      this._storage.updateConfiguration(_defineProperty({}, setting, value));\n    }\n  }, {\n    key: \"_logImageInNode\",\n    value: function _logImageInNode(_ref3) {\n      var image = _ref3.image,\n          _ref3$message = _ref3.message,\n          message = _ref3$message === void 0 ? '' : _ref3$message,\n          _ref3$scale = _ref3.scale,\n          scale = _ref3$scale === void 0 ? 1 : _ref3$scale;\n      var asciify = null;\n\n      try {\n        asciify = module.require('asciify-image');\n      } catch (error) {}\n\n      if (asciify) {\n        return function () {\n          return asciify(image, {\n            fit: 'box',\n            width: \"\".concat(Math.round(80 * scale), \"%\")\n          }).then(function (data) {\n            return console.log(data);\n          });\n        };\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"_logImageInBrowser\",\n    value: function _logImageInBrowser(_ref4) {\n      var image = _ref4.image,\n          _ref4$message = _ref4.message,\n          message = _ref4$message === void 0 ? '' : _ref4$message,\n          _ref4$scale = _ref4.scale,\n          scale = _ref4$scale === void 0 ? 1 : _ref4$scale;\n\n      if (typeof image === 'string') {\n        var img = new Image();\n\n        img.onload = function () {\n          var _console;\n\n          var args = formatImage(img, message, scale);\n\n          (_console = console).log.apply(_console, _toConsumableArray(args));\n        };\n\n        img.src = image;\n        return noop;\n      }\n\n      var element = image.nodeName || '';\n\n      if (element.toLowerCase() === 'img') {\n        var _console2;\n\n        (_console2 = console).log.apply(_console2, _toConsumableArray(formatImage(image, message, scale)));\n\n        return noop;\n      }\n\n      if (element.toLowerCase() === 'canvas') {\n        var _img = new Image();\n\n        _img.onload = function () {\n          var _console3;\n\n          return (_console3 = console).log.apply(_console3, _toConsumableArray(formatImage(_img, message, scale)));\n        };\n\n        _img.src = image.toDataURL();\n        return noop;\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"time\",\n    value: function time(priority, message) {\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        method: console.time ? console.time : console.info\n      });\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd(priority, message) {\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        method: console.timeEnd ? console.timeEnd : console.info\n      });\n    }\n  }, {\n    key: \"timeStamp\",\n    value: function timeStamp(priority, message) {\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        method: console.timeStamp || noop\n      });\n    }\n  }, {\n    key: \"group\",\n    value: function group(priority, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        collapsed: false\n      };\n      opts = this._normalizeArguments({\n        priority: priority,\n        message: message,\n        opts: opts\n      });\n      var _opts = opts,\n          collapsed = _opts.collapsed;\n      return this._getLogFunction({\n        priority: priority,\n        message: message,\n        opts: opts,\n        method: (collapsed ? console.groupCollapsed : console.group) || console.info\n      });\n    }\n  }, {\n    key: \"groupCollapsed\",\n    value: function groupCollapsed(priority, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.group(priority, message, Object.assign({}, opts, {\n        collapsed: true\n      }));\n    }\n  }, {\n    key: \"groupEnd\",\n    value: function groupEnd(priority) {\n      return this._getLogFunction({\n        priority: priority,\n        message: '',\n        method: console.groupEnd || noop\n      });\n    }\n  }, {\n    key: \"withGroup\",\n    value: function withGroup(priority, message, func) {\n      var opts = this._normalizeArguments({\n        priority: priority,\n        message: message\n      });\n\n      this.group(opts);\n\n      try {\n        func();\n      } finally {\n        this.groupEnd(opts.message);\n      }\n    }\n  }, {\n    key: \"trace\",\n    value: function trace() {\n      if (console.trace) {\n        console.trace();\n      }\n    }\n  }, {\n    key: \"_shouldLog\",\n    value: function _shouldLog(priority) {\n      priority = this._normalizePriority(priority);\n      return priority === 0 || this.isEnabled() && this.getPriority() >= priority;\n    }\n  }, {\n    key: \"_getElapsedTime\",\n    value: function _getElapsedTime() {\n      var total = this.getTotal();\n      var delta = this.getDelta();\n      this._deltaTs = getTimestamp();\n      return {\n        total: total,\n        delta: delta\n      };\n    }\n  }, {\n    key: \"_getLogFunction\",\n    value: function _getLogFunction(opts) {\n      if (this._shouldLog(opts.priority)) {\n        var _opts2 = opts,\n            method = _opts2.method;\n        opts = this._parseArguments(opts);\n\n        _assert(method);\n\n        var _opts3 = opts,\n            message = _opts3.message;\n        var tag = opts.tag || opts.message;\n\n        if (opts.once) {\n          if (!cache[tag]) {\n            cache[tag] = getTimestamp();\n          } else {\n            return noop;\n          }\n        }\n\n        message = this._decorateMessage(message, opts);\n        return method.bind.apply(method, [console, message].concat(_toConsumableArray(opts.args)));\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"_parseArguments\",\n    value: function _parseArguments(options) {\n      var normOpts = this._normalizeArguments(options);\n\n      var _this$_getElapsedTime = this._getElapsedTime(),\n          delta = _this$_getElapsedTime.delta,\n          total = _this$_getElapsedTime.total;\n\n      return Object.assign(options, normOpts, {\n        delta: delta,\n        total: total\n      });\n    }\n  }, {\n    key: \"_normalizePriority\",\n    value: function _normalizePriority(priority) {\n      var resolvedPriority;\n\n      switch (_typeof(priority)) {\n        case 'number':\n          resolvedPriority = priority;\n          break;\n\n        case 'object':\n          resolvedPriority = priority.priority || 0;\n          break;\n\n        default:\n          resolvedPriority = 0;\n      }\n\n      _assert(Number.isFinite(resolvedPriority) && resolvedPriority >= 0);\n\n      return resolvedPriority;\n    }\n  }, {\n    key: \"_normalizeArguments\",\n    value: function _normalizeArguments(_ref5) {\n      var priority = _ref5.priority,\n          message = _ref5.message,\n          _ref5$args = _ref5.args,\n          args = _ref5$args === void 0 ? [] : _ref5$args,\n          opts = _ref5.opts;\n      var newOpts = {\n        priority: this._normalizePriority(priority),\n        message: message,\n        args: args\n      };\n\n      switch (_typeof(priority)) {\n        case 'string':\n        case 'function':\n          if (message !== undefined) {\n            args.unshift(message);\n          }\n\n          Object.assign(newOpts, {\n            message: priority\n          });\n          break;\n\n        case 'object':\n          Object.assign(newOpts, priority);\n          break;\n\n        default:\n      }\n\n      if (typeof newOpts.message === 'function') {\n        newOpts.message = this._shouldLog(newOpts.priority) ? newOpts.message() : '';\n      }\n\n      _assert(typeof newOpts.message === 'string' || _typeof(newOpts.message) === 'object');\n\n      return Object.assign(newOpts, opts);\n    }\n  }, {\n    key: \"_decorateMessage\",\n    value: function _decorateMessage(message, opts) {\n      if (typeof message === 'string') {\n        var time = '';\n\n        if (opts.time) {\n          var _this$_getElapsedTime2 = this._getElapsedTime(),\n              total = _this$_getElapsedTime2.total;\n\n          time = leftPad(formatTime(total));\n        }\n\n        message = opts.time ? \"\".concat(this.id, \": \").concat(time, \"  \").concat(message) : \"\".concat(this.id, \": \").concat(message);\n        message = addColor(message, opts.color, opts.background);\n      }\n\n      return message;\n    }\n  }, {\n    key: \"priority\",\n    set: function set(newPriority) {\n      this._storage.updateConfiguration({\n        priority: newPriority\n      });\n\n      return this;\n    },\n    get: function get() {\n      return this._storage.config.priority;\n    }\n  }]);\n\n  return Log;\n}();\n\nexport { Log as default };\nLog.VERSION = VERSION;","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'luma'\n}).enable();","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL_CONTEXT_POLYFI; // WebGL1/WebGL2 extension polyfill support\n//\n// Provides a function that creates polyfills for WebGL2 functions based\n// on available extensions and installs them on a supplied target (could be\n// the WebGLContext or its prototype, or a separate object).\n//\n// This is intended to be a stand-alone file with minimal dependencies,\n// easy to reuse or repurpose in other projects.\n\n/* eslint-disable camelcase, brace-style */\n\n\nimport { getParameterPolyfill } from './polyfill-get-parameter'; // import polyfillVertexArrayObject from './polyfill-vertex-array-object';\n// import {WebGLRenderingContext} from './webgl-rendering-context';\n\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n\nvar OES_vertex_array_object = 'OES_vertex_array_object';\nvar ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension'; // Return true if WebGL2 context\n\nfunction isWebGL2(gl) {\n  return gl && 32874 === 32874;\n} // Return object with webgl2 flag and an extension\n\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n} // function mapExtensionConstant(gl, constant) {\n//   switch (constant) {\n//   case ext.FRAGMENT_SHADER_DERIVATIVE_HINT_OES: return GL.FRAGMENT_SHADER_DERIVATIVE_HINT;\n//   }\n// }\n\n\nvar WEBGL_CONTEXT_POLYFILLS = (_WEBGL_CONTEXT_POLYFI = {}, _defineProperty(_WEBGL_CONTEXT_POLYFI, OES_vertex_array_object, {\n  meta: {\n    suffix: 'OES'\n  },\n  // NEW METHODS\n  createVertexArray: function createVertexArray() {\n    assert(false, ERR_VAO_NOT_SUPPORTED);\n  },\n  deleteVertexArray: function deleteVertexArray() {},\n  bindVertexArray: function bindVertexArray() {},\n  isVertexArray: function isVertexArray() {\n    return false;\n  }\n}), _defineProperty(_WEBGL_CONTEXT_POLYFI, ANGLE_instanced_arrays, {\n  meta: {\n    suffix: 'ANGLE' // constants: {\n    //   VERTEX_ATTRIB_ARRAY_DIVISOR: 'VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE'\n    // }\n\n  },\n  vertexAttribDivisor: function vertexAttribDivisor(location, divisor) {\n    // Accept divisor 0 even if instancing is not supported (0 = no instancing)\n    assert(divisor === 0, 'WebGL instanced rendering not supported');\n  },\n  drawElementsInstanced: function drawElementsInstanced() {},\n  drawArraysInstanced: function drawArraysInstanced() {}\n}), _defineProperty(_WEBGL_CONTEXT_POLYFI, WEBGL_draw_buffers, {\n  meta: {\n    suffix: 'WEBGL'\n  },\n  drawBuffers: function drawBuffers() {\n    assert(false);\n  }\n}), _defineProperty(_WEBGL_CONTEXT_POLYFI, EXT_disjoint_timer_query, {\n  meta: {\n    suffix: 'EXT'\n  },\n  // WebGL1: Polyfills the WebGL2 Query API\n  createQuery: function createQuery() {\n    assert(false);\n  },\n  deleteQuery: function deleteQuery() {\n    assert(false);\n  },\n  beginQuery: function beginQuery() {\n    assert(false);\n  },\n  endQuery: function endQuery() {},\n  getQuery: function getQuery(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  // The WebGL1 extension uses getQueryObject rather then getQueryParameter\n  getQueryParameter: function getQueryParameter(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  // plus the additional `queryCounter` method\n  queryCounter: function queryCounter() {},\n  getQueryObject: function getQueryObject() {}\n}), _defineProperty(_WEBGL_CONTEXT_POLYFI, EXT_disjoint_timer_query_webgl2, {\n  meta: {\n    suffix: 'EXT'\n  },\n  // install `queryCounter`\n  // `null` avoids overwriting WebGL1 `queryCounter` if the WebGL2 extension is not available\n  queryCounter: null\n}), _defineProperty(_WEBGL_CONTEXT_POLYFI, \"OVERRIDES\", {\n  // Ensure readBuffer is a no-op\n  readBuffer: function readBuffer(gl, originalFunc, attachment) {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {// assert(attachment !== GL_COLOR_ATTACHMENT0 && attachment !== GL_FRONT);\n    }\n  },\n  // Override for getVertexAttrib that returns sane values for non-WebGL1 constants\n  getVertexAttrib: function getVertexAttrib(gl, originalFunc, location, pname) {\n    // const gl = this; // eslint-disable-line\n    var _getExtensionData = getExtensionData(gl, ANGLE_instanced_arrays),\n        webgl2 = _getExtensionData.webgl2,\n        ext = _getExtensionData.ext;\n\n    var result;\n\n    switch (pname) {\n      // WebGL1 attributes will never be integer\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n      // if instancing is not available, return 0 meaning divisor has not been set\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  // Handle transform feedback and uniform block queries in WebGL1\n  getProgramParameter: function getProgramParameter(gl, originalFunc, program, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: function getInternalformatParameter(gl, originalFunc, target, format, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n  getTexParameter: function getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        var extensions = gl.luma.extensions;\n        var ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n  getParameter: getParameterPolyfill,\n  hint: function hint(gl, originalFunc, pname, value) {\n    // TODO - handle GL.FRAGMENT_SHADER_DERIVATIVE_HINT:\n    // switch (pname) {\n    // case GL.FRAGMENT_SHADER_DERIVATIVE_HINT:\n    // }\n    return originalFunc(pname, value);\n  }\n}), _WEBGL_CONTEXT_POLYFI);\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {}; // `getSupportedExtensions` can return null when context is lost.\n\n  var EXTENSIONS = gl.getSupportedExtensions() || [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = EXTENSIONS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var extension = _step.value;\n      gl.luma[extension] = gl.getExtension(extension);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n} // Polyfills a single WebGL extension into the `target` object\n\n\nfunction polyfillExtension(gl, _ref) {\n  var extension = _ref.extension,\n      target = _ref.target,\n      target2 = _ref.target2;\n  var defaults = WEBGL_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  var _defaults$meta = defaults.meta,\n      meta = _defaults$meta === void 0 ? {} : _defaults$meta;\n  var _meta$suffix = meta.suffix,\n      suffix = _meta$suffix === void 0 ? '' : _meta$suffix;\n  var ext = gl.getExtension(extension);\n  Object.keys(defaults).forEach(function (key) {\n    var extKey = \"\".concat(key).concat(suffix);\n    var polyfill = null;\n\n    if (key === 'meta') {// ignore\n    } else if (typeof gl[key] === 'function') {// WebGL2 implementation is already\n    } else if (ext && typeof ext[extKey] === 'function') {\n      // pick extension implemenentation,if available\n      polyfill = function polyfill() {\n        return ext[extKey].apply(ext, arguments);\n      };\n    } else if (typeof defaults[key] === 'function') {\n      // pick the mock implementation, if no implementation was detected\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n} // Install simple overrides (mostly get* functions)\n\n\nfunction installOverrides(gl, _ref2) {\n  var target = _ref2.target,\n      target2 = _ref2.target2;\n  var OVERRIDES = WEBGL_CONTEXT_POLYFILLS.OVERRIDES;\n  Object.keys(OVERRIDES).forEach(function (key) {\n    if (typeof OVERRIDES[key] === 'function') {\n      // install an override, if no implementation was detected\n      var originalFunc = gl[key] ? gl[key].bind(gl) : function () {};\n      var polyfill = OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n} // Registers polyfill or mock functions for all known extensions\n\n\nexport default function polyfillContext(gl) {\n  // polyfillVertexArrayObject(WebGLRenderingContext, gl);\n  gl.luma = gl.luma || {};\n  initializeExtensions(gl);\n\n  if (!gl.luma.polyfilled) {\n    for (var extension in WEBGL_CONTEXT_POLYFILLS) {\n      if (extension !== 'overrides') {\n        polyfillExtension(gl, {\n          extension: extension,\n          target: gl.luma,\n          target2: gl\n        });\n      }\n    }\n\n    installOverrides(gl, {\n      target: gl.luma,\n      target2: gl\n    });\n    gl.luma.polyfilled = true;\n  }\n\n  return gl;\n}\n/* global window, global */\n\nvar global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","var CAN_USE_DOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement); // Adapted from Modernizr\n// https://github.com/Modernizr/Modernizr/blob/acb3f0d9/feature-detects/dom/passiveeventlisteners.js#L26-L37\n\nfunction testPassiveEventListeners() {\n  if (!CAN_USE_DOM) {\n    return false;\n  }\n\n  if (!window.addEventListener || !window.removeEventListener || !Object.defineProperty) {\n    return false;\n  }\n\n  var supportsPassiveOption = false;\n\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      // eslint-disable-next-line getter-return\n      get: function () {\n        function get() {\n          supportsPassiveOption = true;\n        }\n\n        return get;\n      }()\n    });\n\n    var noop = function noop() {};\n\n    window.addEventListener('testPassiveEventSupport', noop, opts);\n    window.removeEventListener('testPassiveEventSupport', noop, opts);\n  } catch (e) {// do nothing\n  }\n\n  return supportsPassiveOption;\n}\n\nvar memoized = void 0;\n\nfunction canUsePassiveEventListeners() {\n  if (memoized === undefined) {\n    memoized = testPassiveEventListeners();\n  }\n\n  return memoized;\n}\n\nfunction normalizeEventOptions(eventOptions) {\n  if (!eventOptions) {\n    return undefined;\n  }\n\n  if (!canUsePassiveEventListeners()) {\n    // If the browser does not support the passive option, then it is expecting\n    // a boolean for the options argument to specify whether it should use\n    // capture or not. In more modern browsers, this is passed via the `capture`\n    // option, so let's just hoist that value up.\n    return !!eventOptions.capture;\n  }\n\n  return eventOptions;\n}\n/* eslint-disable no-bitwise */\n\n/**\n * Generate a unique key for any set of event options\n */\n\n\nfunction eventOptionsKey(normalizedEventOptions) {\n  if (!normalizedEventOptions) {\n    return 0;\n  } // If the browser does not support passive event listeners, the normalized\n  // event options will be a boolean.\n\n\n  if (normalizedEventOptions === true) {\n    return 100;\n  } // At this point, the browser supports passive event listeners, so we expect\n  // the event options to be an object with possible properties of capture,\n  // passive, and once.\n  //\n  // We want to consistently return the same value, regardless of the order of\n  // these properties, so let's use binary maths to assign each property to a\n  // bit, and then add those together (with an offset to account for the\n  // booleans at the beginning of this function).\n\n\n  var capture = normalizedEventOptions.capture << 0;\n  var passive = normalizedEventOptions.passive << 1;\n  var once = normalizedEventOptions.once << 2;\n  return capture + passive + once;\n}\n\nfunction ensureCanMutateNextEventHandlers(eventHandlers) {\n  if (eventHandlers.handlers === eventHandlers.nextHandlers) {\n    // eslint-disable-next-line no-param-reassign\n    eventHandlers.nextHandlers = eventHandlers.handlers.slice();\n  }\n}\n\nfunction TargetEventHandlers(target) {\n  this.target = target;\n  this.events = {};\n}\n\nTargetEventHandlers.prototype.getEventHandlers = function () {\n  function getEventHandlers(eventName, options) {\n    var key = String(eventName) + ' ' + String(eventOptionsKey(options));\n\n    if (!this.events[key]) {\n      this.events[key] = {\n        handlers: [],\n        handleEvent: undefined\n      };\n      this.events[key].nextHandlers = this.events[key].handlers;\n    }\n\n    return this.events[key];\n  }\n\n  return getEventHandlers;\n}();\n\nTargetEventHandlers.prototype.handleEvent = function () {\n  function handleEvent(eventName, options, event) {\n    var eventHandlers = this.getEventHandlers(eventName, options);\n    eventHandlers.handlers = eventHandlers.nextHandlers;\n    eventHandlers.handlers.forEach(function (handler) {\n      if (handler) {\n        // We need to check for presence here because a handler function may\n        // cause later handlers to get removed. This can happen if you for\n        // instance have a waypoint that unmounts another waypoint as part of an\n        // onEnter/onLeave handler.\n        handler(event);\n      }\n    });\n  }\n\n  return handleEvent;\n}();\n\nTargetEventHandlers.prototype.add = function () {\n  function add(eventName, listener, options) {\n    var _this = this; // options has already been normalized at this point.\n\n\n    var eventHandlers = this.getEventHandlers(eventName, options);\n    ensureCanMutateNextEventHandlers(eventHandlers);\n\n    if (eventHandlers.nextHandlers.length === 0) {\n      eventHandlers.handleEvent = this.handleEvent.bind(this, eventName, options);\n      this.target.addEventListener(eventName, eventHandlers.handleEvent, options);\n    }\n\n    eventHandlers.nextHandlers.push(listener);\n    var isSubscribed = true;\n\n    var unsubscribe = function () {\n      function unsubscribe() {\n        if (!isSubscribed) {\n          return;\n        }\n\n        isSubscribed = false;\n        ensureCanMutateNextEventHandlers(eventHandlers);\n        var index = eventHandlers.nextHandlers.indexOf(listener);\n        eventHandlers.nextHandlers.splice(index, 1);\n\n        if (eventHandlers.nextHandlers.length === 0) {\n          // All event handlers have been removed, so we want to remove the event\n          // listener from the target node.\n          if (_this.target) {\n            // There can be a race condition where the target may no longer exist\n            // when this function is called, e.g. when a React component is\n            // unmounting. Guarding against this prevents the following error:\n            //\n            //   Cannot read property 'removeEventListener' of undefined\n            _this.target.removeEventListener(eventName, eventHandlers.handleEvent, options);\n          }\n\n          eventHandlers.handleEvent = undefined;\n        }\n      }\n\n      return unsubscribe;\n    }();\n\n    return unsubscribe;\n  }\n\n  return add;\n}();\n\nvar EVENT_HANDLERS_KEY = '__consolidated_events_handlers__'; // eslint-disable-next-line import/prefer-default-export\n\nfunction addEventListener(target, eventName, listener, options) {\n  if (!target[EVENT_HANDLERS_KEY]) {\n    // eslint-disable-next-line no-param-reassign\n    target[EVENT_HANDLERS_KEY] = new TargetEventHandlers(target);\n  }\n\n  var normalizedEventOptions = normalizeEventOptions(options);\n  return target[EVENT_HANDLERS_KEY].add(eventName, listener, normalizedEventOptions);\n}\n\nexport { addEventListener };","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object' && typeof arg.copy === 'function' && typeof arg.fill === 'function' && typeof arg.readUInt8 === 'function';\n};","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport isElectron from './is-electron';\nexport default function isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _GL_PARAMETER_DEFAULT, _GL_PARAMETER_SETTERS, _GL_PARAMETER_GETTERS; // Provides a unified API for getting and setting any WebGL parameter\n// Also knows default values of all parameters, enabling fast cache initialization\n// Provides base functionality for the state caching.\n\n\nimport { isWebGL2 } from '../webgl-utils';\nimport assert from '../utils/assert'; // DEFAULT SETTINGS - FOR FAST CACHE INITIALIZATION AND CONTEXT RESETS\n\nexport var GL_PARAMETER_DEFAULTS = (_GL_PARAMETER_DEFAULT = {}, _defineProperty(_GL_PARAMETER_DEFAULT, 3042, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32773, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 32777, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 34877, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 32969, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32968, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32971, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32970, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3106, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 3107, [true, true, true, true]), _defineProperty(_GL_PARAMETER_DEFAULT, 2884, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2885, 1029), _defineProperty(_GL_PARAMETER_DEFAULT, 2929, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2931, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 2932, 513), _defineProperty(_GL_PARAMETER_DEFAULT, 2928, new Float32Array([0, 1])), _defineProperty(_GL_PARAMETER_DEFAULT, 2930, true), _defineProperty(_GL_PARAMETER_DEFAULT, 3024, true), _defineProperty(_GL_PARAMETER_DEFAULT, 36006, null), _defineProperty(_GL_PARAMETER_DEFAULT, 2886, 2305), _defineProperty(_GL_PARAMETER_DEFAULT, 33170, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 2849, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32823, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32824, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 10752, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32938, 1.0), _defineProperty(_GL_PARAMETER_DEFAULT, 32939, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3089, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3088, new Int32Array([0, 0, 1024, 1024])), _defineProperty(_GL_PARAMETER_DEFAULT, 2960, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2961, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2968, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 36005, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2962, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 2967, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2963, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 34816, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 36003, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 36004, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2964, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2965, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2966, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34817, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34818, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34819, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2978, new Int32Array([0, 0, 1024, 1024])), _defineProperty(_GL_PARAMETER_DEFAULT, 3333, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 3317, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 37440, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37441, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37443, 37444), _defineProperty(_GL_PARAMETER_DEFAULT, 35723, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 36010, null), _defineProperty(_GL_PARAMETER_DEFAULT, 35977, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3330, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3332, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3331, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3314, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32878, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3316, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3315, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32877, 0), _GL_PARAMETER_DEFAULT); // SETTER TABLES - ENABLES SETTING ANY PARAMETER WITH A COMMON API\n\nvar enable = function enable(gl, value, key) {\n  return value ? gl.enable(key) : gl.disable(key);\n};\n\nvar hint = function hint(gl, value, key) {\n  return gl.hint(key, value);\n};\n\nvar pixelStorei = function pixelStorei(gl, value, key) {\n  return gl.pixelStorei(key, value);\n};\n\nvar drawFramebuffer = function drawFramebuffer(gl, value) {\n  var target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nvar readFramebuffer = function readFramebuffer(gl, value) {\n  return gl.bindFramebuffer(36008, value);\n}; // Map from WebGL parameter names to corresponding WebGL setter functions\n// WegGL constants are read by parameter names, but set by function names\n// NOTE: When value type is a string, it will be handled by 'COMPOSITE_GL_PARAMETER_SETTERS'\n\n\nexport var GL_PARAMETER_SETTERS = (_GL_PARAMETER_SETTERS = {}, _defineProperty(_GL_PARAMETER_SETTERS, 3042, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32773, function (gl, value) {\n  return gl.blendColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32777, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 34877, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 32969, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32968, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32971, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32970, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 3106, function (gl, value) {\n  return gl.clearColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3107, function (gl, value) {\n  return gl.colorMask.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2884, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2885, function (gl, value) {\n  return gl.cullFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2929, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2931, function (gl, value) {\n  return gl.clearDepth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2932, function (gl, value) {\n  return gl.depthFunc(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2928, function (gl, value) {\n  return gl.depthRange.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2930, function (gl, value) {\n  return gl.depthMask(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3024, enable), _defineProperty(_GL_PARAMETER_SETTERS, 35723, hint), _defineProperty(_GL_PARAMETER_SETTERS, 36006, drawFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 2886, function (gl, value) {\n  return gl.frontFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 33170, hint), _defineProperty(_GL_PARAMETER_SETTERS, 2849, function (gl, value) {\n  return gl.lineWidth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32823, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32824, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 10752, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 35977, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32938, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 32939, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 3089, enable), _defineProperty(_GL_PARAMETER_SETTERS, 3088, function (gl, value) {\n  return gl.scissor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2960, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2961, function (gl, value) {\n  return gl.clearStencil(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2968, function (gl, value) {\n  return gl.stencilMaskSeparate(1028, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 36005, function (gl, value) {\n  return gl.stencilMaskSeparate(1029, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2962, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2967, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2963, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34816, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36003, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36004, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2964, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2965, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2966, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34817, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34818, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34819, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2978, function (gl, value) {\n  return gl.viewport.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3333, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3317, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37440, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37441, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37443, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3330, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3332, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3331, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 36010, readFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 3314, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32878, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3316, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3315, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32877, pixelStorei), _GL_PARAMETER_SETTERS); // COMPOSITE_WEBGL_PARAMETER_\n\nvar COMPOSITE_GL_PARAMETER_SETTERS = {\n  blendEquation: function blendEquation(gl, values) {\n    return gl.blendEquationSeparate(values[32777], values[34877]);\n  },\n  blendFunc: function blendFunc(gl, values) {\n    return gl.blendFuncSeparate(values[32969], values[32968], values[32971], values[32970]);\n  },\n  polygonOffset: function polygonOffset(gl, values) {\n    return gl.polygonOffset(values[32824], values[10752]);\n  },\n  sampleCoverage: function sampleCoverage(gl, values) {\n    return gl.sampleCoverage(values[32938], values[32939]);\n  },\n  stencilFuncFront: function stencilFuncFront(gl, values) {\n    return gl.stencilFuncSeparate(1028, values[2962], values[2967], values[2963]);\n  },\n  stencilFuncBack: function stencilFuncBack(gl, values) {\n    return gl.stencilFuncSeparate(1029, values[34816], values[36003], values[36004]);\n  },\n  stencilOpFront: function stencilOpFront(gl, values) {\n    return gl.stencilOpSeparate(1028, values[2964], values[2965], values[2966]);\n  },\n  stencilOpBack: function stencilOpBack(gl, values) {\n    return gl.stencilOpSeparate(1029, values[34817], values[34818], values[34819]);\n  }\n}; // GETTER TABLE - FOR READING OUT AN ENTIRE CONTEXT\n\nvar isEnabled = function isEnabled(gl, key) {\n  return gl.isEnabled(key);\n}; // Exceptions for any keys that cannot be queried by gl.getParameters\n\n\nexport var GL_PARAMETER_GETTERS = (_GL_PARAMETER_GETTERS = {}, _defineProperty(_GL_PARAMETER_GETTERS, 3042, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2884, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2929, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3024, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32823, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32926, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32928, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3089, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2960, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 35977, isEnabled), _GL_PARAMETER_GETTERS); // HELPER METHODS\n\nvar deepArrayEqual = function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  var isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  var isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (var i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}; // PUBLIC METHODS\n// Sets any single GL parameter regardless of function (gl.getParameter/gl.isEnabled...)\n// Returns the previous value\n// Note: limited to parameter values\n\n\nexport function setParameter(gl, key, value) {\n  var getter = GL_PARAMETER_GETTERS[key];\n  var prevValue = getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n  var setter = GL_PARAMETER_SETTERS[key];\n  assert(typeof setter === 'function');\n  setter(gl, value, Number(key));\n  return prevValue;\n} // Sets any GL parameter regardless of function (gl.blendMode, ...)\n// Note: requires a `cache` object to be set on the context (gl.state.cache)\n// This object is used to fill in any missing values for composite setter functions\n\nexport function setParameters(gl, values) {\n  var compositeSetters = {}; // HANDLE PRIMITIVE SETTERS (and make note of any composite setters)\n\n  for (var key in values) {\n    var glConstant = Number(key);\n    var setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      // Composite setters should only be called once, so save them\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        // if (gl[glConstant] !== undefined) {\n        // TODO - added above check since this is being called on WebGL2 values in WebGL1...\n        // TODO - deep equal on values? only call setter if value has changed?\n        // NOTE - the setter will automatically update this.state\n        setter(gl, values[key], glConstant);\n      }\n    }\n  } // HANDLE COMPOSITE SETTERS\n  // NOTE: any non-provided values needed by composite setters are filled in from state cache\n  // The cache parameter is automatically retrieved from the context\n  // This depends on `trackContextState`, which is technically a \"circular\" dependency.\n  // But it is too inconvenient to always require a cache parameter here.\n  // This is the ONLY external dependency in this module/\n\n\n  var cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    var mergedValues = Object.assign({}, cache, values);\n\n    for (var _key in compositeSetters) {\n      // TODO - avoid calling composite setters if values have not changed.\n      var compositeSetter = COMPOSITE_GL_PARAMETER_SETTERS[_key]; // Note - if `trackContextState` has been called,\n      // the setter will automatically update this.state.cache\n\n      compositeSetter(gl, mergedValues);\n    }\n  } // Add a log for the else case?\n\n} // Queries any single GL parameter regardless of function (gl.getParameter/gl.isEnabled...)\n\nexport function getParameter(gl, key) {\n  var getter = GL_PARAMETER_GETTERS[key];\n  return getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n} // Copies the state from a context (gl.getParameter should not be overriden)\n// Reads the entire WebGL state from a context\n// Caveat: This generates a huge amount of synchronous driver roundtrips and should be\n// considered a very slow operation, to be used only if/when a context already manipulated\n// by external code needs to be synchronized for the first time\n// @return {Object} - a newly created map, with values keyed by GL parameters\n\nexport function getParameters(gl, parameters) {\n  // default to querying all parameters\n  parameters = parameters || GL_PARAMETER_DEFAULTS; // support both arrays of parameters and objects (keys represent parameters)\n\n  var parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  var state = {};\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = parameterKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var key = _step.value;\n      state[key] = getParameter(gl, key);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return state;\n}\nexport function getDefaultParameters(gl) {\n  // TODO - Query GL.VIEWPORT and GL.SCISSOR_BOX since these are dynamic\n  return Object.assign({}, GL_PARAMETER_DEFAULTS, {// TODO: For viewport and scissor default values are set at the time of\n    // context creation based on canvas size, we can query them here but it will\n    // not match with what we have in GL_PARAMETER_DEFAULTS table, we should revisit.\n    // [GL.VIEWPORT]: gl.constructor.prototype.getParameter.call(gl, GL.VIEWPORT),\n    // [GL.SCISSOR_BOX]: gl.constructor.prototype.getParameter.call(gl, GL.SCISSOR_BOX)\n  });\n} // Reset all parameters to a pure context state\n\nexport function resetParameters(gl) {\n  setParameters(gl, getDefaultParameters(gl));\n} // Get all parameters that have been modified from a pure context state\n\nexport function getModifiedParameters(gl) {\n  var values = getParameters(GL_PARAMETER_DEFAULTS);\n  var modified = {};\n\n  for (var key in GL_PARAMETER_DEFAULTS) {\n    if (!deepArrayEqual(values[key], GL_PARAMETER_DEFAULTS[key])) {\n      modified[key] = values[key];\n    }\n  }\n\n  return modified;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _TEXTURE_FORMATS;\n/* eslint-disable no-inline-comments, max-len */\n\n\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { withParameters } from '../webgl-context/context-state';\nimport { WebGLBuffer } from '../webgl-utils';\nimport { isWebGL2, assertWebGL2Context } from '../webgl-utils';\nimport { log, uid, isPowerOfTwo } from '../utils';\nimport assert from '../utils/assert'; // Supported min filters for NPOT texture.\n\nvar NPOT_MIN_FILTERS = [9729, 9728]; // const S3TC = 'WEBGL_compressed_texture_s3tc';\n// const PVRTC = 'WEBGL_compressed_texture_pvrtc';\n// const ES3 = 'WEBGL_compressed_texture_es3';\n// const ETC1 = 'WEBGL_compressed_texture_etc1';\n// const SRGB = 'EXT_sRGB';\n// const DEPTH = 'WEBGL_depth_texture';\n// Legal combinations for internalFormat, format and type\n\nexport var TEXTURE_FORMATS = (_TEXTURE_FORMATS = {}, _defineProperty(_TEXTURE_FORMATS, 6407, {\n  dataFormat: 6407,\n  types: [5121, 33635]\n}), _defineProperty(_TEXTURE_FORMATS, 6408, {\n  dataFormat: 6408,\n  types: [5121, 32819, 32820]\n}), _defineProperty(_TEXTURE_FORMATS, 6406, {\n  dataFormat: 6406,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6409, {\n  dataFormat: 6409,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6410, {\n  dataFormat: 6410,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 33326, {\n  dataFormat: 6403,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 33328, {\n  dataFormat: 33319,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34837, {\n  dataFormat: 6407,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34836, {\n  dataFormat: 6408,\n  types: [5126],\n  gl2: true // [GL.DEPTH_COMPONENT]: {types: [GL.UNSIGNED_SHORT, GL.UNSIGNED_INT, GL.UNSIGNED_INT_24_8], gl1: DEPTH},\n  // [GL.DEPTH_STENCIL]: {gl1: DEPTH},\n  // Sized texture format - more performance\n  // R\n  // [GL.R8]: {dataFormat: GL.RED, types: [GL.UNSIGNED_BYTE], gl2: true},\n  // [GL.R16F]: {dataFormat: GL.RED, types: [GL.HALF_FLOAT, GL.FLOAT], gl2: true},\n  // [GL.R8UI]: {dataFormat: GL.RED_INTEGER, types: [GL.UNSIGNED_BYTE], gl2: true},\n  // // RG\n  // [GL.RG8]: {dataFormat: GL.RG, types: [GL.UNSIGNED_BYTE], gl2: true},\n  // [GL.RG16F]: {dataFormat: GL.RG, types: [GL.HALF_FLOAT, GL.FLOAT], gl2: true},\n  // [GL.RG8UI]: {dataFormat: GL.RG_INTEGER, types: [GL.UNSIGNED_BYTE], gl2: true},\n  // // RGB\n  // [GL.RGB8]: {dataFormat: GL.RGB, types: [GL.UNSIGNED_BYTE], gl2: true, gl1: SRGB},\n  // [GL.SRGB8]: {dataFormat: GL.RGB, types: [GL.UNSIGNED_BYTE], gl2: true, gl1: SRGB},\n  // [GL.RGB565]: {dataFormat: GL.RGB, types: [GL.UNSIGNED_BYTE, GL.UNSIGNED_SHORT_5_6_5], gl2: true},\n  // [GL.R11F_G11F_B10F]: {dataFormat: GL.RGB, types: [GL.UNSIGNED_INT_10F_11F_11F_REV, GL.HALF_FLOAT, GL.FLOAT], gl2: true},\n  // [GL.RGB9_E5]: {dataFormat: GL.RGB, types: [GL.HALF_FLOAT, GL.FLOAT], gl2: true, gl1: 'WEBGL_color_buffer_half_float'},\n  // [GL.RGB16F]: {dataFormat: GL.RGB, types: [GL.HALF_FLOAT, GL.FLOAT], gl2: true, gl1: 'WEBGL_color_buffer_float'},\n  // [GL.RGB8UI]: {dataFormat: GL.RGB_INTEGER, types: [GL.UNSIGNED_BYTE], gl2: true},\n  // // RGBA\n  // [GL.RGBA8]: {dataFormat: GL.RGBA, types: [GL.UNSIGNED_BYTE], gl2: true, gl1: SRGB},\n  // [GL.SRGB8_ALPHA8]: {dataFormat: GL.RGBA, types: [GL.UNSIGNED_BYTE], gl2: true, gl1: SRGB},\n  // [GL.RGB5_A1]: {dataFormat: GL.RGBA, types: [GL.UNSIGNED_BYTE, GL.UNSIGNED_SHORT_5_5_5_1], gl2: true},\n  // [GL.RGBA4]: {dataFormat: GL.RGBA, types: [GL.UNSIGNED_BYTE, GL.UNSIGNED_SHORT_4_4_4_4], gl2: true},\n  // [GL.RGBA16F]: {dataFormat: GL.RGBA, types: [GL.HALF_FLOAT, GL.FLOAT], gl2: true},\n  // [GL.RGBA8UI]: {dataFormat: GL.RGBA_INTEGER, types: [GL.UNSIGNED_BYTE], gl2: true}\n  // Compressed formats\n  // WEBGL_compressed_texture_s3tc\n  // [GL.COMPRESSED_RGB_S3TC_DXT1_EXT]: {compressed: true, gl1: S3TC},\n  // [GL.COMPRESSED_RGBA_S3TC_DXT1_EXT]: {compressed: true, gl1: S3TC},\n  // [GL.COMPRESSED_RGBA_S3TC_DXT3_EXT]: {compressed: true, gl1: S3TC},\n  // [GL.COMPRESSED_RGBA_S3TC_DXT5_EXT]: {compressed: true, gl1: S3TC},\n  // WEBGL_compressed_texture_es3\n  // [GL.COMPRESSED_R11_EAC]: {compressed: true, gl1: ES3}, // RED\n  // [GL.COMPRESSED_SIGNED_R11_EAC]: {compressed: true, gl1: ES3}, // RED\n  // [GL.COMPRESSED_RG11_EAC]: {compressed: true, gl1: ES3}, // RG\n  // [GL.COMPRESSED_SIGNED_RG11_EAC]: {compressed: true, gl1: ES3}, // RG\n  // [GL.COMPRESSED_RGB8_ETC2]: {compressed: true, gl1: ES3}, // RGB\n  // [GL.COMPRESSED_RGBA8_ETC2_EAC]: {compressed: true, gl1: ES3}, // RBG\n  // [GL.COMPRESSED_SRGB8_ETC2]: {compressed: true, gl1: ES3}, // RGB\n  // [GL.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]: {compressed: true, gl1: ES3}, // RGBA\n  // [GL.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]: {compressed: true, gl1: ES3}, // RGBA\n  // [GL.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]: {compressed: true, gl1: ES3}, // RGBA\n\n  /* WebGL2 guaranteed availability compressed formats?\n  COMPRESSED_R11_EAC RED\n  COMPRESSED_SIGNED_R11_EAC RED\n  COMPRESSED_RG11_EAC RG\n  COMPRESSED_SIGNED_RG11_EAC RG\n  COMPRESSED_RGB8_ETC2 RGB\n  COMPRESSED_SRGB8_ETC2 RGB\n  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 RGBA\n  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 RGBA\n  COMPRESSED_RGBA8_ETC2_EAC RGBA\n  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC\n  */\n  // WEBGL_compressed_texture_pvrtc\n  // [GL.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]: {compressed: true, gl1: PVRTC},\n  // [GL.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]: {compressed: true, gl1: PVRTC},\n  // [GL.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]: {compressed: true, gl1: PVRTC},\n  // [GL.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]: {compressed: true, gl1: PVRTC},\n  // WEBGL_compressed_texture_etc1\n  // [GL.COMPRESSED_RGB_ETC1_WEBGL]: {compressed: true, gl1: ETC1},\n  // WEBGL_compressed_texture_atc\n  // [GL.COMPRESSED_RGB_ATC_WEBGL]: {compressed: true, gl1: ETC1},\n  // [GL.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]: {compressed: true, gl1: ETC1},\n  // [GL.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]: {compressed: true, gl1: ETC1}\n\n}), _TEXTURE_FORMATS);\n\nfunction isFormatSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    // No info - always supported\n    return true;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\n\nfunction isLinearFilteringSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    // Both WebGL1 and WebGL2?\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n    // Not in WebGL2?\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n\nvar Texture = /*#__PURE__*/function (_Resource) {\n  _inherits(Texture, _Resource);\n\n  _createClass(Texture, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          format = _ref.format,\n          linearFiltering = _ref.linearFiltering;\n\n      var supported = true;\n\n      if (format) {\n        supported = supported && isFormatSupported(gl, format);\n        supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n      }\n\n      return supported;\n    } // target cannot be modified by bind:\n    // textures are special because when you first bind them to a target,\n    // they get special information. When you first bind a texture as a\n    // GL_TEXTURE_2D, you are actually setting special state in the texture.\n    // You are saying that this texture is a 2D texture.\n    // And it will always be a 2D texture; this state cannot be changed ever.\n    // If you have a texture that was first bound as a GL_TEXTURE_2D,\n    // you must always bind it as a GL_TEXTURE_2D;\n    // attempting to bind it as GL_TEXTURE_1D will give rise to an error\n    // (while run-time).\n\n  }]);\n\n  function Texture(gl, opts) {\n    var _this;\n\n    _classCallCheck(this, Texture);\n\n    var _opts$id = opts.id,\n        id = _opts$id === void 0 ? uid('texture') : _opts$id,\n        handle = opts.handle,\n        target = opts.target;\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture).call(this, gl, {\n      id: id,\n      handle: handle\n    }));\n    _this.target = target;\n    _this.hasFloatTexture = gl.getExtension('OES_texture_float');\n    _this.textureUnit = undefined;\n    return _this;\n  }\n\n  _createClass(Texture, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n    }\n    /* eslint-disable max-len, max-statements */\n\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var data = opts.data;\n      var _opts$pixels = opts.pixels,\n          pixels = _opts$pixels === void 0 ? null : _opts$pixels,\n          _opts$format = opts.format,\n          format = _opts$format === void 0 ? 6408 : _opts$format,\n          _opts$type = opts.type,\n          type = _opts$type === void 0 ? 5121 : _opts$type,\n          _opts$border = opts.border,\n          border = _opts$border === void 0 ? 0 : _opts$border,\n          _opts$recreate = opts.recreate,\n          recreate = _opts$recreate === void 0 ? false : _opts$recreate,\n          _opts$parameters = opts.parameters,\n          parameters = _opts$parameters === void 0 ? {} : _opts$parameters,\n          _opts$pixelStore = opts.pixelStore,\n          pixelStore = _opts$pixelStore === void 0 ? {} : _opts$pixelStore,\n          _opts$textureUnit = opts.textureUnit,\n          textureUnit = _opts$textureUnit === void 0 ? undefined : _opts$textureUnit,\n          _opts$unpackFlipY = opts.unpackFlipY,\n          unpackFlipY = _opts$unpackFlipY === void 0 ? true : _opts$unpackFlipY;\n      var _opts$mipmaps = opts.mipmaps,\n          mipmaps = _opts$mipmaps === void 0 ? true : _opts$mipmaps; // pixels variable is for API compatibility purpose\n\n      if (!data) {\n        // TODO - This looks backwards? Commenting out for now until we decide\n        // which prop to use\n        // log.deprecated('data', 'pixels')();\n        data = pixels;\n      }\n\n      var width = opts.width,\n          height = opts.height,\n          dataFormat = opts.dataFormat; // Deduce width and height\n\n      var _this$_deduceParamete = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: false,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      width = _this$_deduceParamete.width;\n      height = _this$_deduceParamete.height;\n      dataFormat = _this$_deduceParamete.dataFormat; // Store opts for accessors\n\n      this.width = width;\n      this.height = height;\n      this.format = format;\n      this.type = type;\n      this.dataFormat = dataFormat;\n      this.border = border;\n      this.textureUnit = textureUnit;\n\n      if (Number.isFinite(this.textureUnit)) {\n        this.gl.activeTexture(33984 + this.textureUnit);\n        this.gl.bindTexture(this.target, this.handle);\n      } // Note: luma.gl defaults to GL.UNPACK_FLIP_Y_WEBGL = true;\n      // TODO - compare v4 and v3\n\n\n      var DEFAULT_TEXTURE_SETTINGS = _defineProperty({}, 37440, unpackFlipY);\n\n      var glSettings = Object.assign({}, DEFAULT_TEXTURE_SETTINGS, pixelStore);\n\n      if (this._isNPOT() && mipmaps) {\n        log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n        mipmaps = false;\n\n        this._updateForNPOT(parameters);\n      }\n\n      this.mipmaps = mipmaps;\n      this.setImageData({\n        data: data,\n        width: width,\n        height: height,\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        border: border,\n        mipmaps: mipmaps,\n        parameters: glSettings\n      });\n\n      if (mipmaps) {\n        this.generateMipmap();\n      } // Set texture sampler parameters\n\n\n      this.setParameters(parameters); // TODO - Store data to enable auto recreate on context loss\n\n      if (recreate) {\n        this.data = data;\n      }\n    } // If size has changed, reinitializes with current format\n    // note clears image and mipmaps\n\n  }, {\n    key: \"resize\",\n    value: function resize(_ref2) {\n      var width = _ref2.width,\n          height = _ref2.height;\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          type: this.type,\n          dataFormat: this.dataFormat,\n          border: this.border,\n          mipmaps: false\n        });\n      }\n\n      return this;\n    } // Call to regenerate mipmaps after modifying texture(s)\n\n  }, {\n    key: \"generateMipmap\",\n    value: function generateMipmap() {\n      var _this2 = this;\n\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, params, function () {\n        _this2.gl.generateMipmap(_this2.target);\n      });\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n    /*\n     * Allocates storage\n     * @param {*} pixels -\n     *  null - create empty texture of specified format\n     *  Typed array - init from image data in typed array\n     *  Buffer|WebGLBuffer - (WEBGL2) init from image data in WebGLBuffer\n     *  HTMLImageElement|Image - Inits with content of image. Auto width/height\n     *  HTMLCanvasElement - Inits with contents of canvas. Auto width/height\n     *  HTMLVideoElement - Creates video texture. Auto width/height\n     *\n     * @param {GLint} width -\n     * @param {GLint} height -\n     * @param {GLint} mipMapLevel -\n     * @param {GLenum} format - format of image data.\n     * @param {GLenum} type\n     *  - format of array (autodetect from type) or\n     *  - (WEBGL2) format of buffer\n     * @param {Number} offset - (WEBGL2) offset from start of buffer\n     * @param {GLint} border - must be 0.\n     * @parameters - temporary settings to be applied, can be used to supply pixel store settings.\n     */\n\n    /* eslint-disable max-len, max-statements, complexity */\n\n  }, {\n    key: \"setImageData\",\n    value: function setImageData(_ref3) {\n      var _ref3$target = _ref3.target,\n          target = _ref3$target === void 0 ? this.target : _ref3$target,\n          _ref3$pixels = _ref3.pixels,\n          pixels = _ref3$pixels === void 0 ? null : _ref3$pixels,\n          _ref3$data = _ref3.data,\n          data = _ref3$data === void 0 ? null : _ref3$data,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? this.width : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? this.height : _ref3$height,\n          _ref3$level = _ref3.level,\n          level = _ref3$level === void 0 ? 0 : _ref3$level,\n          _ref3$format = _ref3.format,\n          format = _ref3$format === void 0 ? this.format : _ref3$format,\n          _ref3$type = _ref3.type,\n          type = _ref3$type === void 0 ? this.type : _ref3$type,\n          _ref3$dataFormat = _ref3.dataFormat,\n          dataFormat = _ref3$dataFormat === void 0 ? this.dataFormat : _ref3$dataFormat,\n          _ref3$offset = _ref3.offset,\n          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n          _ref3$border = _ref3.border,\n          border = _ref3$border === void 0 ? this.border : _ref3$border,\n          _ref3$compressed = _ref3.compressed,\n          compressed = _ref3$compressed === void 0 ? false : _ref3$compressed,\n          _ref3$parameters = _ref3.parameters,\n          parameters = _ref3$parameters === void 0 ? {} : _ref3$parameters; // pixels variable is  for API compatibility purpose\n\n      if (!data) {\n        data = pixels;\n      }\n\n      var _this$_deduceParamete2 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete2.type;\n      dataFormat = _this$_deduceParamete2.dataFormat;\n      compressed = _this$_deduceParamete2.compressed;\n      width = _this$_deduceParamete2.width;\n      height = _this$_deduceParamete2.height;\n      var gl = this.gl;\n      gl.bindTexture(this.target, this.handle);\n      var dataType = null;\n\n      var _this$_getDataType = this._getDataType({\n        data: data,\n        compressed: compressed\n      });\n\n      data = _this$_getDataType.data;\n      dataType = _this$_getDataType.dataType;\n      withParameters(this.gl, parameters, function () {\n        switch (dataType) {\n          case 'null':\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            break;\n\n          case 'typed-array':\n            // Looks like this assert is not necessary, as offset is ignored under WebGL1\n            // assert((offset === 0 || isWebGL2(gl)), 'offset supported in WebGL2 only');\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n            break;\n\n          case 'buffer':\n            // WebGL2 enables creating textures directly from a WebGL buffer\n            assertWebGL2Context(gl);\n            gl.bindBuffer(35052, data.handle || data);\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n            gl.bindBuffer(35052, null);\n            break;\n\n          case 'browser-object':\n            if (isWebGL2(gl)) {\n              gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            } else {\n              gl.texImage2D(target, level, format, dataFormat, type, data);\n            }\n\n            break;\n\n          case 'compressed':\n            gl.compressedTexImage2D(target, level, format, width, height, border, data);\n            break;\n\n          default:\n            assert(false, 'Unknown image data type');\n        }\n      });\n    }\n    /* eslint-enable max-len, max-statements, complexity */\n\n    /**\n     * Redefines an area of an existing texture\n     * Note: does not allocate storage\n     */\n\n    /*\n     * Redefines an area of an existing texture\n     * @param {*} pixels, data -\n     *  null - create empty texture of specified format\n     *  Typed array - init from image data in typed array\n     *  Buffer|WebGLBuffer - (WEBGL2) init from image data in WebGLBuffer\n     *  HTMLImageElement|Image - Inits with content of image. Auto width/height\n     *  HTMLCanvasElement - Inits with contents of canvas. Auto width/height\n     *  HTMLVideoElement - Creates video texture. Auto width/height\n     *\n     * @param {GLint} x - xOffset from where texture to be updated\n     * @param {GLint} y - yOffset from where texture to be updated\n     * @param {GLint} width - width of the sub image to be updated\n     * @param {GLint} height - height of the sub image to be updated\n     * @param {GLint} level - mip level to be updated\n     * @param {GLenum} format - internal format of image data.\n     * @param {GLenum} type\n     *  - format of array (autodetect from type) or\n     *  - (WEBGL2) format of buffer or ArrayBufferView\n     * @param {GLenum} dataFormat - format of image data.\n     * @param {Number} offset - (WEBGL2) offset from start of buffer\n     * @param {GLint} border - must be 0.\n     * @parameters - temporary settings to be applied, can be used to supply pixel store settings.\n     */\n\n  }, {\n    key: \"setSubImageData\",\n    value: function setSubImageData(_ref4) {\n      var _this3 = this;\n\n      var _ref4$target = _ref4.target,\n          target = _ref4$target === void 0 ? this.target : _ref4$target,\n          _ref4$pixels = _ref4.pixels,\n          pixels = _ref4$pixels === void 0 ? null : _ref4$pixels,\n          _ref4$data = _ref4.data,\n          data = _ref4$data === void 0 ? null : _ref4$data,\n          _ref4$x = _ref4.x,\n          x = _ref4$x === void 0 ? 0 : _ref4$x,\n          _ref4$y = _ref4.y,\n          y = _ref4$y === void 0 ? 0 : _ref4$y,\n          _ref4$width = _ref4.width,\n          width = _ref4$width === void 0 ? this.width : _ref4$width,\n          _ref4$height = _ref4.height,\n          height = _ref4$height === void 0 ? this.height : _ref4$height,\n          _ref4$level = _ref4.level,\n          level = _ref4$level === void 0 ? 0 : _ref4$level,\n          _ref4$format = _ref4.format,\n          format = _ref4$format === void 0 ? this.format : _ref4$format,\n          _ref4$type = _ref4.type,\n          type = _ref4$type === void 0 ? this.type : _ref4$type,\n          _ref4$dataFormat = _ref4.dataFormat,\n          dataFormat = _ref4$dataFormat === void 0 ? this.dataFormat : _ref4$dataFormat,\n          _ref4$compressed = _ref4.compressed,\n          compressed = _ref4$compressed === void 0 ? false : _ref4$compressed,\n          _ref4$offset = _ref4.offset,\n          offset = _ref4$offset === void 0 ? 0 : _ref4$offset,\n          _ref4$border = _ref4.border,\n          border = _ref4$border === void 0 ? this.border : _ref4$border,\n          _ref4$parameters = _ref4.parameters,\n          parameters = _ref4$parameters === void 0 ? {} : _ref4$parameters;\n\n      var _this$_deduceParamete3 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete3.type;\n      dataFormat = _this$_deduceParamete3.dataFormat;\n      compressed = _this$_deduceParamete3.compressed;\n      width = _this$_deduceParamete3.width;\n      height = _this$_deduceParamete3.height; // pixels variable is  for API compatibility purpose\n\n      if (!data) {\n        data = pixels;\n      } // Support ndarrays\n\n\n      if (data && data.data) {\n        var ndarray = data;\n        data = ndarray.data;\n        width = ndarray.shape[0];\n        height = ndarray.shape[1];\n      } // Support buffers\n\n\n      if (data instanceof Buffer) {\n        data = data.handle;\n      }\n\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, parameters, function () {\n        // TODO - x,y parameters\n        if (compressed) {\n          _this3.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n        } else if (data === null) {\n          _this3.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n        } else if (ArrayBuffer.isView(data)) {\n          _this3.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n        } else if (data instanceof WebGLBuffer) {\n          // WebGL2 allows us to create texture directly from a WebGL buffer\n          assertWebGL2Context(_this3.gl); // This texImage2D signature uses currently bound GL.PIXEL_UNPACK_BUFFER\n\n          _this3.gl.bindBuffer(35052, data);\n\n          _this3.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n\n          _this3.gl.bindBuffer(35052, null);\n        } else if (isWebGL2(_this3.gl)) {\n          // Assume data is a browser supported object (ImageData, Canvas, ...)\n          _this3.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n        } else {\n          _this3.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n        }\n      });\n      this.gl.bindTexture(this.target, null);\n    }\n    /* eslint-enable max-len, max-statements, complexity */\n\n    /**\n     * Defines a two-dimensional texture image or cube-map texture image with\n     * pixels from the current framebuffer (rather than from client memory).\n     * (gl.copyTexImage2D wrapper)\n     *\n     * Note that binding a texture into a Framebuffer's color buffer and\n     * rendering can be faster.\n     */\n\n  }, {\n    key: \"copyFramebuffer\",\n    value: function copyFramebuffer(_ref5) {\n      var _ref5$target = _ref5.target,\n          target = _ref5$target === void 0 ? this.target : _ref5$target,\n          framebuffer = _ref5.framebuffer,\n          _ref5$x = _ref5.x,\n          x = _ref5$x === void 0 ? 0 : _ref5$x,\n          _ref5$y = _ref5.y,\n          y = _ref5$y === void 0 ? 0 : _ref5$y,\n          width = _ref5.width,\n          height = _ref5.height,\n          _ref5$level = _ref5.level,\n          level = _ref5$level === void 0 ? 0 : _ref5$level,\n          _ref5$internalFormat = _ref5.internalFormat,\n          internalFormat = _ref5$internalFormat === void 0 ? 6408 : _ref5$internalFormat,\n          _ref5$border = _ref5.border,\n          border = _ref5$border === void 0 ? 0 : _ref5$border;\n\n      if (framebuffer) {\n        framebuffer.bind();\n      } // target\n\n\n      this.bind(0);\n      this.gl.copyTexImage2D(this.target, level, internalFormat, x, y, width, height, border);\n      this.unbind();\n\n      if (framebuffer) {\n        framebuffer.unbind();\n      }\n    }\n  }, {\n    key: \"getActiveUnit\",\n    value: function getActiveUnit() {\n      return this.gl.getParameter(34016) - 33984;\n    } // target cannot be modified by bind:\n    // textures are special because when you first bind them to a target,\n    // they get special information. When you first bind a texture as a\n    // GL_TEXTURE_2D, you are actually setting special state in the texture.\n    // You are saying that this texture is a 2D texture.\n    // And it will always be a 2D texture; this state cannot be changed ever.\n    // If you have a texture that was first bound as a GL_TEXTURE_2D,\n    // you must always bind it as a GL_TEXTURE_2D;\n    // attempting to bind it as GL_TEXTURE_1D will give rise to an error\n    // (while run-time).\n\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n\n      if (textureUnit === undefined) {\n        throw new Error('Texture.bind: must specify texture unit');\n      }\n\n      this.textureUnit = textureUnit;\n      this.gl.activeTexture(33984 + textureUnit);\n      this.gl.bindTexture(this.target, this.handle);\n      return textureUnit;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      if (this.textureUnit === undefined) {\n        throw new Error('Texture.unbind: texture unit not specified');\n      }\n\n      this.gl.activeTexture(33984 + this.textureUnit);\n      this.gl.bindTexture(this.target, null);\n      return this.textureUnit;\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_getDataType\",\n    value: function _getDataType(_ref6) {\n      var data = _ref6.data,\n          _ref6$compressed = _ref6.compressed,\n          compressed = _ref6$compressed === void 0 ? false : _ref6$compressed;\n\n      if (compressed) {\n        return {\n          data: data,\n          dataType: 'compressed'\n        };\n      }\n\n      if (data === null) {\n        return {\n          data: data,\n          dataType: 'null'\n        };\n      }\n\n      if (ArrayBuffer.isView(data)) {\n        return {\n          data: data,\n          dataType: 'typed-array'\n        };\n      }\n\n      if (data instanceof Buffer) {\n        return {\n          data: data.handle,\n          dataType: 'buffer'\n        };\n      }\n\n      if (data instanceof WebGLBuffer) {\n        return {\n          data: data,\n          dataType: 'buffer'\n        };\n      } // Assume data is a browser supported object (ImageData, Canvas, ...)\n\n\n      return {\n        data: data,\n        dataType: 'browser-object'\n      };\n    } // Image 3D copies from Typed Array or WebGLBuffer\n\n  }, {\n    key: \"setImage3D\",\n    value: function setImage3D(_ref7) {\n      var _ref7$level = _ref7.level,\n          level = _ref7$level === void 0 ? 0 : _ref7$level,\n          _ref7$internalformat = _ref7.internalformat,\n          internalformat = _ref7$internalformat === void 0 ? 6408 : _ref7$internalformat,\n          width = _ref7.width,\n          height = _ref7.height,\n          _ref7$depth = _ref7.depth,\n          depth = _ref7$depth === void 0 ? 1 : _ref7$depth,\n          _ref7$border = _ref7.border,\n          border = _ref7$border === void 0 ? 0 : _ref7$border,\n          format = _ref7.format,\n          _ref7$type = _ref7.type,\n          type = _ref7$type === void 0 ? 5121 : _ref7$type,\n          _ref7$offset = _ref7.offset,\n          offset = _ref7$offset === void 0 ? 0 : _ref7$offset,\n          pixels = _ref7.pixels;\n\n      if (ArrayBuffer.isView(pixels)) {\n        this.gl.texImage3D(this.target, level, internalformat, width, height, depth, border, format, type, pixels);\n        return this;\n      }\n\n      if (pixels instanceof Buffer) {\n        this.gl.bindBuffer(35052, pixels.handle);\n        this.gl.texImage3D(this.target, level, internalformat, width, height, depth, border, format, type, offset);\n      }\n\n      return this;\n    }\n    /* Copied from texture-2d.js\n    // WebGL2\n    setPixels(opts = {}) {\n      const {\n        buffer,\n        width = null,\n        height = null,\n        mipmapLevel = 0,\n        format = GL.RGBA,\n        type = GL.UNSIGNED_BYTE,\n        border = 0\n      } = opts;\n       const {gl} = this;\n       // This signature of texImage2D uses currently bound GL.PIXEL_UNPACK_BUFFER\n      gl.bindBuffer(GL.PIXEL_UNPACK_BUFFER, buffer.target);\n      // And as always, we must also bind the texture itself\n      this.bind();\n       gl.texImage2D(gl.TEXTURE_2D,\n        mipmapLevel, format, width, height, border, format, type, buffer.target);\n       this.unbind();\n      gl.bindBuffer(GL.GL.PIXEL_UNPACK_BUFFER, null);\n      return this;\n    }\n     setImageDataFromCompressedBuffer(opts) {\n      const {\n        buffer,\n        // offset = 0,\n        width = null,\n        height = null,\n        mipmapLevel = 0,\n        internalFormat = GL.RGBA,\n        // format = GL.RGBA,\n        // type = GL.UNSIGNED_BYTE,\n        border = 0\n      } = opts;\n       const {gl} = this;\n      gl.compressedTexImage2D(this.target,\n        mipmapLevel, internalFormat, width, height, border, buffer);\n      // gl.compressedTexSubImage2D(target,\n      //   level, xoffset, yoffset, width, height, format, ArrayBufferView? pixels);\n      return this;\n    }\n     copySubImage(opts) {\n      const {\n        // pixels,\n        // offset = 0,\n        // x,\n        // y,\n        // width,\n        // height,\n        // mipmapLevel = 0,\n        // internalFormat = GL.RGBA,\n        // type = GL.UNSIGNED_BYTE,\n        // border = 0\n      } = opts;\n       // if (pixels instanceof ArrayBufferView) {\n      //   gl.texSubImage2D(target, level, x, y, width, height, format, type, pixels);\n      // }\n      // gl.texSubImage2D(target, level, x, y, format, type, ? pixels);\n      // gl.texSubImage2D(target, level, x, y, format, type, HTMLImageElement pixels);\n      // gl.texSubImage2D(target, level, x, y, format, type, HTMLCanvasElement pixels);\n      // gl.texSubImage2D(target, level, x, y, format, type, HTMLVideoElement pixels);\n      // // Additional signature in a WebGL 2 context:\n      // gl.texSubImage2D(target, level, x, y, format, type, GLintptr offset);\n    }\n    */\n    // HELPER METHODS\n\n  }, {\n    key: \"_deduceParameters\",\n    value: function _deduceParameters(opts) {\n      var format = opts.format,\n          data = opts.data;\n      var width = opts.width,\n          height = opts.height,\n          dataFormat = opts.dataFormat,\n          type = opts.type,\n          compressed = opts.compressed; // Deduce format and type from format\n\n      var textureFormat = TEXTURE_FORMATS[format];\n      dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n      type = type || textureFormat && textureFormat.types[0]; // Deduce compression from format\n\n      compressed = compressed || textureFormat && textureFormat.compressed;\n\n      var _this$_deduceImageSiz = this._deduceImageSize(data, width, height);\n\n      width = _this$_deduceImageSiz.width;\n      height = _this$_deduceImageSiz.height;\n      return {\n        dataFormat: dataFormat,\n        type: type,\n        compressed: compressed,\n        width: width,\n        height: height,\n        format: format,\n        data: data\n      };\n    }\n    /* global ImageData, HTMLImageElement, HTMLCanvasElement, HTMLVideoElement */\n    // eslint-disable-next-line complexity\n\n  }, {\n    key: \"_deduceImageSize\",\n    value: function _deduceImageSize(data, width, height) {\n      var size;\n\n      if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n        size = {\n          width: data.naturalWidth,\n          height: data.naturalHeight\n        };\n      } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n        size = {\n          width: data.videoWidth,\n          height: data.videoHeight\n        };\n      } else if (!data) {\n        size = {\n          width: width >= 0 ? width : 1,\n          height: height >= 0 ? height : 1\n        };\n      } else {\n        size = {\n          width: width,\n          height: height\n        };\n      }\n\n      assert(size, 'Could not deduced texture size');\n      assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n      assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n      return size;\n    } // RESOURCE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTexture();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTexture(this.handle);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      switch (pname) {\n        case 4096:\n          return this.width;\n\n        case 4097:\n          return this.height;\n\n        default:\n          this.gl.bindTexture(this.target, this.handle);\n          var value = this.gl.getTexParameter(this.target, pname);\n          this.gl.bindTexture(this.target, null);\n          return value;\n      }\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, param) {\n      this.gl.bindTexture(this.target, this.handle); // NOTE: Apply NPOT workaround\n\n      param = this._getNPOTParam(pname, param); // Apparently there are some integer/float conversion rules that made\n      // the WebGL committe expose two parameter setting functions in JavaScript.\n      // For now, pick the float version for parameters specified as GLfloat.\n\n      switch (pname) {\n        case 33082:\n        case 33083:\n          this.gl.texParameterf(this.handle, pname, param);\n          break;\n\n        case 4096:\n        case 4097:\n          assert(false);\n          break;\n\n        default:\n          this.gl.texParameteri(this.target, pname, param);\n          break;\n      }\n\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n  }, {\n    key: \"_isNPOT\",\n    value: function _isNPOT() {\n      return !isWebGL2(this.gl) && (!isPowerOfTwo(this.width) || !isPowerOfTwo(this.height));\n    } // Update default settings which are not supported by NPOT textures.\n\n  }, {\n    key: \"_updateForNPOT\",\n    value: function _updateForNPOT(parameters) {\n      if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n        // log.warn(`texture: ${this} is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR`)();\n        parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n        // log.warn(`texture: ${this} is Non-Power-Of-Two, forcing TEXTURE_WRAP_S to CLAMP_TO_EDGE`)();\n        parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n        // log.warn(`texture: ${this} is Non-Power-Of-Two, forcing TEXTURE_WRAP_T to CLAMP_TO_EDGE`)();\n        parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n      }\n    }\n  }, {\n    key: \"_getNPOTParam\",\n    value: function _getNPOTParam(pname, param) {\n      if (this._isNPOT()) {\n        switch (pname) {\n          case 10241:\n            if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n              // log.warn(`texture: ${this} is Non-Power-Of-Two, forcing TEXTURE_MIN_FILTER to LINEAR`)();\n              param = 9729;\n            }\n\n            break;\n\n          case 10242:\n          case 10243:\n            if (param !== 33071) {\n              // log.warn(`texture: ${this} is Non-Power-Of-Two, ${getKey(this.gl, pname)} to CLAMP_TO_EDGE`)();\n              param = 33071;\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      return param;\n    }\n  }]);\n\n  return Texture;\n}(Resource);\n\nexport { Texture as default };","var ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array'; // Converts TYPED ARRAYS to corresponding GL constant\n// Used to auto deduce gl parameter types\n\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  // If typed array, look up constructor\n  var type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n} // Converts GL constant to corresponding TYPED ARRAY\n// Used to auto deduce gl parameter types\n\n/* eslint-disable complexity */\n\nexport function getTypedArrayFromGLType(glType) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$clamped = _ref.clamped,\n      clamped = _ref$clamped === void 0 ? true : _ref$clamped; // Sorted in some order of likelihood to reduce amount of comparisons\n\n\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\n/* eslint-enable complexity */\n// Flip rows (can be used on arrays returned from `Framebuffer.readPixels`)\n// https://stackoverflow.com/questions/41969562/\n// how-can-i-flip-the-result-of-webglrenderingcontext-readpixels\n\nexport function flipRows(_ref2) {\n  var data = _ref2.data,\n      width = _ref2.width,\n      height = _ref2.height,\n      _ref2$bytesPerPixel = _ref2.bytesPerPixel,\n      bytesPerPixel = _ref2$bytesPerPixel === void 0 ? 4 : _ref2$bytesPerPixel,\n      temp = _ref2.temp;\n  var bytesPerRow = width * bytesPerPixel; // make a temp buffer to hold one row\n\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (var y = 0; y < height / 2; ++y) {\n    var topOffset = y * bytesPerRow;\n    var bottomOffset = (height - y - 1) * bytesPerRow; // make copy of a row on the top half\n\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow)); // copy a row from the bottom half to the top\n\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow); // copy the copy of the top half row to the bottom half\n\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels(_ref3) {\n  var data = _ref3.data,\n      width = _ref3.width,\n      height = _ref3.height;\n  var newWidth = Math.round(width / 2);\n  var newHeight = Math.round(height / 2);\n  var newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (var y = 0; y < newHeight; y++) {\n    for (var x = 0; x < newWidth; x++) {\n      for (var c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}","'use strict';\n\nvar objectAssign = require('object-assign'); // compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\n\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n\n  if (y < x) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n\n  return !!(b != null && b._isBuffer);\n} // based on node assert, original notice:\n// NB: The URL to the CommonJS spec is kept just for tradition.\n//     node-assert has evolved a lot since then, both in API and behavior.\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\nvar util = require('util/');\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\n\nvar functionsHaveNames = function () {\n  return function foo() {}.name === 'foo';\n}();\n\nfunction pToString(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n\n  if (!arrbuf) {\n    return false;\n  }\n\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n\n  return false;\n} // 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\n\nvar assert = module.exports = ok; // 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/; // based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\n\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n\n  if (functionsHaveNames) {\n    return func.name;\n  }\n\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\n\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n\n  var stackStartFunction = options.stackStartFunction || fail;\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n\n    if (err.stack) {\n      var out = err.stack; // try to strip useless frames\n\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n}; // assert.AssertionError instanceof Error\n\n\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\n\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' + name + ']';\n}\n\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' + self.operator + ' ' + truncate(inspect(self.expected), 128);\n} // At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n} // EXTENSION! allows for well behaved errors defined elsewhere.\n\n\nassert.fail = fail; // 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\n\nassert.ok = ok; // 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n}; // 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n}; // 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0; // 7.2. If the expected value is a Date object, the actual value is\n    // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime(); // 7.3 If the expected value is a RegExp object, the actual value is\n    // equivalent if it is also a RegExp object with the same source and\n    // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source && actual.global === expected.global && actual.multiline === expected.multiline && actual.lastIndex === expected.lastIndex && actual.ignoreCase === expected.ignoreCase; // 7.4. Other pairs that do not both pass typeof value == 'object',\n    // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') && (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected; // If both values are instances of typed arrays, wrap their underlying\n    // ArrayBuffers in a Buffer each to increase performance\n    // This optimization requires the arrays to have the same type as checked by\n    // Object.prototype.toString (aka pToString). Never perform binary\n    // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n    // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) && pToString(actual) === pToString(expected) && !(actual instanceof Float32Array || actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer), new Uint8Array(expected.buffer)) === 0; // 7.5 For all other Object pairs, including Array objects, equivalence is\n    // determined by having the same number of owned properties (as verified\n    // with Object.prototype.hasOwnProperty.call), the same set of keys\n    // (although not necessarily the same order), equivalent values for every\n    // corresponding key, and an identical 'prototype' property. Note: this\n    // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {\n      actual: [],\n      expected: []\n    };\n    var actualIndex = memos.actual.indexOf(actual);\n\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined) return false; // if one is a primitive, the other must be same\n\n  if (util.isPrimitive(a) || util.isPrimitive(b)) return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b)) return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if (aIsArgs && !bIsArgs || !aIsArgs && bIsArgs) return false;\n\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i; // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n\n  if (ka.length !== kb.length) return false; //the same set of keys (although not necessarily the same order),\n\n  ka.sort();\n  kb.sort(); //~~~cheap key test\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i]) return false;\n  } //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects)) return false;\n  }\n\n  return true;\n} // 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\n\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n} // 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n}; // 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {// Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') + (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if (isUnwantedException && userProvidedMessage && expectedException(actual, expected) || isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if (shouldThrow && actual && expected && !expectedException(actual, expected) || !shouldThrow && actual) {\n    throw actual;\n  }\n} // 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\n\nassert.throws = function (block,\n/*optional*/\nerror,\n/*optional*/\nmessage) {\n  _throws(true, block, error, message);\n}; // EXTENSION! This is annoying to write outside this module.\n\n\nassert.doesNotThrow = function (block,\n/*optional*/\nerror,\n/*optional*/\nmessage) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function (err) {\n  if (err) throw err;\n}; // Expose a strict only variant of assert\n\n\nfunction strict(value, message) {\n  if (!value) fail(value, true, message, '==', strict);\n}\n\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n\n  return keys;\n};","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Texture from './texture';\nimport assert from '../utils/assert';\nvar FACES = [34069, 34070, 34071, 34072, 34073, 34074];\n\nvar TextureCube = /*#__PURE__*/function (_Texture) {\n  _inherits(TextureCube, _Texture);\n\n  function TextureCube(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TextureCube);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextureCube).call(this, gl, Object.assign({}, opts, {\n      target: 34067\n    })));\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  /* eslint-disable max-len, max-statements */\n\n\n  _createClass(TextureCube, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$format = opts.format,\n          format = _opts$format === void 0 ? 6408 : _opts$format,\n          _opts$mipmaps = opts.mipmaps,\n          mipmaps = _opts$mipmaps === void 0 ? true : _opts$mipmaps;\n      var _opts$width = opts.width,\n          width = _opts$width === void 0 ? 1 : _opts$width,\n          _opts$height = opts.height,\n          height = _opts$height === void 0 ? 1 : _opts$height,\n          _opts$type = opts.type,\n          type = _opts$type === void 0 ? 5121 : _opts$type,\n          dataFormat = opts.dataFormat; // Deduce width and height based on one of the faces\n\n      var _this$_deduceParamete = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat\n      });\n\n      type = _this$_deduceParamete.type;\n      dataFormat = _this$_deduceParamete.dataFormat;\n\n      var _this$_deduceImageSiz = this._deduceImageSize({\n        data: opts[34069],\n        width: width,\n        height: height\n      });\n\n      width = _this$_deduceImageSiz.width;\n      height = _this$_deduceImageSiz.height; // Enforce cube\n\n      assert(width === height); // Temporarily apply any pixel store paramaters and build textures\n      // withParameters(this.gl, opts, () => {\n      //   for (const face of CUBE_MAP_FACES) {\n      //     this.setImageData({\n      //       target: face,\n      //       data: opts[face],\n      //       width, height, format, type, dataFormat, border, mipmaps\n      //     });\n      //   }\n      // });\n\n      this.setCubeMapImageData(opts); // Called here so that GL.\n      // TODO - should genMipmap() be called on the cubemap or on the faces?\n\n      if (mipmaps) {\n        this.generateMipmap(opts);\n      } // Store opts for accessors\n\n\n      this.opts = opts;\n    }\n  }, {\n    key: \"subImage\",\n    value: function subImage(_ref) {\n      var face = _ref.face,\n          data = _ref.data,\n          _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$mipmapLevel = _ref.mipmapLevel,\n          mipmapLevel = _ref$mipmapLevel === void 0 ? 0 : _ref$mipmapLevel;\n      return this._subImage({\n        target: face,\n        data: data,\n        x: x,\n        y: y,\n        mipmapLevel: mipmapLevel\n      });\n    }\n    /* eslint-disable max-statements, max-len */\n\n  }, {\n    key: \"setCubeMapImageData\",\n    value: function setCubeMapImageData(_ref2) {\n      var width = _ref2.width,\n          height = _ref2.height,\n          pixels = _ref2.pixels,\n          data = _ref2.data,\n          _ref2$border = _ref2.border,\n          border = _ref2$border === void 0 ? 0 : _ref2$border,\n          _ref2$format = _ref2.format,\n          format = _ref2$format === void 0 ? 6408 : _ref2$format,\n          _ref2$type = _ref2.type,\n          type = _ref2$type === void 0 ? 5121 : _ref2$type,\n          _ref2$generateMipmap = _ref2.generateMipmap,\n          generateMipmap = _ref2$generateMipmap === void 0 ? false : _ref2$generateMipmap;\n      var gl = this.gl;\n      pixels = pixels || data;\n      this.bind();\n\n      if (this.width || this.height) {\n        for (var _i = 0; _i < FACES.length; _i++) {\n          var face = FACES[_i];\n          gl.texImage2D(face, 0, format, width, height, border, format, type, pixels[face]);\n        }\n      } else {\n        for (var _i2 = 0; _i2 < FACES.length; _i2++) {\n          var _face = FACES[_i2];\n          gl.texImage2D(_face, 0, format, format, type, pixels[_face]);\n        }\n      }\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          index = _ref3.index;\n\n      if (index !== undefined) {\n        this.gl.activeTexture(33984 + index);\n      }\n\n      this.gl.bindTexture(34067, this.handle);\n      return index;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      this.gl.bindTexture(34067, null);\n      return this;\n    }\n  }]);\n\n  return TextureCube;\n}(Texture);\n\nexport { TextureCube as default };\nTextureCube.FACES = FACES;","import _typeof from \"@babel/runtime/helpers/esm/typeof\"; // based on https://github.com/cheton/is-electron\n// https://github.com/electron/electron/issues/2288\n\n/* global window, process, navigator */\n\nfunction isElectron() {\n  // Renderer process\n  if (typeof window !== 'undefined' && _typeof(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  } // Main process\n\n\n  if (typeof process !== 'undefined' && _typeof(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  } // Detect the user agent when the `nodeIntegration` option is set to true\n\n\n  if ((typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n\nexport default isElectron();","import _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport log from '../utils/log';\nimport assert from '../utils/assert';\nvar DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\n\nvar Accessor = /*#__PURE__*/function () {\n  _createClass(Accessor, null, [{\n    key: \"getBytesPerElement\",\n    value: function getBytesPerElement(accessor) {\n      // TODO: using `FLOAT` when type is not specified,\n      // ensure this assumption is valid or force API to specify type.\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT;\n    }\n  }, {\n    key: \"getBytesPerVertex\",\n    value: function getBytesPerVertex(accessor) {\n      assert(accessor.size); // TODO: using `FLOAT` when type is not specified,\n      // ensure this assumption is valid or force API to specify type.\n\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n    } // Combines (merges) a list of accessors. On top of default values\n    // Usually [programAccessor, bufferAccessor, appAccessor]\n    // All props will be set in the returned object.\n    // TODO check for conflicts between values in the supplied accessors\n\n  }, {\n    key: \"resolve\",\n    value: function resolve() {\n      for (var _len = arguments.length, accessors = new Array(_len), _key = 0; _key < _len; _key++) {\n        accessors[_key] = arguments[_key];\n      }\n\n      return _construct(Accessor, [DEFAULT_ACCESSOR_VALUES].concat(accessors)); // Default values\n    }\n  }]);\n\n  function Accessor() {\n    var _this = this;\n\n    _classCallCheck(this, Accessor);\n\n    for (var _len2 = arguments.length, accessors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      accessors[_key2] = arguments[_key2];\n    }\n\n    accessors.forEach(function (accessor) {\n      return _this._assign(accessor);\n    }); // Merge in sequence\n\n    Object.freeze(this);\n  }\n\n  _createClass(Accessor, [{\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify(this);\n    } // ACCESSORS\n    // TODO - remove>\n\n  }, {\n    key: \"_assign\",\n    // PRIVATE\n\n    /* eslint-disable complexity, max-statements */\n    value: function _assign() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; // TYPE - not expected to be overridden\n\n      if (props.type !== undefined) {\n        if (this.type !== props.type) {\n          log.warn('accessor type mismatch');\n        }\n\n        this.type = props.type; // Auto-deduce integer type?\n\n        if (props.type === 5124 || props.type === 5125) {\n          this.integer = true;\n        }\n      } // SIZE - not expected to be overridden\n\n\n      if (props.size !== undefined) {\n        if (this.size !== props.size) {\n          log.warn('accessor size mismatch');\n        }\n\n        this.size = props.size;\n      } // INSTANCE DIVISOR\n\n\n      if (props.divisor !== undefined) {\n        this.divisor = props.divisor;\n      }\n\n      if (props.offset !== undefined) {\n        this.offset = props.offset;\n      }\n\n      if (props.stride !== undefined) {\n        this.stride = props.stride;\n      }\n\n      if (props.normalized !== undefined) {\n        this.normalized = props.normalized;\n      }\n\n      if (props.integer !== undefined) {\n        this.integer = props.integer;\n      } // Backwards compatibility\n\n\n      if (props.instanced !== undefined) {\n        log.deprecated('Accessor.instanced', 'Accessor.divisor');\n        this.divisor = props.instanced ? 1 : 0;\n      }\n\n      if (props.isInstanced !== undefined) {\n        log.deprecated('Accessor.isInstanced', 'Accessor.divisor');\n        this.divisor = props.isInstanced ? 1 : 0;\n      } // TODO - should this be supported?\n\n\n      if (props.index !== undefined) {\n        this.index = props.index ? 1 : 0;\n      }\n\n      return this;\n    }\n    /* eslint-enable complexity, max-statements */\n\n  }, {\n    key: \"BYTES_PER_ELEMENT\",\n    get: function get() {\n      return Accessor.getBytesPerElement(this);\n    }\n  }, {\n    key: \"BYTES_PER_VERTEX\",\n    get: function get() {\n      return Accessor.getBytesPerVertex(this);\n    }\n  }]);\n\n  return Accessor;\n}(); // TEST EXPORTS\n\n\nexport { Accessor as default };\nexport { DEFAULT_ACCESSOR_VALUES };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Resource from './resource';\nimport Accessor from './accessor';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { log } from '../utils';\nimport assert from '../utils/assert';\nvar DEBUG_DATA_LENGTH = 10;\n\nvar Buffer = /*#__PURE__*/function (_Resource) {\n  _inherits(Buffer, _Resource);\n\n  function Buffer(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Buffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Buffer).call(this, gl, props));\n\n    _this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']); // In WebGL1, need to make sure we use GL.ELEMENT_ARRAY_BUFFER when initializing element buffers\n    // otherwise buffer type will lock to generic (non-element) buffer\n    // In WebGL2, we can use GL.COPY_READ_BUFFER which avoids locking the type here\n\n\n    _this.target = props.target || (_this.gl.webgl2 ? 36662 : 34962);\n\n    _this._initialize(props);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // returns number of elements in the buffer (assuming that the full buffer is used)\n\n\n  _createClass(Buffer, [{\n    key: \"getElementCount\",\n    value: function getElementCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n    } // returns number of vertices in the buffer (assuming that the full buffer is used)\n\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n    } // Creates and initializes the buffer object's data store.\n\n  }, {\n    key: \"initialize\",\n    value: function initialize(props) {\n      return this._initialize(props);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('data' in props) {\n        this.setData(props);\n      }\n\n      return this;\n    } // Stores the accessor of data with the buffer, makes it easy to e.g. set it as an attribute later\n    // {accessor,type,size = 1,offset = 0,stride = 0,normalized = false,integer = false,divisor = 0}\n\n  }, {\n    key: \"setAccessor\",\n    value: function setAccessor(opts) {\n      this.accessor = opts;\n      return this;\n    } // Allocate a bigger GPU buffer (if the current buffer is not big enough).\n    // If a reallocation is triggered it clears the buffer\n    // Returns:\n    //  `true`: buffer was reallocated, data was cleared\n    //  `false`: buffer was big enough, data is intact\n\n  }, {\n    key: \"reallocate\",\n    value: function reallocate(byteLength) {\n      if (byteLength > this.byteLength) {\n        this._setByteLength(byteLength);\n\n        return true;\n      }\n\n      this.bytesUsed = byteLength;\n      return false;\n    } // Update with new data\n\n  }, {\n    key: \"setData\",\n    value: function setData(opts) {\n      return this.initialize(opts);\n    } // Updates a subset of a buffer object's data store.\n    // Data (Typed Array or ArrayBuffer), length is inferred unless provided\n    // Offset into buffer\n    // WebGL2 only: Offset into srcData\n    // WebGL2 only: Number of bytes to be copied\n\n  }, {\n    key: \"subData\",\n    value: function subData(props) {\n      // Signature: buffer.subData(new Float32Array([...]))\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      }\n\n      var _props = props,\n          data = _props.data,\n          _props$offset = _props.offset,\n          offset = _props$offset === void 0 ? 0 : _props$offset,\n          _props$srcOffset = _props.srcOffset,\n          srcOffset = _props$srcOffset === void 0 ? 0 : _props$srcOffset;\n      var byteLength = props.byteLength || props.length; // if (byteLength > this.byteLength) {\n      //   byteLength = this.byteLength;\n      // }\n\n      assert(data); // Create the buffer - binding it here for the first time locks the type\n      // In WebGL2, use GL.COPY_WRITE_BUFFER to avoid locking the type\n\n      var target = this.gl.webgl2 ? 36663 : this.target;\n      this.gl.bindBuffer(target, this.handle); // WebGL2: subData supports additional srcOffset and length parameters\n\n      if (srcOffset !== 0 || byteLength !== undefined) {\n        assertWebGL2Context(this.gl);\n        this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n      } else {\n        this.gl.bufferSubData(target, offset, data);\n      }\n\n      this.gl.bindBuffer(target, null); // TODO - update local `data` if offsets are right\n\n      this.debugData = null;\n\n      if (!this.accessor.type) {\n        this.setAccessor(new Accessor(this.accessor, {\n          type: getGLTypeFromTypedArray(data)\n        }));\n      }\n\n      return this;\n    } // WEBGL2 ONLY: Copies part of the data of another buffer into this buffer\n\n  }, {\n    key: \"copyData\",\n    value: function copyData(_ref) {\n      var sourceBuffer = _ref.sourceBuffer,\n          _ref$readOffset = _ref.readOffset,\n          readOffset = _ref$readOffset === void 0 ? 0 : _ref$readOffset,\n          _ref$writeOffset = _ref.writeOffset,\n          writeOffset = _ref$writeOffset === void 0 ? 0 : _ref$writeOffset,\n          size = _ref.size;\n      var gl = this.gl;\n      assertWebGL2Context(gl); // Use GL.COPY_READ_BUFFER+GL.COPY_WRITE_BUFFER avoid disturbing other targets and locking type\n\n      gl.bindBuffer(36662, sourceBuffer.handle);\n      gl.bindBuffer(36663, this.handle);\n      gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n      gl.bindBuffer(36662, null);\n      gl.bindBuffer(36663, null); // TODO - update local `data` if offsets are 0\n\n      this.debugData = null;\n      return this;\n    } // WEBGL2 ONLY: Reads data from buffer into an ArrayBufferView or SharedArrayBuffer.\n\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$dstData = _ref2.dstData,\n          dstData = _ref2$dstData === void 0 ? null : _ref2$dstData,\n          _ref2$srcByteOffset = _ref2.srcByteOffset,\n          srcByteOffset = _ref2$srcByteOffset === void 0 ? 0 : _ref2$srcByteOffset,\n          _ref2$dstOffset = _ref2.dstOffset,\n          dstOffset = _ref2$dstOffset === void 0 ? 0 : _ref2$dstOffset,\n          _ref2$length = _ref2.length,\n          length = _ref2$length === void 0 ? 0 : _ref2$length;\n\n      assertWebGL2Context(this.gl);\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n\n      var sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n      var dstElementOffset = dstOffset;\n      var dstAvailableElementCount;\n      var dstElementCount;\n\n      if (dstData) {\n        dstElementCount = dstData.length;\n        dstAvailableElementCount = dstElementCount - dstElementOffset;\n      } else {\n        // Allocate ArrayBufferView with enough size to copy all eligible data.\n        dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n        dstElementCount = dstElementOffset + dstAvailableElementCount;\n      }\n\n      var copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n      length = length || copyElementCount;\n      assert(length <= copyElementCount);\n      dstData = dstData || new ArrayType(dstElementCount); // Use GL.COPY_READ_BUFFER to avoid disturbing other targets and locking type\n\n      this.gl.bindBuffer(36662, this.handle);\n      this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n      this.gl.bindBuffer(36662, null); // TODO - update local `data` if offsets are 0\n\n      return dstData;\n    }\n    /**\n     * Binds a buffer to a given binding point (target).\n     *   GL.TRANSFORM_FEEDBACK_BUFFER and GL.UNIFORM_BUFFER take an index, and optionally a range.\n     * @param {Glenum} target - target for the bind operation.\n     * @param {GLuint} index= - the index of the target.\n     *   - GL.TRANSFORM_FEEDBACK_BUFFER and GL.UNIFORM_BUFFER need an index to affect state\n     * @param {GLuint} offset=0 - the index of the target.\n     *   - GL.UNIFORM_BUFFER: `offset` must be aligned to GL.UNIFORM_BUFFER_OFFSET_ALIGNMENT.\n     * @param {GLuint} size= - the index of the target.\n     *   - GL.UNIFORM_BUFFER: `size` must be a minimum of GL.UNIFORM_BLOCK_SIZE_DATA.\n     * @returns {Buffer} - Returns itself for chaining.\n     */\n\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$target = _ref3.target,\n          target = _ref3$target === void 0 ? this.target : _ref3$target,\n          _ref3$index = _ref3.index,\n          index = _ref3$index === void 0 ? this.accessor && this.accessor.index : _ref3$index,\n          _ref3$offset = _ref3.offset,\n          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n          size = _ref3.size; // NOTE: While GL.TRANSFORM_FEEDBACK_BUFFER and GL.UNIFORM_BUFFER could\n      // be used as direct binding points, they will not affect transform feedback or\n      // uniform buffer state. Instead indexed bindings need to be made.\n\n\n      if (target === 35345 || target === 35982) {\n        if (size !== undefined) {\n          this.gl.bindBufferRange(target, index, this.handle, offset, size);\n        } else {\n          assert(offset === 0); // Make sure offset wasn't supplied\n\n          this.gl.bindBufferBase(target, index, this.handle);\n        }\n      } else {\n        this.gl.bindBuffer(target, this.handle);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$target = _ref4.target,\n          target = _ref4$target === void 0 ? this.target : _ref4$target,\n          _ref4$index = _ref4.index,\n          index = _ref4$index === void 0 ? this.accessor && this.accessor.index : _ref4$index;\n\n      var isIndexedBuffer = target === 35345 || target === 35982;\n\n      if (isIndexedBuffer) {\n        this.gl.bindBufferBase(target, index, null);\n      } else {\n        this.gl.bindBuffer(target, null);\n      }\n\n      return this;\n    } // DEPRECATED/REMOVED METHODS\n\n  }, {\n    key: \"getDebugData\",\n    // PROTECTED METHODS (INTENDED FOR USE BY OTHER FRAMEWORK CODE ONLY)\n    // Returns a short initial data array\n    value: function getDebugData() {\n      if (!this.debugData) {\n        this.debugData = this.getData({\n          length: DEBUG_DATA_LENGTH\n        });\n        return {\n          data: this.debugData,\n          changed: true\n        };\n      }\n\n      return {\n        data: this.debugData,\n        changed: false\n      };\n    }\n  }, {\n    key: \"invalidateDebugData\",\n    value: function invalidateDebugData() {\n      this.debugData = null;\n    } // PRIVATE METHODS\n    // Signature: `new Buffer(gl, {data: new Float32Array(...)})`\n    // Signature: `new Buffer(gl, new Float32Array(...))`\n    // Signature: `new Buffer(gl, 100)`\n\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; // Signature `new Buffer(gl, new Float32Array(...)`\n\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      } // Signature: `new Buffer(gl, 100)`\n\n\n      if (Number.isFinite(props)) {\n        props = {\n          byteLength: props\n        };\n      }\n\n      if (props.bytes) {\n        log.deprecated('bytes', 'byteLength');\n      }\n\n      var byteLength = props.byteLength || props.bytes || 0; // assert(props.data || byteLength);\n\n      this.usage = props.usage || 35044; // DEPRECATE - remove `props` from this list in next major release\n\n      this.setAccessor(new Accessor(props, props.accessor));\n      return props.data ? this._setData(props.data) : this._setByteLength(byteLength);\n    } // Allocate a new buffer and initialize to contents of typed array\n\n  }, {\n    key: \"_setData\",\n    value: function _setData(data) {\n      var usage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.usage;\n      assert(ArrayBuffer.isView(data));\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, data, usage);\n      this.gl.bindBuffer(target, null);\n      this.usage = usage;\n      this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n      this.byteLength = data.byteLength;\n      this.bytesUsed = data.byteLength; // infer GL type from supplied typed array\n\n      var type = getGLTypeFromTypedArray(data);\n      assert(type);\n      this.setAccessor(new Accessor(this.accessor, {\n        type: type\n      }));\n      return this;\n    } // Allocate a GPU buffer of specified size.\n\n  }, {\n    key: \"_setByteLength\",\n    value: function _setByteLength(byteLength) {\n      var usage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.usage;\n      assert(byteLength >= 0); // Workaround needed for Safari (#291):\n      // gl.bufferData with size equal to 0 crashes. Instead create zero sized array.\n\n      var data = byteLength;\n\n      if (byteLength === 0) {\n        data = new Float32Array(0);\n      }\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, data, usage);\n      this.gl.bindBuffer(target, null);\n      this.usage = usage;\n      this.debugData = null;\n      this.byteLength = byteLength;\n      this.bytesUsed = byteLength;\n      return this;\n    } // Binding a buffer for the first time locks the type\n    // In WebGL2, use GL.COPY_WRITE_BUFFER to avoid locking the type\n\n  }, {\n    key: \"_getTarget\",\n    value: function _getTarget() {\n      return this.gl.webgl2 ? 36663 : this.target;\n    }\n  }, {\n    key: \"_getAvailableElementCount\",\n    value: function _getAvailableElementCount(srcByteOffset) {\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n      var sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n      return this.getElementCount() - sourceElementOffset;\n    } // RESOURCE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createBuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteBuffer(this.handle);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindBuffer(this.target, this.handle);\n      var value = this.gl.getBufferParameter(this.target, pname);\n      this.gl.bindBuffer(this.target, null);\n      return value;\n    } // DEPRECATED\n\n  }, {\n    key: \"updateAccessor\",\n    value: function updateAccessor(opts) {\n      log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)');\n      this.accessor = new Accessor(this.accessor, opts);\n      return this;\n    }\n  }, {\n    key: \"setByteLength\",\n    value: function setByteLength(byteLength) {\n      log.deprecated('setByteLength', 'reallocate');\n      return this.reallocate(byteLength);\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      log.removed('Buffer.data', 'N/A', 'v6.0');\n    }\n  }, {\n    key: \"bytes\",\n    get: function get() {\n      log.deprecated('Buffer.bytes', 'Buffer.byteLength', 'v6.1');\n      return this.byteLength;\n    }\n  }]);\n\n  return Buffer;\n}(Resource);\n\nexport { Buffer as default };","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && _typeof(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && _typeof(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\"; // WEBGL BUILT-IN TYPES\n// 1) Exports all WebGL constants as {GL}\n// 2) Enables app to \"import\" WebGL types\n//    - Importing these types makes them known to eslint etc.\n//    - Provides dummy types for WebGL2 when not available to streamline\n//      library code.\n//    - Exports types from headless gl when running under Node.js\n\n/* eslint-disable quotes, no-console */\n\nimport { global } from '../utils/globals';\nimport isBrowser from '../utils/is-browser';\nexport var ERR_HEADLESSGL_LOAD = \"luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.\"; // Load headless gl dynamically, if available\n\nexport var headlessTypes = null;\nexport var headlessGL = function headlessGL() {\n  throw new Error(ERR_HEADLESSGL_LOAD);\n};\n\nif (!isBrowser) {\n  try {\n    headlessGL = module.require('gl');\n    headlessTypes = module.require('gl/wrap');\n  } catch (error) {// /* global console */\n    // console.info(ERR_HEADLESSGL_LOAD);\n  }\n}\n\nvar DummyType = function DummyType() {\n  _classCallCheck(this, DummyType);\n};\n\nvar _ref = headlessTypes || global,\n    _ref$WebGLRenderingCo = _ref.WebGLRenderingContext,\n    WebGLRenderingContext = _ref$WebGLRenderingCo === void 0 ? DummyType : _ref$WebGLRenderingCo,\n    _ref$WebGLProgram = _ref.WebGLProgram,\n    WebGLProgram = _ref$WebGLProgram === void 0 ? DummyType : _ref$WebGLProgram,\n    _ref$WebGLShader = _ref.WebGLShader,\n    WebGLShader = _ref$WebGLShader === void 0 ? DummyType : _ref$WebGLShader,\n    _ref$WebGLBuffer = _ref.WebGLBuffer,\n    WebGLBuffer = _ref$WebGLBuffer === void 0 ? DummyType : _ref$WebGLBuffer,\n    _ref$WebGLFramebuffer = _ref.WebGLFramebuffer,\n    WebGLFramebuffer = _ref$WebGLFramebuffer === void 0 ? DummyType : _ref$WebGLFramebuffer,\n    _ref$WebGLRenderbuffe = _ref.WebGLRenderbuffer,\n    WebGLRenderbuffer = _ref$WebGLRenderbuffe === void 0 ? DummyType : _ref$WebGLRenderbuffe,\n    _ref$WebGLTexture = _ref.WebGLTexture,\n    WebGLTexture = _ref$WebGLTexture === void 0 ? DummyType : _ref$WebGLTexture,\n    _ref$WebGLUniformLoca = _ref.WebGLUniformLocation,\n    WebGLUniformLocation = _ref$WebGLUniformLoca === void 0 ? DummyType : _ref$WebGLUniformLoca,\n    _ref$WebGLActiveInfo = _ref.WebGLActiveInfo,\n    WebGLActiveInfo = _ref$WebGLActiveInfo === void 0 ? DummyType : _ref$WebGLActiveInfo,\n    _ref$WebGLShaderPreci = _ref.WebGLShaderPrecisionFormat,\n    WebGLShaderPrecisionFormat = _ref$WebGLShaderPreci === void 0 ? DummyType : _ref$WebGLShaderPreci;\n\nexport var webGLTypesAvailable = WebGLRenderingContext !== DummyType && WebGLProgram !== DummyType && WebGLShader !== DummyType && WebGLBuffer !== DummyType && WebGLFramebuffer !== DummyType && WebGLRenderbuffer !== DummyType && WebGLTexture !== DummyType && WebGLUniformLocation !== DummyType && WebGLActiveInfo !== DummyType && WebGLShaderPrecisionFormat !== DummyType; // Ensures that WebGL2RenderingContext is defined in non-WebGL2 environments\n// so that apps can test their gl contexts with instanceof\n// E.g. if (gl instanceof WebGL2RenderingContext) { }\n\nfunction getWebGL2RenderingContext() {\n  var WebGL2RenderingContextNotSupported = function WebGL2RenderingContextNotSupported() {\n    _classCallCheck(this, WebGL2RenderingContextNotSupported);\n  };\n\n  return global.WebGL2RenderingContext || WebGL2RenderingContextNotSupported;\n} // Ensure that Image is defined under Node.js\n\n\nfunction getImage() {\n  var ImageNotSupported = function ImageNotSupported() {\n    _classCallCheck(this, ImageNotSupported);\n  };\n\n  return global.Image || ImageNotSupported;\n}\n\nvar WebGL2RenderingContext = getWebGL2RenderingContext();\nvar Image = getImage(); // Export the standard WebGL types\n\nexport { Image, WebGLRenderingContext, WebGLProgram, WebGLShader, WebGLBuffer, WebGLFramebuffer, WebGLRenderbuffer, WebGLTexture, WebGLUniformLocation, WebGLActiveInfo, WebGLShaderPrecisionFormat, WebGL2RenderingContext };","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nvar process_ = globals.process || {};\nvar console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor;\n\n    var TempCtor = function TempCtor() {};\n\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  };\n}","require(\"core-js/modules/es.array.reduce.js\");\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors || function getOwnPropertyDescriptors(obj) {\n  var keys = Object.keys(obj);\n  var descriptors = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n  }\n\n  return descriptors;\n};\n\nvar formatRegExp = /%[sdj%]/g;\n\nexports.format = function (f) {\n  if (!isString(f)) {\n    var objects = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function (x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n\n    switch (x) {\n      case '%s':\n        return String(args[i++]);\n\n      case '%d':\n        return Number(args[i++]);\n\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n\n      default:\n        return x;\n    }\n  });\n\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n\n  return str;\n}; // Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\n\n\nexports.deprecate = function (fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  } // Allow for deprecating things in the process of starting up.\n\n\n  if (typeof process === 'undefined') {\n    return function () {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n\n      warned = true;\n    }\n\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\nvar debugs = {};\nvar debugEnviron;\n\nexports.debuglog = function (set) {\n  if (isUndefined(debugEnviron)) debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n\n      debugs[set] = function () {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function () {};\n    }\n  }\n\n  return debugs[set];\n};\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n\n/* legacy: obj, showHidden, depth, colors*/\n\n\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  }; // legacy...\n\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  } // set default options\n\n\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\n\nexports.inspect = inspect; // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n\ninspect.colors = {\n  'bold': [1, 22],\n  'italic': [3, 23],\n  'underline': [4, 24],\n  'inverse': [7, 27],\n  'white': [37, 39],\n  'grey': [90, 39],\n  'black': [30, 39],\n  'blue': [34, 39],\n  'cyan': [36, 39],\n  'green': [32, 39],\n  'magenta': [35, 39],\n  'red': [31, 39],\n  'yellow': [33, 39]\n}; // Don't use 'blue' not visible on cmd.exe\n\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return \"\\x1B[\" + inspect.colors[style][0] + 'm' + str + \"\\x1B[\" + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\nfunction arrayToHash(array) {\n  var hash = {};\n  array.forEach(function (val, idx) {\n    hash[val] = true;\n  });\n  return hash;\n}\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect && value && isFunction(value.inspect) && // Filter out the util module, it's inspect function is special\n  value.inspect !== exports.inspect && // Also filter out any prototype objects using the circular check.\n  !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n\n    return ret;\n  } // Primitive types cannot have properties\n\n\n  var primitive = formatPrimitive(ctx, value);\n\n  if (primitive) {\n    return primitive;\n  } // Look up the keys of the object.\n\n\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  } // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n\n\n  if (isError(value) && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  } // Some type of object without properties can be shortcutted.\n\n\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '',\n      array = false,\n      braces = ['{', '}']; // Make Array say that they are Array\n\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  } // Make functions say that they are functions\n\n\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  } // Make RegExps say that they are RegExps\n\n\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  } // Make dates with properties first say the date\n\n\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  } // Make error with message first say the error\n\n\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n  var output;\n\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function (key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n  return reduceToSingleString(output, base, braces);\n}\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value)) return ctx.stylize('undefined', 'undefined');\n\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '').replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n\n  if (isNumber(value)) return ctx.stylize('' + value, 'number');\n  if (isBoolean(value)) return ctx.stylize('' + value, 'boolean'); // For some reason typeof null is \"object\", so special case here.\n\n  if (isNull(value)) return ctx.stylize('null', 'null');\n}\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n\n  keys.forEach(function (key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));\n    }\n  });\n  return output;\n}\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || {\n    value: value[key]\n  };\n\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function (line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function (line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n\n    name = JSON.stringify('' + key);\n\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"').replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function (prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] + (base === '' ? '' : base + '\\n ') + ' ' + output.join(',\\n  ') + ' ' + braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n} // NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\n\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\n\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\n\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\n\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\n\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\n\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\n\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\n\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);\n}\n\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null || typeof arg === 'boolean' || typeof arg === 'number' || typeof arg === 'string' || typeof arg === 'symbol' || // ES6 symbol\n  typeof arg === 'undefined';\n}\n\nexports.isPrimitive = isPrimitive;\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; // 26 Feb 16:19:34\n\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()), pad(d.getMinutes()), pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n} // log is just a thin wrapper to console.log that prepends a timestamp\n\n\nexports.log = function () {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\n\n\nexports.inherits = require('inherits');\n\nexports._extend = function (origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n  var keys = Object.keys(add);\n  var i = keys.length;\n\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function') throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn,\n      enumerable: false,\n      writable: false,\n      configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n    var args = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  });\n  return Object.defineProperties(fn, getOwnPropertyDescriptors(original));\n};\n\nexports.promisify.custom = kCustomPromisifiedSymbol;\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  } // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n\n\n  function callbackified() {\n    var args = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n\n    var self = this;\n\n    var cb = function cb() {\n      return maybeCb.apply(self, arguments);\n    }; // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n\n\n    original.apply(this, args).then(function (ret) {\n      process.nextTick(cb, null, ret);\n    }, function (rej) {\n      process.nextTick(callbackifyOnRejected, rej, cb);\n    });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified, getOwnPropertyDescriptors(original));\n  return callbackified;\n}\n\nexports.callbackify = callbackify;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport luma from '../init';\nimport { assertWebGLContext, isWebGL2, getKey, getKeyValue } from '../webgl-utils';\nimport { uid } from '../utils';\nimport { stubRemovedMethods as _stubRemovedMethods } from '../utils';\nimport assert from '../utils/assert';\nvar ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods'; // TODO - Handle context loss\n// function glGetContextLossCount(gl) {\n//   return (gl.luma && gl.luma.glCount) || 0;\n// }\n\nvar Resource = /*#__PURE__*/function () {\n  function Resource(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Resource);\n\n    assertWebGLContext(gl);\n    var id = opts.id,\n        _opts$userData = opts.userData,\n        userData = _opts$userData === void 0 ? {} : _opts$userData;\n    this.gl = gl; // this.ext = polyfillContext(gl);\n\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false; // Set the handle\n    // If handle was provided, use it, otherwise create a new handle\n    // TODO - Stores the handle with context loss information\n    // this.glCount = glGetContextLossCount(this.gl);\n    // Default VertexArray needs to be created with null handle, so compare against undefined\n\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this._addStats();\n  }\n\n  _createClass(Resource, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.constructor.name, \"(\").concat(this.id, \")\");\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$deleteChildren = _ref.deleteChildren,\n          deleteChildren = _ref$deleteChildren === void 0 ? false : _ref$deleteChildren; // Delete this object, and get refs to any children\n\n\n      var children = this._handle && this._deleteHandle(this._handle);\n\n      this._handle = null;\n\n      this._removeStats(); // Optionally, recursively delete the children\n\n\n      if (children && deleteChildren) {\n        children.filter(Boolean).forEach(function (child) {\n          child.delete();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var funcOrHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.handle;\n\n      if (typeof funcOrHandle !== 'function') {\n        this._bindHandle(funcOrHandle);\n\n        return this;\n      }\n\n      var value;\n\n      if (!this._bound) {\n        this._bindHandle(this.handle);\n\n        this._bound = true;\n        value = funcOrHandle();\n        this._bound = false;\n\n        this._bindHandle(null);\n      } else {\n        value = funcOrHandle();\n      }\n\n      return value;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      this.bind(null);\n    }\n    /**\n     * Query a Resource parameter\n     *\n     * @param {GLenum} pname\n     * @return {GLint|GLfloat|GLenum} param\n     */\n\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {}; // Use parameter definitions to handle unsupported parameters\n\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl); // Check if we can query for this parameter\n\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          var webgl1Default = parameter.webgl1;\n          var webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n          var defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n          return defaultValue;\n        }\n      } // If unknown parameter - Could be a valid parameter not covered by PARAMS\n      // Attempt to query for it and let WebGL report errors\n\n\n      return this._getParameter(pname, opts);\n    } // Many resources support a getParameter call -\n    // getParameters will get all parameters - slow but useful for debugging\n    // eslint-disable-next-line complexity\n\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _ref2 = {},\n          parameters = _ref2.parameters,\n          keys = _ref2.keys; // Get parameter definitions for this Resource\n\n      var PARAMETERS = this.constructor.PARAMETERS || {};\n      var isWebgl2 = isWebGL2(this.gl);\n      var values = {}; // Query all parameters if no list provided\n\n      var parameterKeys = parameters || Object.keys(PARAMETERS); // WEBGL limits\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = parameterKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pname = _step.value;\n          var parameter = PARAMETERS[pname]; // Check if this parameter is available on this platform\n\n          var parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n          if (parameterAvailable) {\n            var key = keys ? getKey(this.gl, pname) : pname;\n            values[key] = this.getParameter(pname, opts);\n\n            if (keys && parameter.type === 'GLenum') {\n              values[key] = getKey(this.gl, values[key]);\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return values;\n    }\n    /**\n     * Update a Resource setting\n     *\n     * @todo - cache parameter to avoid issuing WebGL calls?\n     *\n     * @param {GLenum} pname - parameter (GL constant, value or key)\n     * @param {GLint|GLfloat|GLenum} value\n     * @return {Resource} returns self to enable chaining\n     */\n\n  }, {\n    key: \"setParameter\",\n    value: function setParameter(pname, value) {\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {};\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl); // Check if this parameter is available on this platform\n\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          throw new Error('Parameter not available on this platform');\n        } // Handle string keys\n\n\n        if (parameter.type === 'GLenum') {\n          value = getKeyValue(value);\n        }\n      } // If unknown parameter - Could be a valid parameter not covered by PARAMS\n      // attempt to set it and let WebGL report errors\n\n\n      this._setParameter(pname, value);\n\n      return this;\n    }\n    /*\n     * Batch update resource parameters\n     * Assumes the subclass supports a setParameter call\n     */\n\n  }, {\n    key: \"setParameters\",\n    value: function setParameters(parameters) {\n      for (var pname in parameters) {\n        this.setParameter(pname, parameters[pname]);\n      }\n\n      return this;\n    } // Install stubs for removed methods\n\n  }, {\n    key: \"stubRemovedMethods\",\n    value: function stubRemovedMethods(className, version, methodNames) {\n      return _stubRemovedMethods(this, className, version, methodNames);\n    } // PUBLIC VIRTUAL METHODS\n\n  }, {\n    key: \"initialize\",\n    value: function initialize(opts) {} // PROTECTED METHODS - These must be overridden by subclass\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, opts) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n    /**\n     * @param {GLenum} pname\n     * @param {GLint|GLfloat|GLenum} param\n     * @return {Sampler} returns self to enable chaining\n     */\n\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, value) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_context\",\n    value: function _context() {\n      this.gl.luma = this.gl.luma || {};\n      return this.gl.luma;\n    }\n  }, {\n    key: \"_addStats\",\n    value: function _addStats() {\n      var name = this.constructor.name;\n      var stats = luma.stats;\n      stats.resourceCount = stats.resourceCount || 0;\n      stats.resourceMap = stats.resourceMap || {}; // Resource creation stats\n\n      stats.resourceCount++;\n      stats.resourceMap[name] = stats.resourceMap[name] || {\n        created: 0,\n        active: 0\n      };\n      stats.resourceMap[name].created++;\n      stats.resourceMap[name].active++;\n    }\n  }, {\n    key: \"_removeStats\",\n    value: function _removeStats() {\n      var name = this.constructor.name;\n      var stats = luma.stats;\n      stats.resourceMap[name].active--;\n    }\n  }, {\n    key: \"handle\",\n    get: function get() {\n      // TODO - Add context loss handling\n      // Will regenerate and reinitialize the handle if necessary\n      // const glCount = glGetContextLossCount(this.gl);\n      // if (this.glCount !== glCount) {\n      //   this._handle = this._createHandle(this.opts);\n      //   this._glCount = glCount;\n      //   // Reinitialize object\n      //   this.initialize(this.opts);\n      // }\n      return this._handle;\n    }\n  }]);\n\n  return Resource;\n}();\n\nexport { Resource as default };","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.installParameterDefinitions = installParameterDefinitions;\nexports.TEXTURE_PARAMETERS = exports.SAMPLER_PARAMETERS = exports.RENDERBUFFER_PARAMETERS = exports.PROGRAM_PARAMETERS = exports.FRAMEBUFFER_STATUS = exports.FRAMEBUFFER_ATTACHMENT_PARAMETERS = exports.FENCE_SYNC_PARAMETERS = exports.BUFFER_PARAMETERS = exports.GLboolean = exports.GLuint = exports.GLint = exports.GLfloat = exports.GLenum = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _BUFFER_PARAMETERS, _FRAMEBUFFER_STATUS, _PROGRAM_PARAMETERS, _RENDERBUFFER_PARAMET, _SAMPLER_PARAMETERS, _TEXTURE_PARAMETERS; // Parameter support.\n// Installs definitions that enable querying an object for all its parameters\n// with resource.getParameters(). This is mainly useful during debugging.\n// Note: Kept separate to avoid bundling in production applications\n// WebGL specification 'types'\n\n\nvar GLenum = 'GLenum';\nexports.GLenum = GLenum;\nvar GLfloat = 'GLfloat';\nexports.GLfloat = GLfloat;\nvar GLint = 'GLint';\nexports.GLint = GLint;\nvar GLuint = 'GLint';\nexports.GLuint = GLuint;\nvar GLboolean = 'GLboolean';\n/*\n TODO - will most likely remove some of these fields from the main struct\n but they can be useful for debugging/seer integration, so keep them here for now\nexport const DBG_PARAMETERS = {\n  blend: {\n    type: GLboolean,\n    params: GL.BLEND,\n    value: false,\n    setter: (gl, value) => value ? gl.enable(GL.BLEND) : gl.disable(GL.BLEND)\n  },\n\n  blendColor: {\n    type: new Float32Array(4),\n    value: new Float32Array([0, 0, 0, 0]),\n    params: GL.BLEND_COLOR,\n    setter: (gl, value) => gl.blendColor(...value)\n  },\n\n  blendEquation: {\n    type: [GLenum, GLenum],\n    object: ['rgb', 'alpha'],\n    alias: 'blendEquationSeparate',\n    value: [GL.FUNC_ADD, GL.FUNC_ADD],\n    params: [GL.BLEND_EQUATION_RGB, GL.BLEND_EQUATION_ALPHA],\n    setter: (gl, value) => gl.blendEquationSeparate(...value),\n    normalizeArgs: args => isArray(args) ? args : [args, args]\n  },\n\n  // blend func\n  blendFunc: {\n    type: [GLenum, GLenum, GLenum, GLenum],\n    object: ['srcRgb', 'dstRgb', 'srcAlpha', 'dstAlpha'],\n    value: [GL.ONE, GL.ZERO, GL.ONE, GL.ZERO],\n    params: [GL.BLEND_SRC_RGB, GL.BLEND_DST_RGB, GL.BLEND_SRC_ALPHA, GL.BLEND_DST_ALPHA],\n    setter: (gl, value) => gl.blendFuncSeparate(...value),\n    normalizeArgs: args => isArray(args) && args.length === 3 ? [...args, ...args] : args\n  },\n\n  clearColor: {\n    type: new Float32Array(4),\n    params: GL.COLOR_CLEAR_VALUE,\n    value: new Float32Array([0, 0, 0, 0]), // TBD\n    setter: (gl, value) => gl.clearColor(...value)\n  },\n\n  colorMask: {\n    type: [GLboolean, GLboolean, GLboolean, GLboolean],\n    params: GL.COLOR_WRITEMASK,\n    value: [true, true, true, true],\n    setter: (gl, value) => gl.colorMask(...value)\n  },\n\n  // TODO - We have a name clash here\n  cullFace: {\n    type: GLboolean,\n    params: GL.CULL_FACE,\n    value: false,\n    setter: (gl, value) => value ? gl.enable(GL.CULL_FACE) : gl.disable(GL.CULL_FACE)\n  },\n\n  cullFaceMode: {\n    type: GLenum,\n    params: GL.CULL_FACE_MODE,\n    value: GL.BACK,\n    setter: (gl, value) => gl.cullFace(value)\n  },\n\n  depthTest: {\n    type: GLboolean,\n    params: GL.DEPTH_TEST,\n    value: false,\n    setter: (gl, value) => value ? gl.enable(GL.DEPTH_TEST) : gl.disable(GL.DEPTH_TEST)\n  },\n\n  depthClearValue: {\n    type: GLfloat,\n    params: GL.DEPTH_CLEAR_VALUE,\n    value: 1,\n    setter: (gl, value) => gl.clearDepth(value)\n  },\n\n  depthFunc: {\n    type: GLenum,\n    params: GL.DEPTH_FUNC,\n    value: GL.LESS,\n    setter: (gl, value) => gl.depthFunc(value)\n  },\n\n  depthRange: {\n    type: new Float32Array(2),\n    object: ['min', 'max'],\n    params: GL.DEPTH_RANGE,\n    value: new Float32Array([0, 1]), // TBD\n    setter: (gl, value) => gl.depthRange(...value)\n  },\n\n  depthWritemask: {\n    type: GLboolean,\n    params: GL.DEPTH_WRITEMASK,\n    value: true,\n    setter: (gl, value) => gl.depthMask(value)\n  },\n\n  dither: {\n    type: GLboolean,\n    params: GL.DITHER,\n    value: true,\n    setter: (gl, value) => value ? gl.enable(GL.DITHER) : gl.disable(GL.DITHER)\n  },\n\n  fragmentShaderDerivativeHint: {\n    type: GLenum,\n    params: GL.FRAGMENT_SHADER_DERIVATIVE_HINT,\n    value: GL.DONT_CARE,\n    setter: (gl, value) => gl.hint(GL.FRAGMENT_SHADER_DERIVATIVE_HINT, value),\n    gl1: 'OES_standard_derivatives'\n  },\n\n  frontFace: {\n    type: GLenum,\n    params: GL.FRONT_FACE,\n    value: GL.CCW,\n    setter: (gl, value) => gl.frontFace(value)\n  },\n\n  // Hint for quality of images generated with glGenerateMipmap\n  generateMipmapHint: {\n    type: GLenum,\n    params: GL.GENERATE_MIPMAP_HINT,\n    value: GL.DONT_CARE,\n    setter: (gl, value) => gl.hint(GL.GENERATE_MIPMAP_HINT, value)\n  },\n\n  lineWidth: {\n    type: GLfloat,\n    params: GL.LINE_WIDTH,\n    value: 1,\n    setter: (gl, value) => gl.lineWidth(value)\n  },\n\n  polygonOffsetFill: {\n    type: GLboolean,\n    params: GL.POLYGON_OFFSET_FILL,\n    value: false,\n    setter: (gl, value) =>\n      value ? gl.enable(GL.POLYGON_OFFSET_FILL) : gl.disable(GL.POLYGON_OFFSET_FILL)\n  },\n\n  // Add small offset to fragment depth values (by factor  DZ + r  units)\n  // Useful for rendering hidden-line images, for applying decals to surfaces,\n  // and for rendering solids with highlighted edges.\n  // https://www.khronos.org/opengles/sdk/docs/man/xhtml/glPolygonOffset.xml\n  polygonOffset: {\n    type: [GLfloat, GLfloat],\n    object: ['factor', 'units'],\n    params: [GL.POLYGON_OFFSET_FACTOR, GL.POLYGON_OFFSET_UNITS],\n    value: [0, 0],\n    setter: (gl, value) => gl.polygonOffset(...value)\n  },\n\n  // TODO - enabling multisampling\n  // glIsEnabled with argument GL_SAMPLE_ALPHA_TO_COVERAGE\n  // glIsEnabled with argument GL_SAMPLE_COVERAGE\n\n  // specify multisample coverage parameters\n  // https://www.khronos.org/opengles/sdk/docs/man/xhtml/glSampleCoverage.xml\n  sampleCoverage: {\n    type: [GLfloat, GLboolean],\n    object: ['value', 'invert'],\n    params: [GL.SAMPLE_COVERAGE_VALUE, GL.SAMPLE_COVERAGE_INVERT],\n    value: [1.0, false],\n    setter: (gl, value) => gl.sampleCoverage(...value)\n  },\n\n  scissorTest: {\n    type: GLboolean,\n    params: GL.SCISSOR_TEST,\n    value: false,\n    setter: (gl, value) => value ? gl.enable(GL.SCISSOR_TEST) : gl.disable(GL.SCISSOR_TEST)\n  },\n\n  scissorBox: {\n    type: new Int32Array(4),\n    object: ['x', 'y', 'width', 'height'],\n    // When scissor test enabled we expect users to set correct scissor box,\n    // otherwise we default to following value array.\n    params: GL.SCISSOR_BOX,\n    value: new Int32Array([0, 0, 1024, 1024]),\n    setter: (gl, value) => gl.scissor(...value)\n  },\n\n  stencilTest: {\n    type: GLboolean,\n    params: GL.STENCIL_TEST,\n    value: false,\n    setter: (gl, value) => value ? gl.enable(GL.STENCIL_TEST) : gl.disable(GL.STENCIL_TEST)\n  },\n\n  // Sets index used when stencil buffer is cleared.\n  stencilClearValue: {\n    type: GLint,\n    params: GL.STENCIL_CLEAR_VALUE,\n    value: 0,\n    setter: (gl, value) => gl.clearStencil(value)\n  },\n\n  // Sets bit mask enabling writing of individual bits in the stencil planes\n  // https://www.khronos.org/opengles/sdk/docs/man/xhtml/glStencilMaskSeparate.xml\n  stencilMask: {\n    type: [GLuint, GLuint],\n    object: ['mask', 'backMask'],\n    value: [0xFFFFFFFF, 0xFFFFFFFF],\n    params: [GL.STENCIL_WRITEMASK, GL.STENCIL_BACK_WRITEMASK],\n    setter: (gl, value) => {\n      value = isArray(value) ? value : [value, value];\n      const [mask, backMask] = value;\n      gl.stencilMaskSeparate(GL.FRONT, mask);\n      gl.stencilMaskSeparate(GL.BACK, backMask);\n    }\n  },\n\n  // Set stencil testing function, reference value and mask for front and back\n  // https://www.khronos.org/opengles/sdk/docs/man/xhtml/glStencilFuncSeparate.xml\n  stencilFunc: {\n    type: [GLenum, GLint, GLuint, GLenum, GLint, GLuint],\n    object: [\n      'func', 'ref', 'valueMask', 'backFunc', 'backRef', 'backValueMask'\n    ],\n    value: [GL.ALWAYS, 0, 0xFFFFFFFF, GL.ALWAYS, 0, 0xFFFFFFFF],\n    params: [\n      // front\n      GL.STENCIL_FUNC,\n      GL.STENCIL_REF,\n      GL.STENCIL_VALUE_MASK,\n      // back\n      GL.STENCIL_BACK_FUNC,\n      GL.STENCIL_BACK_REF,\n      GL.STENCIL_BACK_VALUE_MASK\n    ],\n    setter: (gl, value) => {\n      const [func, ref, mask, backFunc, backRef, backMask] = value;\n      gl.stencilFuncSeparate(GL.FRONT, func, ref, mask);\n      gl.stencilFuncSeparate(GL.BACK, backFunc, backRef, backMask);\n    }\n  },\n\n  // Specifies the action to take when the stencil test fails, front and back.\n  // Stencil test fail action, depth test fail action, pass action\n  // GL.KEEP, GL.ZERO, GL.REPLACE, GL.INCR, GL.INCR_WRAP, GL.DECR, GL.DECR_WRAP,\n  // and GL.INVERT\n  // https://www.khronos.org/opengles/sdk/docs/man/xhtml/glStencilOpSeparate.xml\n  stencilOp: {\n    type: [GLenum, GLenum, GLenum, GLenum, GLenum, GLenum],\n    object: [\n      'fail', 'passDepthFail', 'passDepthPass',\n      'backFail', 'backPassDepthFail', 'backPassDepthPass'\n    ],\n    params: [\n      // front\n      GL.STENCIL_FAIL,\n      GL.STENCIL_PASS_DEPTH_FAIL,\n      GL.STENCIL_PASS_DEPTH_PASS,\n      // back\n      GL.STENCIL_BACK_FAIL,\n      GL.STENCIL_BACK_PASS_DEPTH_FAIL,\n      GL.STENCIL_BACK_PASS_DEPTH_PASS\n    ],\n    value: [GL.KEEP, GL.KEEP, GL.KEEP, GL.KEEP, GL.KEEP, GL.KEEP],\n    setter: (gl, value) => {\n      const [sfail, dpfail, dppass, backSfail, backDpfail, backDppass] = value;\n      gl.stencilOpSeparate(GL.FRONT, sfail, dpfail, dppass);\n      gl.stencilOpSeparate(GL.BACK, backSfail, backDpfail, backDppass);\n    }\n  },\n\n  viewport: {\n    type: new Int32Array(4),\n    object: ['x', 'y', 'width', 'height'],\n    // We use [0, 0, 1024, 1024] as default, but usually this is updated in each frame.\n    params: GL.VIEWPORT,\n    value: new Int32Array([0, 0, 1024, 1024]),\n    setter: (gl, value) => gl.viewport(...value)\n  },\n\n  // WEBGL1 PIXEL PACK/UNPACK MODES\n\n  // Packing of pixel data in memory (1,2,4,8)\n  [GL.PACK_ALIGNMENT]: {\n    type: GLint,\n    params: GL.PACK_ALIGNMENT,\n    value: 4,\n    setter: (gl, value) => gl.pixelStorei(GL.PACK_ALIGNMENT, value)\n  },\n  // Unpacking pixel data from memory(1,2,4,8)\n  [GL.UNPACK_ALIGNMENT]: {\n    type: GLint,\n    params: GL.UNPACK_ALIGNMENT,\n    value: 4,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_ALIGNMENT, value)\n  },\n  // Flip source data along its vertical axis\n  [GL.UNPACK_FLIP_Y_WEBGL]: {\n    type: GLboolean,\n    params: GL.UNPACK_FLIP_Y_WEBGL,\n    value: false,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_FLIP_Y_WEBGL, value)\n  },\n  // Multiplies the alpha channel into the other color channels\n  [GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL]: {\n    type: GLboolean,\n    params: GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL,\n    value: false,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL, value)\n  },\n  // Default color space conversion or no color space conversion.\n  [GL.UNPACK_COLORSPACE_CONVERSION_WEBGL]: {\n    type: GLenum,\n    params: GL.UNPACK_COLORSPACE_CONVERSION_WEBGL,\n    value: GL.BROWSER_DEFAULT_WEBGL,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_COLORSPACE_CONVERSION_WEBGL, value)\n  },\n\n  // WEBGL2 PIXEL PACK/UNPACK MODES\n\n  // Number of pixels in a row.\n  [GL.PACK_ROW_LENGTH]: {\n    type: GLint,\n    params: GL.PACK_ROW_LENGTH,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.PACK_ROW_LENGTH, value),\n    webgl2: true\n  },\n  // Number of pixels skipped before the first pixel is written into memory.\n  [GL.PACK_SKIP_PIXELS]: {\n    type: GLint,\n    params: GL.PACK_SKIP_PIXELS,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.PACK_SKIP_PIXELS, value),\n    webgl2: true\n  },\n  // Number of rows of pixels skipped before first pixel is written to memory.\n  [GL.PACK_SKIP_ROWS]: {\n    type: GLint,\n    params: GL.PACK_SKIP_ROWS,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.PACK_SKIP_ROWS, value),\n    webgl2: true\n  },\n  // Number of pixels in a row.\n  [GL.UNPACK_ROW_LENGTH]: {\n    type: GLint,\n    params: GL.UNPACK_ROW_LENGTH,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_ROW_LENGTH, value),\n    webgl2: true\n  },\n  // Image height used for reading pixel data from memory\n  [GL.UNPACK_IMAGE_HEIGHT]: {\n    type: GLint,\n    params: GL.UNPACK_IMAGE_HEIGHT,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_IMAGE_HEIGHT, value),\n    webgl2: true\n  },\n  // Number of pixel images skipped before first pixel is read from memory\n  [GL.UNPACK_SKIP_PIXELS]: {\n    type: GLint,\n    params: GL.UNPACK_SKIP_PIXELS,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_SKIP_PIXELS, value),\n    webgl2: true\n  },\n  // Number of rows of pixels skipped before first pixel is read from memory\n  [GL.UNPACK_SKIP_ROWS]: {\n    type: GLint,\n    params: GL.UNPACK_SKIP_ROWS,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_SKIP_ROWS, value),\n    webgl2: true\n  },\n  // Number of pixel images skipped before first pixel is read from memory\n  [GL.UNPACK_SKIP_IMAGES]: {\n    type: GLint,\n    params: GL.UNPACK_SKIP_IMAGES,\n    value: 0,\n    setter: (gl, value) => gl.pixelStorei(GL.UNPACK_SKIP_IMAGES, value),\n    webgl2: true\n  }\n};\n*/\n\nexports.GLboolean = GLboolean;\nvar BUFFER_PARAMETERS = (_BUFFER_PARAMETERS = {}, (0, _defineProperty2.default)(_BUFFER_PARAMETERS, 34660, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_BUFFER_PARAMETERS, 34661, {\n  webgl1: 0 // GLenum indicating the usage pattern of the buffer.\n\n}), _BUFFER_PARAMETERS);\nexports.BUFFER_PARAMETERS = BUFFER_PARAMETERS;\nvar FENCE_SYNC_PARAMETERS = [37138, // GLenum, type of sync object (always GL.SYNC_FENCE).\n37140, // GLenum, status of sync object (GL.SIGNALED/GL.UNSIGNALED)\n37139, // GLenum. object condition (always GL.SYNC_GPU_COMMANDS_COMPLETE).\n37141 // GLenum, flags sync object was created with (always 0)\n];\nexports.FENCE_SYNC_PARAMETERS = FENCE_SYNC_PARAMETERS;\nvar FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, // WebGLRenderbuffer or WebGLTexture\n36048, // GL.RENDERBUFFER, GL.TEXTURE, GL.NONE\n36051, // GL.TEXTURE_CUBE_MAP_POSITIVE_X, etc.\n36050, // GLint\n// EXT_sRGB or WebGL2\n33296, // GL.LINEAR, GL.SRBG\n// WebGL2\n36052, // GLint\n33298, // GLint\n33299, // GLint\n33300, // GLint\n33301, // GLint\n33302, // GLint\n33303, // GLint\n33297 // GL.FLOAT, GL.INT, GL.UNSIGNED_INT, GL.SIGNED_NORMALIZED, OR GL.UNSIGNED_NORMALIZED.\n];\nexports.FRAMEBUFFER_ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\nvar FRAMEBUFFER_STATUS = (_FRAMEBUFFER_STATUS = {}, (0, _defineProperty2.default)(_FRAMEBUFFER_STATUS, 36053, 'Success. Framebuffer is correctly set up'), (0, _defineProperty2.default)(_FRAMEBUFFER_STATUS, 36054, 'Framebuffer attachment types mismatched or some attachment point not attachment complete'), (0, _defineProperty2.default)(_FRAMEBUFFER_STATUS, 36055, 'Framebuffer has no attachment'), (0, _defineProperty2.default)(_FRAMEBUFFER_STATUS, 36057, 'Framebuffer attachments do not have the same size'), (0, _defineProperty2.default)(_FRAMEBUFFER_STATUS, 36061, 'Framebuffer attachment format not supported or depth and stencil attachments are not same'), (0, _defineProperty2.default)(_FRAMEBUFFER_STATUS, 36182, 'Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures'), _FRAMEBUFFER_STATUS);\nexports.FRAMEBUFFER_STATUS = FRAMEBUFFER_STATUS;\nvar PROGRAM_PARAMETERS = (_PROGRAM_PARAMETERS = {}, (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35712, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35714, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35715, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35717, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35721, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35718, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35967, {\n  webgl2: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35971, {\n  webgl2: 0\n}), (0, _defineProperty2.default)(_PROGRAM_PARAMETERS, 35382, {\n  webgl2: 0 // GLint\n\n}), _PROGRAM_PARAMETERS); //  parameters\n\nexports.PROGRAM_PARAMETERS = PROGRAM_PARAMETERS;\nvar RENDERBUFFER_PARAMETERS = (_RENDERBUFFER_PARAMET = {}, (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36162, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36163, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36164, {\n  type: 'GLenum',\n  webgl1: 32854\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36177, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36178, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36176, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36179, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36180, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36181, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_RENDERBUFFER_PARAMET, 36011, {\n  webgl2: 1\n}), _RENDERBUFFER_PARAMET);\nexports.RENDERBUFFER_PARAMETERS = RENDERBUFFER_PARAMETERS;\nvar SAMPLER_PARAMETERS = (_SAMPLER_PARAMETERS = {}, (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 10240, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 10241, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 10242, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 10243, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 32882, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 33084, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 33085, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 34893, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 34892, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 33082, {\n  webgl2: true\n}), (0, _defineProperty2.default)(_SAMPLER_PARAMETERS, 33083, {\n  webgl2: true // maximum level-of-detail value\n  // [GL.TEXTURE_MAX_ANISOTROPY_EXT]: {webgl2: 'EXT_texture_filter_anisotropic'}\n\n}), _SAMPLER_PARAMETERS); // const SHADER_PARAMETERS = [\n//   GL.DELETE_STATUS, // GLboolean - whether shader is flagged for deletion.\n//   GL.COMPILE_STATUS, // GLboolean - was last shader compilation successful.\n//   GL.SHADER_TYPE // GLenum - GL.VERTEX_SHADER or GL.FRAGMENT_SHADER.\n// ];\n\nexports.SAMPLER_PARAMETERS = SAMPLER_PARAMETERS;\nvar TEXTURE_PARAMETERS = (_TEXTURE_PARAMETERS = {}, (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 10240, {\n  type: 'GLenum',\n  webgl1: 9729\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 10241, {\n  type: 'GLenum',\n  webgl1: 9986\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 10242, {\n  type: 'GLenum',\n  webgl1: 10497\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 10243, {\n  type: 'GLenum',\n  webgl1: 10497\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 32882, {\n  type: 'GLenum',\n  webgl2: 10497\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 33084, {\n  webgl2: 0\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 33085, {\n  webgl2: 1000\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 34893, {\n  type: 'GLenum',\n  webgl2: 515\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 34892, {\n  type: 'GLenum',\n  webgl2: 0\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 33082, {\n  webgl2: -1000\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 33083, {\n  webgl2: 1000\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 4096, {\n  webgl1: 0\n}), (0, _defineProperty2.default)(_TEXTURE_PARAMETERS, 4097, {\n  webgl1: 0\n}), _TEXTURE_PARAMETERS); // TODO - separate install parameter definitions function from api metadata\n\n/*\nimport Buffer from '../buffer';\nimport FenceSync from '../fence-sync';\nimport Framebuffer from '../framebuffer';\nimport Program from '../program';\nimport Renderbuffer from '../renderbuffer';\nimport Sampler from '../sampler';\n// import Shader from './shader';\nimport Texture from '../texture';\n*/\n\nexports.TEXTURE_PARAMETERS = TEXTURE_PARAMETERS;\n\nfunction installParameterDefinitions() {// Buffer.PARAMETERS = BUFFER_PARAMETERS;\n  // FenceSync.PARAMETERS = FENCE_SYNC_PARAMETERS;\n  // Framebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n  // Framebuffer.STATUS = FRAMEBUFFER_STATUS;\n  // Program.PARAMETERS = PROGRAM_PARAMETERS;\n  // Renderbuffer.PARAMETERS = RENDERBUFFER_PARAMETERS;\n  // Sampler.PARAMETERS = SAMPLER_PARAMETERS;\n  // // Shader.PARAMETERS = SHADER_PARAMETERS;\n  // Texture.PARAMETERS = TEXTURE_PARAMETERS;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport { isWebGL2, assertWebGL2Context } from '../webgl-utils';\nimport { withParameters } from '../webgl-context/context-state';\nimport Texture from '../webgl/texture';\nimport Buffer from './buffer';\n\nvar Texture3D = /*#__PURE__*/function (_Texture) {\n  _inherits(Texture3D, _Texture);\n\n  _createClass(Texture3D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n    /**\n     * @classdesc\n     * 3D WebGL Texture\n     * Note: Constructor will initialize your texture.\n     *\n     * @class\n     * @param {WebGLRenderingContext} gl - gl context\n     * @param {Image|ArrayBuffer|null} opts= - named options\n     * @param {Image|ArrayBuffer|null} opts.data= - buffer\n     * @param {GLint} width - width of texture\n     * @param {GLint} height - height of texture\n     */\n\n  }]);\n\n  function Texture3D(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture3D);\n\n    assertWebGL2Context(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture3D).call(this, gl, Object.assign({}, opts, {\n      target: opts.target || 32879\n    })));\n    _this.width = null;\n    _this.height = null;\n    _this.depth = null;\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this.setImageData(opts);\n\n    if (opts.generateMipmap) {\n      _this.generateMipmap();\n    }\n\n    return _this;\n  }\n\n  _createClass(Texture3D, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.opts = Object.assign({}, this.opts, opts);\n      var _this$opts = this.opts,\n          pixels = _this$opts.pixels,\n          settings = _this$opts.settings;\n\n      if (settings) {\n        withParameters(settings, function () {\n          if (pixels) {\n            _this2.setImage3D(_this2.opts);\n          }\n        });\n        this.setParameters(opts);\n      }\n    } // WebGL2\n    // Image 3D copies from Typed Array or WebGLBuffer\n\n  }, {\n    key: \"setImage3D\",\n    value: function setImage3D(_ref) {\n      var _ref$level = _ref.level,\n          level = _ref$level === void 0 ? 0 : _ref$level,\n          _ref$internalformat = _ref.internalformat,\n          internalformat = _ref$internalformat === void 0 ? 6408 : _ref$internalformat,\n          width = _ref.width,\n          height = _ref.height,\n          _ref$depth = _ref.depth,\n          depth = _ref$depth === void 0 ? 1 : _ref$depth,\n          _ref$border = _ref.border,\n          border = _ref$border === void 0 ? 0 : _ref$border,\n          format = _ref.format,\n          _ref$type = _ref.type,\n          type = _ref$type === void 0 ? 5121 : _ref$type,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          pixels = _ref.pixels;\n\n      if (ArrayBuffer.isView(pixels)) {\n        this.gl.texImage3D(this.target, level, internalformat, width, height, depth, border, format, type, pixels);\n        return;\n      }\n\n      if (pixels instanceof Buffer) {\n        this.gl.bindBuffer(35052, pixels.handle);\n        this.gl.texImage3D(this.target, level, internalformat, width, height, depth, border, format, type, offset);\n        this.gl.bindBuffer(35052, pixels.handle);\n      }\n    }\n  }]);\n\n  return Texture3D;\n}(Texture);\n\nexport { Texture3D as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","var $ = require('../internals/export');\n\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar BUGGY = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, forced: BUGGY }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  hypot: function hypot(value1, value2) {\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import { headlessGL } from '../webgl-utils/webgl-types';\nvar ERR_HEADLESSGL_NOT_AVAILABLE = 'Failed to create WebGL context in Node.js, headless gl not available';\nvar ERR_HEADLESSGL_FAILED = 'Failed to create WebGL context in Node.js, headless gl returned null'; // Create headless gl context (for running under Node.js)\n\nexport function createHeadlessContext(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      opts = _ref.opts,\n      onError = _ref.onError;\n  var webgl1 = opts.webgl1,\n      webgl2 = opts.webgl2;\n\n  if (webgl2 && !webgl1) {\n    return onError('headless-gl does not support WebGL2');\n  }\n\n  if (!headlessGL) {\n    return onError(ERR_HEADLESSGL_NOT_AVAILABLE);\n  }\n\n  var gl = headlessGL(width, height, opts);\n\n  if (!gl) {\n    return onError(ERR_HEADLESSGL_FAILED);\n  }\n\n  return gl;\n}","// Resizing a webgl canvas\n\n/* global window, document */\nimport { isBrowser } from '../utils';\nvar isPage = isBrowser && typeof document !== 'undefined';\nvar isPageLoaded = isPage && document.readyState === 'complete';\nvar pageLoadPromise;\n/**\n * Returns a promise that resolves when the page is loaded\n * at this point the DOM can be manipulated, and e.g. a new canvas can be inserted\n * @return {Promise} - resolves when the page is loaded\n */\n\nexport function getPageLoadPromise() {\n  if (!pageLoadPromise) {\n    pageLoadPromise = isPage ? new Promise(function (resolve, reject) {\n      if (isPage && document.readyState === 'complete') {\n        isPageLoaded = true;\n        resolve(document);\n        return;\n      }\n\n      window.onload = function () {\n        isPageLoaded = true;\n        resolve(document);\n      };\n    }) : Promise.resolve({});\n  }\n\n  return pageLoadPromise;\n}\n/**\n * Create a canvas\n * @param {Number} width - set to 100%\n * @param {Number} height - set to 100%\n */\n\nexport function createCanvas(_ref) {\n  var _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 600 : _ref$height,\n      _ref$id = _ref.id,\n      id = _ref$id === void 0 ? 'gl-canvas' : _ref$id,\n      _ref$insert = _ref.insert,\n      insert = _ref$insert === void 0 ? true : _ref$insert;\n  var canvas = document.createElement('canvas');\n  canvas.id = id;\n  canvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n  canvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%'; // add the canvas to the body element once the page has loaded\n\n  if (insert) {\n    var body = document.body;\n    body.insertBefore(canvas, body.firstChild); // getPageLoadPromise().then(document => {});\n  }\n\n  return canvas;\n}\nexport function getCanvas(_ref2) {\n  var canvas = _ref2.canvas,\n      width = _ref2.width,\n      height = _ref2.height,\n      _ref2$onError = _ref2.onError,\n      onError = _ref2$onError === void 0 ? function () {} : _ref2$onError;\n  var targetCanvas;\n\n  if (typeof canvas === 'string') {\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = createCanvas({\n      id: 'lumagl-canvas',\n      width: width,\n      height: height,\n      onError: onError\n    });\n  }\n\n  return targetCanvas;\n}","/**\n * Create a WebGL context for a canvas\n * Note calling this multiple time on the same canvas does return the same context\n */\nexport function createBrowserContext(_ref) {\n  var canvas = _ref.canvas,\n      _ref$opts = _ref.opts,\n      opts = _ref$opts === void 0 ? {} : _ref$opts,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? function (message) {\n    return null;\n  } : _ref$onError; // Try to extract any extra information about why context creation failed\n\n  function onContextCreationError(error) {\n    onError(\"WebGL context: \".concat(error.statusMessage || 'Unknown error'));\n  }\n\n  canvas.addEventListener('webglcontextcreationerror', onContextCreationError, false);\n  var _opts$webgl = opts.webgl1,\n      webgl1 = _opts$webgl === void 0 ? true : _opts$webgl,\n      _opts$webgl2 = opts.webgl2,\n      webgl2 = _opts$webgl2 === void 0 ? true : _opts$webgl2;\n  var gl = null; // Prefer webgl2 over webgl1, prefer conformant over experimental\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', opts);\n    gl = gl || canvas.getContext('experimental-webgl2', opts);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', opts);\n    gl = gl || canvas.getContext('experimental-webgl', opts);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onContextCreationError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context\"));\n  }\n\n  return gl;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\"; // Depends on Khronos Debug support module being imported via \"luma.gl/debug\"\n\nimport { global } from '../utils/globals';\nimport { log } from '../utils'; // Helper to get shared context data\n\nfunction getContextData(gl) {\n  gl.luma = gl.luma || {};\n  return gl.luma;\n} // Enable or disable debug checks in debug contexts\n// Non-debug contexts do not have checks (to ensure performance)\n// Turning off debug for debug contexts removes most of the performance penalty\n\n\nexport function enableDebug(debug) {\n  log.debug = debug;\n} // Returns (a potentially new) context with debug instrumentation turned off or on.\n// Note that this actually returns a new context\n\nexport function makeDebugContext(gl) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$debug = _ref.debug,\n      debug = _ref$debug === void 0 ? true : _ref$debug;\n\n  if (gl === null) {\n    // Return to ensure we don't create a context in this case.\n    return null;\n  }\n\n  return debug ? getDebugContext(gl) : getRealContext(gl);\n} // Returns the real context from either of the real/debug contexts\n\nexport function getRealContext(gl) {\n  if (gl === null) {\n    // Return to ensure we don't create a context in this case.\n    return null;\n  }\n\n  var data = getContextData(gl); // If the context has a realContext member, it is a debug context so return the realContext\n\n  return data.realContext ? data.realContext : gl;\n} // Returns the debug context from either of the real/debug contexts\n\nexport function getDebugContext(gl) {\n  if (gl === null) {\n    // Return to ensure we don't create a context in this case.\n    return null;\n  }\n\n  if (!global.WebGLDebug) {\n    log.warn('WebGL debug mode not activated. import \"luma.gl/debug\" to enable.')();\n    return gl;\n  }\n\n  var data = getContextData(gl); // If this *is* a debug context, return itself\n\n  if (data.realContext) {\n    return gl;\n  } // If this already has a debug context, return it.\n\n\n  if (data.debugContext) {\n    return data.debugContext;\n  } // Create a new debug context\n\n\n  var WebGLDebugContext = function WebGLDebugContext() {\n    _classCallCheck(this, WebGLDebugContext);\n  };\n\n  var debugContext = global.WebGLDebug.makeDebugContext(gl, onGLError, onValidateGLFunc);\n  Object.assign(WebGLDebugContext.prototype, debugContext); // Store the debug context\n\n  data.debugContext = debugContext;\n  debugContext.debug = true;\n  debugContext.gl = gl;\n  log.info('debug context actived.'); // Return it\n\n  return debugContext;\n} // DEBUG TRACING\n\nfunction getFunctionString(functionName, functionArgs) {\n  var args = global.WebGLDebug.glFunctionArgsToString(functionName, functionArgs);\n  args = \"\".concat(args.slice(0, 100)).concat(args.length > 100 ? '...' : '');\n  return \"gl.\".concat(functionName, \"(\").concat(args, \")\");\n}\n\nfunction onGLError(err, functionName, args) {\n  var errorMessage = global.WebGLDebug.glEnumToString(err);\n  var functionArgs = global.WebGLDebug.glFunctionArgsToString(functionName, args);\n  var message = \"\".concat(errorMessage, \" in gl.\").concat(functionName, \"(\").concat(functionArgs, \")\");\n\n  if (log.throw) {\n    throw new Error(message);\n  } else {\n    log.error(message)();\n    debugger; // eslint-disable-line\n  }\n} // Don't generate function string until it is needed\n\n\nfunction onValidateGLFunc(functionName, functionArgs) {\n  var functionString;\n\n  if (log.priority >= 4) {\n    functionString = getFunctionString(functionName, functionArgs);\n    log.log(4, functionString)();\n  }\n\n  if (log.break) {\n    functionString = functionString || getFunctionString(functionName, functionArgs);\n    var isBreakpoint = log.break && log.break.every(function (breakOn) {\n      return functionString.indexOf(breakOn) !== -1;\n    });\n\n    if (isBreakpoint) {\n      debugger; // eslint-disable-line\n    }\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = functionArgs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var arg = _step.value;\n\n      if (arg === undefined) {\n        functionString = functionString || getFunctionString(functionName, functionArgs);\n\n        if (log.throw) {\n          throw new Error(\"Undefined argument: \".concat(functionString));\n        } else {\n          log.error(\"Undefined argument: \".concat(functionString));\n          debugger; // eslint-disable-line\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL_LIMITS;\n/* eslint-disable no-inline-comments, max-len */\n\n\nimport { isWebGL2 } from '../webgl-utils';\nvar WEBGL_LIMITS = (_WEBGL_LIMITS = {}, _defineProperty(_WEBGL_LIMITS, 33902, {\n  gl1: new Float32Array([1, 1])\n}), _defineProperty(_WEBGL_LIMITS, 33901, {\n  gl1: new Float32Array([1, 1])\n}), _defineProperty(_WEBGL_LIMITS, 3379, {\n  gl1: 64,\n  gl2: 2048\n}), _defineProperty(_WEBGL_LIMITS, 34076, {\n  gl1: 16\n}), _defineProperty(_WEBGL_LIMITS, 34930, {\n  gl1: 8\n}), _defineProperty(_WEBGL_LIMITS, 35661, {\n  gl1: 8\n}), _defineProperty(_WEBGL_LIMITS, 35660, {\n  gl1: 0\n}), _defineProperty(_WEBGL_LIMITS, 34024, {\n  gl1: 1\n}), _defineProperty(_WEBGL_LIMITS, 36348, {\n  gl1: 8\n}), _defineProperty(_WEBGL_LIMITS, 34921, {\n  gl1: 8\n}), _defineProperty(_WEBGL_LIMITS, 36347, {\n  gl1: 128\n}), _defineProperty(_WEBGL_LIMITS, 36349, {\n  gl1: 16\n}), _defineProperty(_WEBGL_LIMITS, 3386, {\n  gl1: new Int32Array([0, 0])\n}), _defineProperty(_WEBGL_LIMITS, 32883, {\n  gl1: 0,\n  gl2: 256\n}), _defineProperty(_WEBGL_LIMITS, 35071, {\n  gl1: 0,\n  gl2: 256\n}), _defineProperty(_WEBGL_LIMITS, 37447, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 36063, {\n  gl1: 0,\n  gl2: 4\n}), _defineProperty(_WEBGL_LIMITS, 35379, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35374, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35377, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 34852, {\n  gl1: 0,\n  gl2: 4\n}), _defineProperty(_WEBGL_LIMITS, 36203, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 33001, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 33000, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 37157, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35373, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35657, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 36183, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 37137, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 34045, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35978, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35979, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35968, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35376, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35375, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35659, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 37154, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35371, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35658, {\n  gl1: 0,\n  gl2: 0\n}), _defineProperty(_WEBGL_LIMITS, 35076, {\n  gl1: 0,\n  gl2: -8,\n  negative: true\n}), _defineProperty(_WEBGL_LIMITS, 35077, {\n  gl1: 0,\n  gl2: 7\n}), _defineProperty(_WEBGL_LIMITS, 35380, {\n  gl1: 0,\n  gl2: 0 // GLint\n\n}), _WEBGL_LIMITS);\nexport function getContextLimits(gl) {\n  gl.luma = gl.luma || {};\n\n  if (!gl.luma.limits) {\n    gl.luma.limits = {};\n    gl.luma.webgl1MinLimits = {};\n    gl.luma.webgl2MinLimits = {};\n    var isWebgl2 = isWebGL2(gl); // WEBGL limits\n\n    for (var parameter in WEBGL_LIMITS) {\n      var limit = WEBGL_LIMITS[parameter];\n      var webgl1MinLimit = limit.gl1;\n      var webgl2MinLimit = 'gl2' in limit ? limit.gl2 : limit.gl1;\n      var minLimit = isWebgl2 ? webgl2MinLimit : webgl1MinLimit; // Check if we can query for this limit\n\n      var limitNotAvailable = 'gl2' in limit && !isWebgl2 || 'extension' in limit && !gl.getExtension(limit.extension);\n      var value = limitNotAvailable ? minLimit : gl.getParameter(parameter);\n      gl.luma.limits[parameter] = value;\n      gl.luma.webgl1MinLimits[parameter] = webgl1MinLimit;\n      gl.luma.webgl2MinLimits[parameter] = webgl2MinLimit;\n    }\n  }\n\n  return gl.luma.limits;\n}\nexport function getGLContextInfo(gl) {\n  gl.luma = gl.luma || {};\n\n  if (!gl.luma.info) {\n    var _gl$luma$info;\n\n    var info = gl.getExtension('WEBGL_debug_renderer_info');\n    gl.luma.info = (_gl$luma$info = {}, _defineProperty(_gl$luma$info, 7936, gl.getParameter(7936)), _defineProperty(_gl$luma$info, 7937, gl.getParameter(7937)), _defineProperty(_gl$luma$info, 37445, gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || 7936)), _defineProperty(_gl$luma$info, 37446, gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || 7937)), _defineProperty(_gl$luma$info, 7938, gl.getParameter(7938)), _defineProperty(_gl$luma$info, 35724, gl.getParameter(35724)), _gl$luma$info);\n  }\n\n  return gl.luma.info;\n}\nvar GL_UNMASKED_VENDOR_WEBGL = 0x9245; // vendor string of the graphics driver.\n\nvar GL_UNMASKED_RENDERER_WEBGL = 0x9246; // renderer string of the graphics driver.\n\nexport function getGLContextInfo2(gl) {\n  var vendorMasked = gl.getParameter(7936);\n  var rendererMasked = gl.getParameter(7937);\n  var ext = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  var rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked: vendorMasked,\n    rendererMasked: rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function getContextInfo(gl) {\n  var limits = getContextLimits(gl);\n  var info = getGLContextInfo(gl);\n  return {\n    // basic information\n    vendor: info[GL_UNMASKED_VENDOR_WEBGL] || info[7936],\n    renderer: info[GL_UNMASKED_RENDERER_WEBGL] || info[7937],\n    version: info[7938],\n    shadingLanguageVersion: info[35724],\n    // info, caps and limits\n    info: info,\n    limits: limits,\n    webgl1MinLimits: gl.luma.webgl1MinLimits,\n    webgl2MinLimits: gl.luma.webgl2MinLimits\n  };\n} // DEBUG INFO\n\n/**\n * Provides strings identifying the GPU vendor and driver.\n * https://www.khronos.org/registry/webgl/extensions/WEBGL_debug_renderer_info/\n * @param {WebGLRenderingContext} gl - context\n * @return {Object} - 'vendor' and 'renderer' string fields.\n */\n\nexport function glGetDebugInfo(gl) {\n  return getGLContextInfo2(gl); // const info = gl.getExtension('WEBGL_debug_renderer_info');\n  // // We can't determine if 'WEBGL_debug_renderer_info' is supported by\n  // // checking whether info is null here. Firefox doesn't follow the\n  // // specs by returning null for unsupported extension. Instead,\n  // // it returns an object without GL_UNMASKED_VENDOR_WEBGL and GL_UNMASKED_RENDERER_WEBGL.\n  // return {\n  //   vendor: (info && info.UNMASKED_VENDOR_WEBGL) ?\n  //     gl.getParameter(info.UNMASKED_VENDOR_WEBGL) : 'unknown',\n  //   renderer: (info && info.UNMASKED_RENDERER_WEBGL) ?\n  //     gl.getParameter(info.UNMASKED_RENDERER_WEBGL) : 'unknown'\n  // };\n}\nexport var TEST_EXPORTS = {\n  WEBGL_LIMITS: WEBGL_LIMITS\n};","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; //\n// Internal class that helps \"asynchronous WebGL query objects\" manage\n// pending requests (e.g. for EXT_disjoint_timer_query and WebGL2 queries)\n//\n// Creates and manages promises for the queries.\n// Tracks pending queries enabling polling.\n// Tracks pending queries enabling invalidation.\n// Provides some standard error messages.\n//\n// Remarks:\n// - Maintains a minimal list of pending queries only to minimize GC impact\n// - Exported as a singleton class instance.\n\nvar ERR_DELETED = 'Query was deleted before result was available';\nvar ERR_CANCEL = 'Query was canceled before result was available';\n\nvar noop = function noop(x) {\n  return x;\n};\n\nvar QueryManager = /*#__PURE__*/function () {\n  function QueryManager() {\n    _classCallCheck(this, QueryManager);\n\n    this.pendingQueries = new Set();\n    this.invalidQueryType = null;\n    this.invalidErrorMessage = '';\n\n    this.checkInvalid = function () {\n      return false;\n    };\n  } // API THAT SHOULD BE EXPOSED TO APPLICATION\n  // Checks invalidation callback and then all pending queries for completion\n  // Should only be called once per tick\n\n\n  _createClass(QueryManager, [{\n    key: \"poll\",\n    value: function poll(gl) {\n      this.cancelInvalidQueries(gl); // Now check availability of results and resolve promises as appropriate\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.pendingQueries.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var query = _step.value;\n          var resultAvailable = query.isResultAvailable();\n\n          if (resultAvailable) {\n            var result = query.getResult();\n            this.resolveQuery(query, result);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    } // API FOR MANAGED QUERY CLASSES\n    // Registers query invalidation method - used to detect disjoint timer queries\n\n  }, {\n    key: \"setInvalidator\",\n    value: function setInvalidator(_ref) {\n      var queryType = _ref.queryType,\n          errorMessage = _ref.errorMessage,\n          checkInvalid = _ref.checkInvalid;\n      this.invalidQueryType = queryType;\n      this.invalidErrorMessage = errorMessage;\n      this.checkInvalid = checkInvalid;\n    } // Starts a query, sets up a new promise\n\n  }, {\n    key: \"beginQuery\",\n    value: function beginQuery(query) {\n      var onComplete = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var onError = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop; // Make sure disjoint state is cleared, so that this query starts fresh\n      // Cancel other queries if needed\n\n      this.cancelInvalidQueries(query.gl); // Cancel current promise - noop if already resolved or rejected\n\n      this.cancelQuery(query); // Create a new promise with attached resolve and reject methods\n\n      var resolvers = {};\n      query.promise = new Promise(function (resolve, reject) {\n        resolvers.resolve = resolve;\n        resolvers.reject = reject;\n      });\n      Object.assign(query.promise, resolvers); // Add this query to the pending queries\n\n      this.pendingQueries.add(query); // Register the callbacks\n\n      return query.promise.then(onComplete).catch(onError);\n    } // Resolves a query with a result\n\n  }, {\n    key: \"resolveQuery\",\n    value: function resolveQuery(query, result) {\n      this.pendingQueries.delete(query);\n      query.promise.resolve(result);\n    } // Rejects the promise\n\n  }, {\n    key: \"rejectQuery\",\n    value: function rejectQuery(query, errorMessage) {\n      this.pendingQueries.delete(query);\n\n      if (query.promise) {\n        query.promise.reject(new Error(errorMessage));\n      }\n    } // Rejects promise with standard message for Query.delete()\n\n  }, {\n    key: \"deleteQuery\",\n    value: function deleteQuery(query) {\n      return this.rejectQuery(query, ERR_DELETED);\n    } // Rejects promise with standard message for Query.cancel()\n\n  }, {\n    key: \"cancelQuery\",\n    value: function cancelQuery(query) {\n      return this.rejectQuery(query, ERR_CANCEL);\n    } // Rejects promise with registered message for invalidation\n\n  }, {\n    key: \"invalidateQuery\",\n    value: function invalidateQuery(query) {\n      if (query instanceof this.invalidQueryType) {\n        this.rejectQuery(query, this.invalidErrorMessage);\n      }\n    } // Checks all queries to see if need to be invalidated\n\n  }, {\n    key: \"cancelInvalidQueries\",\n    value: function cancelInvalidQueries(gl) {\n      // We assume that we can cancel queries for all context.\n      // Should be OK since this is used to check for \"disjoint\" GPU state\n      if (this.checkInvalid(gl)) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = this.pendingQueries.values()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var query = _step2.value;\n            this.invalidateQuery(query);\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }\n    }\n  }]);\n\n  return QueryManager;\n}();\n\nexport default new QueryManager();","/* eslint-disable quotes */\n// WebGLRenderingContext related methods\nimport { WebGLRenderingContext, WebGL2RenderingContext } from '../webgl-utils';\nimport { createHeadlessContext } from './create-headless-context';\nimport { getCanvas } from './create-canvas';\nimport { createBrowserContext } from './create-browser-context';\nimport trackContextState from './track-context-state';\nimport { makeDebugContext } from './debug-context';\nimport { glGetDebugInfo } from './context-limits';\nimport queryManager from '../webgl-utils/query-manager';\nimport { log as _log, isBrowser } from '../utils';\nimport assert from '../utils/assert'; // Heuristic testing of contexts (to indentify debug wrappers around gl contexts)\n\nvar GL_ARRAY_BUFFER = 0x8892;\nvar GL_TEXTURE_BINDING_3D = 0x806a;\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2'; // HACK: avoid use of `gl` parameter name to defeat GL constant inliner, which invalidates check\n\nexport function isWebGL(glContext) {\n  return Boolean(glContext && (glContext instanceof WebGLRenderingContext || glContext.ARRAY_BUFFER === GL_ARRAY_BUFFER));\n} // HACK: avoid use of `gl` parameter name to defeat GL constant inliner, which invalidates check\n\nexport function isWebGL2(glContext) {\n  return Boolean(glContext && (glContext instanceof WebGL2RenderingContext || glContext.TEXTURE_BINDING_3D === GL_TEXTURE_BINDING_3D));\n}\nexport function assertWebGLContext(gl) {\n  // Need to handle debug context\n  assert(isWebGL(gl), ERR_CONTEXT);\n}\nexport function assertWebGL2Context(gl) {\n  // Need to handle debug context\n  assert(isWebGL2(gl), ERR_WEBGL2);\n}\nvar contextDefaults = {\n  // COMMON CONTEXT PARAMETERS\n  // Attempt to allocate WebGL2 context\n  webgl2: true,\n  // Attempt to create a WebGL2 context (false to force webgl1)\n  webgl1: true,\n  // Attempt to create a WebGL1 context (false to fail if webgl2 not available)\n  throwOnFailure: true,\n  manageState: true,\n  // BROWSER CONTEXT PARAMETERS\n  canvas: null,\n  // A canvas element or a canvas string id\n  debug: false,\n  // Instrument context (at the expense of performance)\n  // HEADLESS CONTEXT PARAMETERS\n  width: 800,\n  // width are height are only used by headless gl\n  height: 600 // WEBGL/HEADLESS CONTEXT PARAMETERS\n  // Remaining options are passed through to context creator\n\n};\n/*\n * Change default context creation parameters.\n * Main use case is regression test suite.\n */\n\nexport function setContextDefaults() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  Object.assign(contextDefaults, {\n    width: 1,\n    height: 1\n  }, opts);\n}\n/*\n * Creates a context giving access to the WebGL API\n */\n\n/* eslint-disable complexity, max-statements */\n\nexport function createGLContext() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  opts = Object.assign({}, contextDefaults, opts);\n  var _opts = opts,\n      canvas = _opts.canvas,\n      width = _opts.width,\n      height = _opts.height,\n      throwOnError = _opts.throwOnError,\n      manageState = _opts.manageState,\n      debug = _opts.debug; // Error reporting function, enables exceptions to be disabled\n\n  function onError(message) {\n    if (throwOnError) {\n      throw new Error(message);\n    } // log.log(0, message)();\n\n\n    return null;\n  }\n\n  var gl;\n\n  if (isBrowser) {\n    // Get or create a canvas\n    var targetCanvas = getCanvas({\n      canvas: canvas,\n      width: width,\n      height: height,\n      onError: onError\n    }); // Create a WebGL context in the canvas\n\n    gl = createBrowserContext({\n      canvas: targetCanvas,\n      opts: opts\n    });\n  } else {\n    // Create a headless-gl context under Node.js\n    gl = createHeadlessContext({\n      width: width,\n      height: height,\n      opts: opts,\n      onError: onError\n    });\n  }\n\n  if (!gl) {\n    return null;\n  } // Install context state tracking\n\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: function log() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _log.log.apply(_log, [1].concat(args))();\n      }\n    });\n  } // Add debug instrumentation to the context\n\n\n  if (isBrowser && debug) {\n    gl = makeDebugContext(gl, {\n      debug: debug\n    }); // Debug forces log level to at least 1\n\n    _log.priority = Math.max(_log.priority, 1); // Log some debug info about the context\n  } // Log context information\n\n\n  logInfo(gl); // Add to seer integration\n\n  return gl;\n}\nexport function destroyGLContext(gl) {\n  // TODO - Remove from seer integration\n  // TODO - Unregister any tracking/polyfills\n  // There is no way to delete browser based context\n  // Destroy headless gl context\n  var ext = gl.getExtension('STACKGL_destroy_context');\n\n  if (ext) {\n    ext.destroy();\n  }\n}\n/**\n * Resize the canvas' drawing buffer.\n *\n * Can match the canvas CSS size, and optionally also consider devicePixelRatio\n * Can be called every frame\n *\n * Regardless of size, the drawing buffer will always be scaled to the viewport, but\n * for best visual results, usually set to either:\n *  canvas CSS width x canvas CSS height\n *  canvas CSS width * devicePixelRatio x canvas CSS height * devicePixelRatio\n * See http://webgl2fundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html\n *\n * resizeGLContext(gl, {width, height, useDevicePixels})\n */\n\nexport function resizeGLContext(gl) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; // Resize browser context\n\n  if (gl.canvas) {\n    /* global window */\n    var devicePixelRatio = opts.useDevicePixels ? window.devicePixelRatio || 1 : 1;\n    var width = \"width\" in opts ? opts.width : gl.canvas.clientWidth;\n    var height = \"height\" in opts ? opts.height : gl.canvas.clientHeight;\n    gl.canvas.width = width * devicePixelRatio;\n    gl.canvas.height = height * devicePixelRatio;\n    return;\n  } // Resize headless gl context\n\n\n  var ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in opts && \"height\" in opts) {\n    ext.resize(opts.width, opts.height);\n  }\n} // POLLING FOR PENDING QUERIES\n// Calling this function checks all pending queries for completion\n\nexport function pollGLContext(gl) {\n  queryManager.poll(gl);\n} // HELPER METHODS\n\nfunction logInfo(gl) {\n  var webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  var info = glGetDebugInfo(gl);\n  var driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  var debug = gl.debug ? ' debug' : '';\n\n  _log.once(0, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}","// Feature detection for WebGL\n//\n// Provides a function that enables simple checking of which WebGL features are\n// available in an WebGL1 or WebGL2 environment.\n\n/* eslint-disable no-inline-comments, max-len */\nimport { isWebGL2 } from '../webgl-utils';\nimport { isOldIE } from '../utils';\nimport assert from '../utils/assert'; // Defines luma.gl \"feature\" names and semantics\n\nvar WEBGL_FEATURES = {\n  // API SUPPORT\n  VERTEX_ARRAY_OBJECT: ['OES_vertex_array_object', true],\n  TIMER_QUERY: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  INSTANCED_RENDERING: ['ANGLE_instanced_arrays', true],\n  MULTIPLE_RENDER_TARGETS: ['WEBGL_draw_buffers', true],\n  // FEATURES\n  ELEMENT_INDEX_UINT32: ['OES_element_index_uint', true],\n  BLEND_EQUATION_MINMAX: ['EXT_blend_minmax', true],\n  // TEXTURES, RENDERBUFFERS\n  COLOR_ENCODING_SRGB: ['EXT_sRGB', true],\n  // TEXTURES\n  TEXTURE_DEPTH: ['WEBGL_depth_texture', true],\n  TEXTURE_FLOAT: ['OES_texture_float', true],\n  TEXTURE_HALF_FLOAT: ['OES_texture_half_float', true],\n  TEXTURE_FILTER_LINEAR_FLOAT: ['OES_texture_float_linear'],\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: ['OES_texture_half_float_linear'],\n  TEXTURE_FILTER_ANISOTROPIC: ['EXT_texture_filter_anisotropic'],\n  // FRAMEBUFFERS, TEXTURES AND RENDERBUFFERS\n  COLOR_ATTACHMENT_RGBA32F: ['WEBGL_color_buffer_float', 'EXT_color_buffer_float'],\n  COLOR_ATTACHMENT_FLOAT: [false, 'EXT_color_buffer_float'],\n  COLOR_ATTACHMENT_HALF_FLOAT: [false, 'EXT_color_buffer_half_float'],\n  // GLSL extensions\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n}; // Create a key-mirrored FEATURES array\n\nvar FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(function (key) {\n  FEATURES[key] = key;\n});\nexport { FEATURES }; // Enables feature detection in IE11 due to a bug where gl.getExtension may return true\n// but fail to compile when the extension is enabled in the shader. Specifically,\n// the OES_standard_derivatives extension fails to compile in IE11 even though its included\n// in the list of supported extensions.\n\nvar compiledGlslExtensions = {}; // opts allows user agent to be overridden for testing\n\nexport function canCompileGLGSExtension(gl, cap) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  var extensionName = feature[0];\n  var source = \"#extension GL_\".concat(extensionName, \" : enable\\nvoid main(void) {}\");\n  var shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n} // TODO - cache the value\n\nfunction getFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap); // Get extension name from table\n\n  var extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0]; // Check if the value is dependent on checking an extension\n\n  var value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n} // capability can be a WebGL extension name or a luma capability name\n\n\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return getFeature(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n\n  if (!gl.luma.caps) {\n    gl.luma.caps = {};\n    gl.luma.caps.webgl2 = isWebGL2(gl);\n\n    for (var cap in WEBGL_FEATURES) {\n      gl.luma.caps[cap] = getFeature(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\nexport var TEST_EXPORTS = {\n  WEBGL_FEATURES: WEBGL_FEATURES\n};","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport { parseGLSLCompilerError, getShaderName } from '../webgl-utils';\nimport { assertWebGLContext } from '../webgl-utils';\nimport { uid, log } from '../utils';\nimport assert from '../utils/assert';\nvar ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nvar GL_FRAGMENT_SHADER = 0x8b30;\nvar GL_VERTEX_SHADER = 0x8b31;\nvar GL_COMPILE_STATUS = 0x8b81;\nvar GL_SHADER_TYPE = 0x8b4f; // For now this is an internal class\n\nexport var Shader = /*#__PURE__*/function (_Resource) {\n  _inherits(Shader, _Resource);\n\n  _createClass(Shader, null, [{\n    key: \"getTypeName\",\n    value: function getTypeName(shaderType) {\n      switch (shaderType) {\n        case GL_VERTEX_SHADER:\n          return 'vertex-shader';\n\n        case GL_FRAGMENT_SHADER:\n          return 'fragment-shader';\n\n        default:\n          assert(false);\n          return 'unknown';\n      }\n    }\n    /* eslint-disable max-statements */\n\n  }]);\n\n  function Shader(gl, props) {\n    var _this;\n\n    _classCallCheck(this, Shader);\n\n    assertWebGLContext(gl); // Validate arguments\n\n    assert(typeof props.source === 'string', ERR_SOURCE); // Deduce an id, from shader source, or supplied id, or shader type\n\n    var id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Shader).call(this, gl, {\n      id: id\n    }));\n    _this.shaderType = props.shaderType;\n    _this.source = props.source;\n\n    _this.initialize(props);\n\n    return _this;\n  }\n\n  _createClass(Shader, [{\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var source = _ref.source;\n      var shaderName = getShaderName(source, null);\n\n      if (shaderName) {\n        this.id = uid(shaderName);\n      }\n\n      this._compile(source);\n    } // Accessors\n\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      return this.gl.getShaderParameter(this.handle, pname);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.getTypeName(this.shaderType), \":\").concat(this.id);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return getShaderName(this.source) || 'unnamed-shader';\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.gl.getShaderSource(this.handle);\n    } // Debug method - Returns translated source if available\n\n  }, {\n    key: \"getTranslatedSource\",\n    value: function getTranslatedSource() {\n      var extension = this.gl.getExtension('WEBGL_debug_shaders');\n      return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_compile\",\n    value: function _compile() {\n      this.gl.shaderSource(this.handle, this.source);\n      this.gl.compileShader(this.handle); // TODO - For performance reasons, avoid checking shader compilation errors on production?\n      // TODO - Load log even when no error reported, to catch warnings?\n      // https://gamedev.stackexchange.com/questions/30429/how-to-detect-glsl-warnings\n\n      var compileStatus = this.getParameter(GL_COMPILE_STATUS);\n\n      if (!compileStatus) {\n        var infoLog = this.gl.getShaderInfoLog(this.handle);\n\n        var _parseGLSLCompilerErr = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id),\n            shaderName = _parseGLSLCompilerErr.shaderName,\n            errors = _parseGLSLCompilerErr.errors,\n            warnings = _parseGLSLCompilerErr.warnings;\n\n        log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n        log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n        throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n      }\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteShader(this.handle);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      return {\n        type: this.getParameter(GL_SHADER_TYPE),\n        source: this.getSource()\n      };\n    }\n  }]);\n\n  return Shader;\n}(Resource);\nexport var VertexShader = /*#__PURE__*/function (_Shader) {\n  _inherits(VertexShader, _Shader);\n\n  function VertexShader(gl, props) {\n    _classCallCheck(this, VertexShader); // DEPRECATED: Support old constructor signature: VertexShader(gl, source)\n\n\n    if (typeof props === 'string') {\n      log.deprecated('new FragmentShader(gl, source)', 'new FragmentShader(gl, {source})', '6.1');\n      props = {\n        source: props\n      };\n    }\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(VertexShader).call(this, gl, Object.assign({}, props, {\n      shaderType: GL_VERTEX_SHADER\n    })));\n  } // PRIVATE METHODS\n\n\n  _createClass(VertexShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(GL_VERTEX_SHADER);\n    }\n  }]);\n\n  return VertexShader;\n}(Shader);\nexport var FragmentShader = /*#__PURE__*/function (_Shader2) {\n  _inherits(FragmentShader, _Shader2);\n\n  function FragmentShader(gl, props) {\n    _classCallCheck(this, FragmentShader); // DEPRECATED: Support old constructor signature: FragmentShader(gl, source)\n\n\n    if (typeof props === 'string') {\n      log.deprecated('new FragmentShader(gl, source)', 'new FragmentShader(gl, {source})', '6.1');\n      props = {\n        source: props\n      };\n    }\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FragmentShader).call(this, gl, Object.assign({}, props, {\n      shaderType: GL_FRAGMENT_SHADER\n    })));\n  } // PRIVATE METHODS\n\n\n  _createClass(FragmentShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(GL_FRAGMENT_SHADER);\n    }\n  }]);\n\n  return FragmentShader;\n}(Shader);","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _RENDERBUFFER_FORMATS;\n/* eslint-disable no-inline-comments */\n\n\nimport { isWebGL2 } from '../webgl-utils';\nimport Resource from './resource';\nimport assert from '../utils/assert'; // Define local GL constants to optimize minification\n\nvar GL_RENDERBUFFER = 0x8d41;\nvar GL_SAMPLES = 0x80a9;\nvar GL_RENDERBUFFER_WIDTH = 0x8d42;\nvar GL_RENDERBUFFER_HEIGHT = 0x8d43;\nvar GL_RENDERBUFFER_INTERNAL_FORMAT = 0x8d44;\nvar GL_RENDERBUFFER_SAMPLES = 0x8cab; // Define local extension strings to optimize minification\n// const SRGB = 'EXT_sRGB';\n// const CB_FLOAT_WEBGL1 = 'WEBGL_color_buffer_float';\n\nvar CB_FLOAT_WEBGL2 = 'EXT_color_buffer_float'; // const CB_HALF_FLOAT_WEBGL1 = 'EXT_color_buffer_half_float';\n\nexport var RENDERBUFFER_FORMATS = (_RENDERBUFFER_FORMATS = {}, _defineProperty(_RENDERBUFFER_FORMATS, 33189, {}), _defineProperty(_RENDERBUFFER_FORMATS, 33190, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36012, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36168, {}), _defineProperty(_RENDERBUFFER_FORMATS, 34041, {}), _defineProperty(_RENDERBUFFER_FORMATS, 35056, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36013, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 32854, {}), _defineProperty(_RENDERBUFFER_FORMATS, 36194, {}), _defineProperty(_RENDERBUFFER_FORMATS, 32855, {}), _defineProperty(_RENDERBUFFER_FORMATS, 33321, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33330, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33329, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33332, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33331, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33334, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33333, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33323, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33336, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33335, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33338, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33337, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33340, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33339, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 32849, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 32856, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 32857, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36220, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36238, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36975, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36214, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36232, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36226, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 36208, {\n  gl2: true\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33325, {\n  gl2: CB_FLOAT_WEBGL2\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33327, {\n  gl2: CB_FLOAT_WEBGL2\n}), _defineProperty(_RENDERBUFFER_FORMATS, 34842, {\n  gl2: CB_FLOAT_WEBGL2\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33326, {\n  gl2: CB_FLOAT_WEBGL2\n}), _defineProperty(_RENDERBUFFER_FORMATS, 33328, {\n  gl2: CB_FLOAT_WEBGL2\n}), _defineProperty(_RENDERBUFFER_FORMATS, 34836, {\n  gl2: CB_FLOAT_WEBGL2\n}), _defineProperty(_RENDERBUFFER_FORMATS, 35898, {\n  gl2: CB_FLOAT_WEBGL2\n}), _RENDERBUFFER_FORMATS);\n\nfunction isFormatSupported(gl, format, formats) {\n  var info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nvar Renderbuffer = /*#__PURE__*/function (_Resource) {\n  _inherits(Renderbuffer, _Resource);\n\n  _createClass(Renderbuffer, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          format = _ref.format;\n\n      return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n    }\n  }, {\n    key: \"getSamplesForFormat\",\n    value: function getSamplesForFormat(gl, _ref2) {\n      var format = _ref2.format; // Polyfilled to return [0] under WebGL1\n\n      return gl.getInternalformatParameter(GL_RENDERBUFFER, format, GL_SAMPLES);\n    }\n  }]);\n\n  function Renderbuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Renderbuffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Renderbuffer).call(this, gl, opts));\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // Creates and initializes a renderbuffer object's data store\n\n\n  _createClass(Renderbuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref3) {\n      var format = _ref3.format,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height,\n          _ref3$samples = _ref3.samples,\n          samples = _ref3$samples === void 0 ? 0 : _ref3$samples;\n      assert(format, 'Needs format');\n      this.gl.bindRenderbuffer(GL_RENDERBUFFER, this.handle);\n\n      if (samples !== 0 && isWebGL2(this.gl)) {\n        this.gl.renderbufferStorageMultisample(GL_RENDERBUFFER, samples, format, width, height);\n      } else {\n        this.gl.renderbufferStorage(GL_RENDERBUFFER, format, width, height);\n      } // this.gl.bindRenderbuffer(GL_RENDERBUFFER, null);\n\n\n      this.format = format;\n      this.width = width;\n      this.height = height;\n      this.samples = samples;\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref4) {\n      var width = _ref4.width,\n          height = _ref4.height; // Don't resize if width/height haven't changed\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          samples: this.samples\n        });\n      }\n\n      return this;\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createRenderbuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteRenderbuffer(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindRenderbuffer(GL_RENDERBUFFER, handle);\n    }\n  }, {\n    key: \"_syncHandle\",\n    value: function _syncHandle(handle) {\n      this.format = this.getParameter(GL_RENDERBUFFER_INTERNAL_FORMAT);\n      this.width = this.getParameter(GL_RENDERBUFFER_WIDTH);\n      this.height = this.getParameter(GL_RENDERBUFFER_HEIGHT);\n      this.samples = this.getParameter(GL_RENDERBUFFER_SAMPLES);\n    } // @param {Boolean} opt.autobind=true - method call will bind/unbind object\n    // @returns {GLenum|GLint} - depends on pname\n\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindRenderbuffer(GL_RENDERBUFFER, this.handle);\n      var value = this.gl.getRenderbufferParameter(GL_RENDERBUFFER, pname); // this.gl.bindRenderbuffer(GL_RENDERBUFFER, null);\n\n      return value;\n    }\n  }]);\n\n  return Renderbuffer;\n}(Resource);\n\nexport { Renderbuffer as default };","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { withParameters } from '../webgl-context/context-state';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport assert from '../utils/assert'; // Should collapse during minification\n\nvar GL_DEPTH_BUFFER_BIT = 0x00000100;\nvar GL_STENCIL_BUFFER_BIT = 0x00000400;\nvar GL_COLOR_BUFFER_BIT = 0x00004000;\nvar GL_COLOR = 0x1800;\nvar GL_DEPTH = 0x1801;\nvar GL_STENCIL = 0x1802;\nvar GL_DEPTH_STENCIL = 0x84f9; // Should disappear if asserts are removed\n\nvar ERR_ARGUMENTS = 'clear: bad arguments'; // Optionally clears depth, color and stencil buffers\n\nexport function clear(gl) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$framebuffer = _ref.framebuffer,\n      framebuffer = _ref$framebuffer === void 0 ? null : _ref$framebuffer,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? null : _ref$color,\n      _ref$depth = _ref.depth,\n      depth = _ref$depth === void 0 ? null : _ref$depth,\n      _ref$stencil = _ref.stencil,\n      stencil = _ref$stencil === void 0 ? null : _ref$stencil;\n\n  var parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  var clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS); // Temporarily set any clear \"colors\" and call clear\n\n  withParameters(gl, parameters, function () {\n    gl.clear(clearFlags);\n  });\n} // WebGL2 - clear a specific drawing buffer\n\nexport function clearBuffer(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$framebuffer = _ref2.framebuffer,\n      framebuffer = _ref2$framebuffer === void 0 ? null : _ref2$framebuffer,\n      _ref2$buffer = _ref2.buffer,\n      buffer = _ref2$buffer === void 0 ? GL_COLOR : _ref2$buffer,\n      _ref2$drawBuffer = _ref2.drawBuffer,\n      drawBuffer = _ref2$drawBuffer === void 0 ? 0 : _ref2$drawBuffer,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? [0, 0, 0, 0] : _ref2$value;\n\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    // Method selection per OpenGL ES 3 docs\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        var _value = _slicedToArray(value, 2),\n            depth = _value[0],\n            stencil = _value[1];\n\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}","import assert from '../utils/assert'; // Returns number of components in a specific readPixels WebGL format\n\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n    // TODO: Add support for additional WebGL2 formats\n\n    default:\n      assert(false);\n      return 0;\n  }\n} // Return byte count for given readPixels WebGL type\n\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n    // TODO: Add support for additional WebGL2 types\n\n    default:\n      assert(false);\n      return 0;\n  }\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport Buffer from './buffer';\nimport { clear as _clear, clearBuffer } from './clear';\nimport { withParameters } from '../webgl-context';\nimport { getFeatures } from '../webgl-context/context-features';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { isWebGL2, assertWebGL2Context } from '../webgl-utils';\nimport { flipRows, scalePixels } from '../webgl-utils';\nimport { glKey } from '../webgl-utils/constants-to-keys';\nimport { log as _log } from '../utils';\nimport assert from '../utils/assert';\nvar ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\n\nvar Framebuffer = /*#__PURE__*/function (_Resource) {\n  _inherits(Framebuffer, _Resource);\n\n  _createClass(Framebuffer, [{\n    key: \"MAX_COLOR_ATTACHMENTS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS);\n    }\n  }, {\n    key: \"MAX_DRAW_BUFFERS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS);\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          colorBufferFloat = _ref.colorBufferFloat,\n          colorBufferHalfFloat = _ref.colorBufferHalfFloat;\n\n      var supported = true;\n      supported = colorBufferFloat && gl.getExtension(isWebGL2(gl) ? 'EXT_color_buffer_float' : 'WEBGL.color_buffer_float');\n      supported = colorBufferHalfFloat && gl.getExtension(isWebGL2(gl) ? 'EXT_color_buffer_float' : 'EXT_color_buffer_half_float');\n      return supported;\n    } // Create a Framebuffer wrapper for the default framebuffer (target === null)\n\n  }, {\n    key: \"getDefaultFramebuffer\",\n    value: function getDefaultFramebuffer(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n        id: 'default-framebuffer',\n        handle: null,\n        attachments: {}\n      }); // TODO - can we query for and get a handle to the GL.FRONT renderbuffer?\n\n      return gl.luma.defaultFramebuffer;\n    }\n  }]);\n\n  function Framebuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Framebuffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Framebuffer).call(this, gl, opts)); // Public members\n\n    _this.width = null;\n    _this.height = null;\n    _this.attachments = {};\n    _this.readBuffer = 36064;\n    _this.drawBuffers = [36064];\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Framebuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref2) {\n      var _ref2$width = _ref2.width,\n          width = _ref2$width === void 0 ? 1 : _ref2$width,\n          _ref2$height = _ref2.height,\n          height = _ref2$height === void 0 ? 1 : _ref2$height,\n          _ref2$attachments = _ref2.attachments,\n          attachments = _ref2$attachments === void 0 ? null : _ref2$attachments,\n          _ref2$color = _ref2.color,\n          color = _ref2$color === void 0 ? true : _ref2$color,\n          _ref2$depth = _ref2.depth,\n          depth = _ref2$depth === void 0 ? true : _ref2$depth,\n          _ref2$stencil = _ref2.stencil,\n          stencil = _ref2$stencil === void 0 ? false : _ref2$stencil,\n          _ref2$check = _ref2.check,\n          check = _ref2$check === void 0 ? true : _ref2$check,\n          readBuffer = _ref2.readBuffer,\n          drawBuffers = _ref2.drawBuffers;\n      assert(width >= 0 && height >= 0, 'Width and height need to be integers'); // Store actual width and height for diffing\n\n      this.width = width;\n      this.height = height; // Resize any provided attachments - note that resize only resizes if needed\n      // Note: A framebuffer has no separate size, it is defined by its attachments (which must agree)\n\n      if (attachments) {\n        for (var attachment in attachments) {\n          var target = attachments[attachment];\n          var object = Array.isArray(target) ? target[0] : target;\n          object.resize({\n            width: width,\n            height: height\n          });\n        }\n      } else {\n        // Create any requested default attachments\n        attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n      }\n\n      this.update({\n        clearAttachments: true,\n        attachments: attachments,\n        readBuffer: readBuffer,\n        drawBuffers: drawBuffers\n      }); // Checks that framebuffer was properly set up, if not, throws an explanatory error\n\n      if (attachments && check) {\n        this.checkStatus();\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref3) {\n      var _ref3$attachments = _ref3.attachments,\n          attachments = _ref3$attachments === void 0 ? {} : _ref3$attachments,\n          readBuffer = _ref3.readBuffer,\n          drawBuffers = _ref3.drawBuffers,\n          _ref3$clearAttachment = _ref3.clearAttachments,\n          clearAttachments = _ref3$clearAttachment === void 0 ? false : _ref3$clearAttachment,\n          _ref3$resizeAttachmen = _ref3.resizeAttachments,\n          resizeAttachments = _ref3$resizeAttachmen === void 0 ? true : _ref3$resizeAttachmen;\n      this.attach(attachments, {\n        clearAttachments: clearAttachments,\n        resizeAttachments: resizeAttachments\n      });\n      var gl = this.gl; // Multiple render target support, set read buffer and draw buffers\n\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n      if (readBuffer) {\n        this._setReadBuffer(readBuffer);\n      }\n\n      if (drawBuffers) {\n        this._setDrawBuffers(drawBuffers);\n      }\n\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    } // Attachment resize is expected to be a noop if size is same\n\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          width = _ref4.width,\n          height = _ref4.height; // for default framebuffer, just update the stored size\n\n\n      if (this.handle === null) {\n        assert(width === undefined && height === undefined);\n        this.width = this.gl.drawingBufferWidth;\n        this.height = this.gl.drawingBufferHeight;\n        return this;\n      }\n\n      if (width === undefined) {\n        width = this.gl.drawingBufferWidth;\n      }\n\n      if (height === undefined) {\n        height = this.gl.drawingBufferHeight;\n      }\n\n      if (width !== this.width && height !== this.height) {\n        _log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height));\n      }\n\n      for (var attachmentPoint in this.attachments) {\n        this.attachments[attachmentPoint].resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n      return this;\n    } // Attach from a map of attachments\n\n  }, {\n    key: \"attach\",\n    value: function attach(attachments) {\n      var _this2 = this;\n\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$clearAttachment = _ref5.clearAttachments,\n          clearAttachments = _ref5$clearAttachment === void 0 ? false : _ref5$clearAttachment,\n          _ref5$resizeAttachmen = _ref5.resizeAttachments,\n          resizeAttachments = _ref5$resizeAttachmen === void 0 ? true : _ref5$resizeAttachmen;\n\n      var newAttachments = {}; // Any current attachments need to be removed, add null values to map\n\n      if (clearAttachments) {\n        Object.keys(this.attachments).forEach(function (key) {\n          newAttachments[key] = null;\n        });\n      } // Overlay the new attachments\n\n\n      Object.assign(newAttachments, attachments);\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle); // Walk the attachments\n\n      for (var key in newAttachments) {\n        // Ensure key is not undefined\n        assert(key !== undefined, 'Misspelled framebuffer binding point?');\n        var attachment = Number(key);\n        var descriptor = newAttachments[attachment];\n        var object = descriptor;\n\n        if (!object) {\n          this._unattach(attachment);\n        } else if (object instanceof Renderbuffer) {\n          this._attachRenderbuffer({\n            attachment: attachment,\n            renderbuffer: object\n          });\n        } else if (Array.isArray(descriptor)) {\n          var _descriptor = _slicedToArray(descriptor, 3),\n              texture = _descriptor[0],\n              _descriptor$ = _descriptor[1],\n              layer = _descriptor$ === void 0 ? 0 : _descriptor$,\n              _descriptor$2 = _descriptor[2],\n              level = _descriptor$2 === void 0 ? 0 : _descriptor$2;\n\n          object = texture;\n\n          this._attachTexture({\n            attachment: attachment,\n            texture: texture,\n            layer: layer,\n            level: level\n          });\n        } else {\n          this._attachTexture({\n            attachment: attachment,\n            texture: object,\n            layer: 0,\n            level: 0\n          });\n        } // Resize objects\n\n\n        if (resizeAttachments && object) {\n          object.resize({\n            width: this.width,\n            height: this.height\n          });\n        }\n      }\n\n      this.gl.bindFramebuffer(36160, prevHandle || null); // Assign to attachments and remove any nulls to get a clean attachment map\n\n      Object.assign(this.attachments, attachments);\n      Object.keys(this.attachments).filter(function (key) {\n        return !_this2.attachments[key];\n      }).forEach(function (key) {\n        delete _this2.attachments[key];\n      });\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus() {\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n      var status = gl.checkFramebufferStatus(36160);\n      gl.bindFramebuffer(36160, prevHandle || null);\n\n      if (status !== 36053) {\n        throw new Error(_getFrameBufferStatus(status));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          color = _ref6.color,\n          depth = _ref6.depth,\n          stencil = _ref6.stencil,\n          _ref6$drawBuffers = _ref6.drawBuffers,\n          drawBuffers = _ref6$drawBuffers === void 0 ? [] : _ref6$drawBuffers; // Bind framebuffer and delegate to global clear functions\n\n\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      if (color || depth || stencil) {\n        _clear(this.gl, {\n          color: color,\n          depth: depth,\n          stencil: stencil\n        });\n      }\n\n      drawBuffers.forEach(function (value, drawBuffer) {\n        clearBuffer({\n          drawBuffer: drawBuffer,\n          value: value\n        });\n      });\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    } // NOTE: Slow requires roundtrip to GPU\n    // App can provide pixelArray or have it auto allocated by this method\n    // @returns {Uint8Array|Uint16Array|FloatArray} - pixel array,\n    //  newly allocated by this method unless provided by app.\n\n  }, {\n    key: \"readPixels\",\n    value: function readPixels() {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$x = _ref7.x,\n          x = _ref7$x === void 0 ? 0 : _ref7$x,\n          _ref7$y = _ref7.y,\n          y = _ref7$y === void 0 ? 0 : _ref7$y,\n          _ref7$width = _ref7.width,\n          width = _ref7$width === void 0 ? this.width : _ref7$width,\n          _ref7$height = _ref7.height,\n          height = _ref7$height === void 0 ? this.height : _ref7$height,\n          _ref7$format = _ref7.format,\n          format = _ref7$format === void 0 ? 6408 : _ref7$format,\n          type = _ref7.type,\n          _ref7$pixelArray = _ref7.pixelArray,\n          pixelArray = _ref7$pixelArray === void 0 ? null : _ref7$pixelArray,\n          _ref7$attachment = _ref7.attachment,\n          attachment = _ref7$attachment === void 0 ? 36064 : _ref7$attachment;\n\n      var gl = this.gl; // TODO - Set and unset gl.readBuffer\n\n      if (attachment === 36064 && this.handle === null) {\n        attachment = 1028;\n      }\n\n      assert(this.attachments[attachment]); // Deduce the type from color attachment if not provided.\n\n      type = type || this.attachments[attachment].type; // Deduce type and allocated pixelArray if needed\n\n      if (!pixelArray) {\n        // Allocate pixel array if not already available, using supplied type\n        type = type || 5121;\n        var ArrayType = getTypedArrayFromGLType(type, {\n          clamped: false\n        });\n        var components = glFormatToComponents(format); // TODO - check for composite type (components = 1).\n\n        pixelArray = pixelArray || new ArrayType(width * height * components);\n      } // Pixel array available, if necessary, deduce type from it.\n\n\n      type = type || getGLTypeFromTypedArray(pixelArray);\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n      this.gl.readPixels(x, y, width, height, format, type, pixelArray);\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      return pixelArray;\n    } // Reads data into provided buffer object asynchronously\n    // This function doesn't wait for copy to be complete, it programs GPU to perform a DMA transffer.\n\n  }, {\n    key: \"readPixelsToBuffer\",\n    value: function readPixelsToBuffer(_ref8) {\n      var _ref8$x = _ref8.x,\n          x = _ref8$x === void 0 ? 0 : _ref8$x,\n          _ref8$y = _ref8.y,\n          y = _ref8$y === void 0 ? 0 : _ref8$y,\n          _ref8$width = _ref8.width,\n          width = _ref8$width === void 0 ? this.width : _ref8$width,\n          _ref8$height = _ref8.height,\n          height = _ref8$height === void 0 ? this.height : _ref8$height,\n          _ref8$format = _ref8.format,\n          format = _ref8$format === void 0 ? 6408 : _ref8$format,\n          type = _ref8.type,\n          _ref8$buffer = _ref8.buffer,\n          buffer = _ref8$buffer === void 0 ? null : _ref8$buffer,\n          _ref8$byteOffset = _ref8.byteOffset,\n          byteOffset = _ref8$byteOffset === void 0 ? 0 : _ref8$byteOffset;\n      var gl = this.gl; // Asynchronus read (PIXEL_PACK_BUFFER) is WebGL2 only feature\n\n      assertWebGL2Context(gl); // deduce type if not available.\n\n      type = type || (buffer ? buffer.type : 5121);\n\n      if (!buffer) {\n        // Create new buffer with enough size\n        var components = glFormatToComponents(format);\n        var byteCount = glTypeToBytes(type);\n        var bytes = byteOffset + width * height * components * byteCount;\n        buffer = new Buffer(gl, {\n          bytes: bytes,\n          type: type,\n          size: components\n        });\n      }\n\n      buffer.bind({\n        target: 35051\n      });\n      withParameters(gl, {\n        framebuffer: this\n      }, function () {\n        gl.readPixels(x, y, width, height, format, type, byteOffset);\n      });\n      buffer.unbind({\n        target: 35051\n      });\n      return buffer;\n    } // Reads pixels as a dataUrl\n\n  }, {\n    key: \"copyToDataUrl\",\n    value: function copyToDataUrl() {\n      var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref9$attachment = _ref9.attachment,\n          attachment = _ref9$attachment === void 0 ? 36064 : _ref9$attachment,\n          _ref9$maxHeight = _ref9.maxHeight,\n          maxHeight = _ref9$maxHeight === void 0 ? Number.MAX_SAFE_INTEGER : _ref9$maxHeight;\n\n      var data = this.readPixels({\n        attachment: attachment\n      }); // Scale down\n\n      var width = this.width,\n          height = this.height;\n\n      while (height > maxHeight) {\n        var _scalePixels = scalePixels({\n          data: data,\n          width: width,\n          height: height\n        });\n\n        data = _scalePixels.data;\n        width = _scalePixels.width;\n        height = _scalePixels.height;\n      } // Flip to top down coordinate system\n\n\n      flipRows({\n        data: data,\n        width: width,\n        height: height\n      });\n      /* global document */\n\n      var canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n      var context = canvas.getContext('2d'); // Copy the pixels to a 2D canvas\n\n      var imageData = context.createImageData(width, height);\n      imageData.data.set(data);\n      context.putImageData(imageData, 0, 0);\n      return canvas.toDataURL();\n    } // Reads pixels into an HTML Image\n\n  }, {\n    key: \"copyToImage\",\n    value: function copyToImage() {\n      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref10$image = _ref10.image,\n          image = _ref10$image === void 0 ? null : _ref10$image,\n          _ref10$attachment = _ref10.attachment,\n          attachment = _ref10$attachment === void 0 ? 36064 : _ref10$attachment,\n          _ref10$maxHeight = _ref10.maxHeight,\n          maxHeight = _ref10$maxHeight === void 0 ? Number.MAX_SAFE_INTEGER : _ref10$maxHeight;\n      /* global Image */\n\n\n      var dataUrl = this.readDataUrl({\n        attachment: attachment\n      });\n      image = image || new Image();\n      image.src = dataUrl;\n      return image;\n    } // copyToFramebuffer({width, height}) {\n    //   const scaleX = width / this.width;\n    //   const scaleY = height / this.height;\n    //   const scale = Math.min(scaleX, scaleY);\n    //   width = width * scale;\n    //   height = height * scale;\n    //   const scaledFramebuffer = new Framebuffer(this.gl, {width, height});\n    //   this.blit();\n    // }\n    // Copy a rectangle from a framebuffer attachment into a texture (at an offset)\n    // NOTE: assumes texture has enough storage allocated\n    // eslint-disable-next-line complexity\n\n  }, {\n    key: \"copyToTexture\",\n    value: function copyToTexture(_ref11) {\n      var texture = _ref11.texture,\n          target = _ref11.target,\n          _ref11$xoffset = _ref11.xoffset,\n          xoffset = _ref11$xoffset === void 0 ? 0 : _ref11$xoffset,\n          _ref11$yoffset = _ref11.yoffset,\n          yoffset = _ref11$yoffset === void 0 ? 0 : _ref11$yoffset,\n          _ref11$zoffset = _ref11.zoffset,\n          zoffset = _ref11$zoffset === void 0 ? 0 : _ref11$zoffset,\n          _ref11$mipmapLevel = _ref11.mipmapLevel,\n          mipmapLevel = _ref11$mipmapLevel === void 0 ? 0 : _ref11$mipmapLevel,\n          _ref11$attachment = _ref11.attachment,\n          attachment = _ref11$attachment === void 0 ? 36064 : _ref11$attachment,\n          _ref11$x = _ref11.x,\n          x = _ref11$x === void 0 ? 0 : _ref11$x,\n          _ref11$y = _ref11.y,\n          y = _ref11$y === void 0 ? 0 : _ref11$y,\n          width = _ref11.width,\n          height = _ref11.height;\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle); // TODO - support gl.readBuffer (WebGL2 only)\n      // const prevBuffer = gl.readBuffer(attachment);\n\n      assert(target || texture); // target\n\n      if (texture) {\n        width = Number.isFinite(width) ? width : texture.width;\n        height = Number.isFinite(height) ? height : texture.height;\n        texture.bind(0);\n      }\n\n      switch (texture.target) {\n        case 3553:\n        case 34067:\n          gl.copyTexSubImage2D(target || texture.target, mipmapLevel, xoffset, yoffset, x, y, width, height);\n          break;\n\n        case 35866:\n        case 32879:\n          gl.copyTexSubImage3D(target || texture.target, mipmapLevel, xoffset, yoffset, zoffset, x, y, width, height);\n          break;\n\n        default:\n      }\n\n      if (texture) {\n        texture.unbind();\n      }\n\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return texture;\n    } // WEBGL2 INTERFACE\n    // Copies a rectangle of pixels between framebuffers\n    // eslint-disable-next-line complexity\n\n  }, {\n    key: \"blit\",\n    value: function blit(_ref12) {\n      var srcFramebuffer = _ref12.srcFramebuffer,\n          _ref12$attachment = _ref12.attachment,\n          attachment = _ref12$attachment === void 0 ? 36064 : _ref12$attachment,\n          _ref12$srcX = _ref12.srcX0,\n          srcX0 = _ref12$srcX === void 0 ? 0 : _ref12$srcX,\n          _ref12$srcY = _ref12.srcY0,\n          srcY0 = _ref12$srcY === void 0 ? 0 : _ref12$srcY,\n          srcX1 = _ref12.srcX1,\n          srcY1 = _ref12.srcY1,\n          _ref12$dstX = _ref12.dstX0,\n          dstX0 = _ref12$dstX === void 0 ? 0 : _ref12$dstX,\n          _ref12$dstY = _ref12.dstY0,\n          dstY0 = _ref12$dstY === void 0 ? 0 : _ref12$dstY,\n          dstX1 = _ref12.dstX1,\n          dstY1 = _ref12.dstY1,\n          _ref12$color = _ref12.color,\n          color = _ref12$color === void 0 ? true : _ref12$color,\n          _ref12$depth = _ref12.depth,\n          depth = _ref12$depth === void 0 ? false : _ref12$depth,\n          _ref12$stencil = _ref12.stencil,\n          stencil = _ref12$stencil === void 0 ? false : _ref12$stencil,\n          _ref12$mask = _ref12.mask,\n          mask = _ref12$mask === void 0 ? 0 : _ref12$mask,\n          _ref12$filter = _ref12.filter,\n          filter = _ref12$filter === void 0 ? 9728 : _ref12$filter;\n      var gl = this.gl;\n      assertWebGL2Context(gl);\n\n      if (!srcFramebuffer.handle && attachment === 36064) {\n        attachment = 1028;\n      }\n\n      if (color) {\n        mask |= 16384;\n      }\n\n      if (depth) {\n        mask |= 256;\n      }\n\n      if (stencil) {\n        mask |= 1024;\n      }\n\n      assert(mask);\n      srcX1 = srcX1 === undefined ? srcFramebuffer.width : srcX1;\n      srcY1 = srcY1 === undefined ? srcFramebuffer.height : srcY1;\n      dstX1 = dstX1 === undefined ? this.width : dstX1;\n      dstY1 = dstY1 === undefined ? this.height : dstY1;\n      var prevDrawHandle = gl.bindFramebuffer(36009, this.handle);\n      var prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n      gl.readBuffer(attachment);\n      gl.blitFramebuffer(srcX0, srcY0, srcX1, srcY1, dstX0, dstY0, dstX1, dstY1, mask, filter);\n      gl.readBuffer(this.readBuffer);\n      gl.bindFramebuffer(36008, prevReadHandle || null);\n      gl.bindFramebuffer(36009, prevDrawHandle || null);\n      return this;\n    } // signals to the GL that it need not preserve all pixels of a specified region of the framebuffer\n\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(_ref13) {\n      var _ref13$attachments = _ref13.attachments,\n          attachments = _ref13$attachments === void 0 ? [] : _ref13$attachments,\n          _ref13$x = _ref13.x,\n          x = _ref13$x === void 0 ? 0 : _ref13$x,\n          _ref13$y = _ref13.y,\n          y = _ref13$y === void 0 ? 0 : _ref13$y,\n          width = _ref13.width,\n          height = _ref13.height;\n      var gl = this.gl;\n      assertWebGL2Context(gl);\n      var prevHandle = gl.bindFramebuffer(36008, this.handle);\n      var invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n      if (invalidateAll) {\n        gl.invalidateFramebuffer(36008, attachments);\n      } else {\n        gl.invalidateFramebuffer(36008, attachments, x, y, width, height);\n      }\n\n      gl.bindFramebuffer(36008, prevHandle);\n      return this;\n    } // Return the value for `pname` of the specified attachment.\n    // The type returned is the type of the requested pname\n\n  }, {\n    key: \"getAttachmentParameter\",\n    value: function getAttachmentParameter(attachment, pname, keys) {\n      var value = this._getAttachmentParameterFallback(pname);\n\n      if (value === null) {\n        this.gl.bindFramebuffer(36160, this.handle);\n        value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n        this.gl.bindFramebuffer(36160, null);\n      }\n\n      if (keys && value > 1000) {\n        value = glKey(this.gl, value);\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getAttachmentParameters\",\n    value: function getAttachmentParameters() {\n      var attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n      var keys = arguments.length > 1 ? arguments[1] : undefined;\n      var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n      var values = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = parameters[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pname = _step.value;\n          var key = keys ? glKey(this.gl, pname) : pname;\n          values[key] = this.getAttachmentParameter(attachment, pname, keys);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return values;\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var attachments = Object.keys(this.attachments); // if (this === this.gl.luma.defaultFramebuffer) {\n      //   attachments = [GL.COLOR_ATTACHMENT0, GL.DEPTH_STENCIL_ATTACHMENT];\n      // }\n\n      var parameters = {};\n\n      for (var _i = 0; _i < attachments.length; _i++) {\n        var attachmentName = attachments[_i];\n        var attachment = Number(attachmentName);\n        var key = keys ? glKey(this.gl, attachment) : attachment;\n        parameters[key] = this.getAttachmentParameters(attachment, keys);\n      }\n\n      return parameters;\n    } // DEBUG\n    // Note: Will only work when called in an event handler\n\n  }, {\n    key: \"show\",\n    value: function show() {\n      /* global window */\n      if (typeof window !== 'undefined') {\n        window.open(this.copyToDataUrl(), 'luma-debug-texture');\n      }\n\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      var priority = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      if (priority > _log.priority || typeof window === 'undefined') {\n        return this;\n      }\n\n      message = message || \"Framebuffer \".concat(this.id);\n      var image = this.copyToDataUrl({\n        maxHeight: 100\n      });\n\n      _log.image({\n        priority: priority,\n        message: message,\n        image: image\n      }, message)();\n\n      return this;\n    } // WEBGL INTERFACE\n\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref14 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref14$target = _ref14.target,\n          target = _ref14$target === void 0 ? 36160 : _ref14$target;\n\n      this.gl.bindFramebuffer(target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref15 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref15$target = _ref15.target,\n          target = _ref15$target === void 0 ? 36160 : _ref15$target;\n\n      this.gl.bindFramebuffer(target, null);\n      return this;\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_createDefaultAttachments\",\n    value: function _createDefaultAttachments(color, depth, stencil, width, height) {\n      var defaultAttachments = null; // Add a color buffer if requested and not supplied\n\n      if (color) {\n        var _parameters;\n\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36064] = new Texture2D(this.gl, {\n          id: \"\".concat(this.id, \"-color0\"),\n          pixels: null,\n          // reserves texture memory, but texels are undefined\n          format: 6408,\n          type: 5121,\n          width: width,\n          height: height,\n          // Note: Mipmapping can be disabled by texture resource when we resize the texture\n          // to a non-power-of-two dimenstion (NPOT texture) under WebGL1. To have consistant\n          // behavior we always disable mipmaps.\n          mipmaps: false,\n          // Set MIN and MAG filtering parameters so mipmaps are not used in sampling.\n          // Set WRAP modes that support NPOT textures too.\n          parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9728), _defineProperty(_parameters, 10240, 9728), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters)\n        });\n      }\n\n      if (depth && stencil) {\n        // TODO - handle separate stencil\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[33306] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth-stencil\"),\n          format: 35056,\n          width: width,\n          height: 111\n        }); // TODO - optional texture\n        // new Texture2D(this.gl, {\n        //   id: `${this.id}-depth-stencil`,\n        //   format: GL.DEPTH24_STENCIL8,\n        //   dataFormat: GL.DEPTH_STENCIL,\n        //   type: GL.UNSIGNED_INT_24_8,\n        //   width,\n        //   height,\n        //   mipmaps: false\n        // });\n      } else if (depth) {\n        // Add a depth buffer if requested and not supplied\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36096] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth\"),\n          format: 33189,\n          width: width,\n          height: height\n        });\n      } else if (stencil) {\n        // TODO - handle separate stencil\n        assert(false);\n      }\n\n      return defaultAttachments;\n    }\n  }, {\n    key: \"_unattach\",\n    value: function _unattach(attachment) {\n      var oldAttachment = this.attachments[attachment];\n\n      if (!oldAttachment) {\n        return;\n      }\n\n      if (oldAttachment instanceof Renderbuffer) {\n        // render buffer\n        this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n      } else {\n        // Must be a texture attachment\n        this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n      }\n\n      delete this.attachments[attachment];\n    }\n  }, {\n    key: \"_attachRenderbuffer\",\n    value: function _attachRenderbuffer(_ref16) {\n      var _ref16$attachment = _ref16.attachment,\n          attachment = _ref16$attachment === void 0 ? 36064 : _ref16$attachment,\n          renderbuffer = _ref16.renderbuffer;\n      var gl = this.gl; // TODO - is the bind needed?\n      // gl.bindRenderbuffer(GL.RENDERBUFFER, renderbuffer.handle);\n\n      gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle); // TODO - is the unbind needed?\n      // gl.bindRenderbuffer(GL.RENDERBUFFER, null);\n\n      this.attachments[attachment] = renderbuffer;\n    } // layer = 0 - index into Texture2DArray and Texture3D or face for `TextureCubeMap`\n    // level = 0 - mipmapLevel (must be 0 in WebGL1)\n\n  }, {\n    key: \"_attachTexture\",\n    value: function _attachTexture(_ref17) {\n      var _ref17$attachment = _ref17.attachment,\n          attachment = _ref17$attachment === void 0 ? 36064 : _ref17$attachment,\n          texture = _ref17.texture,\n          layer = _ref17.layer,\n          level = _ref17.level;\n      var gl = this.gl;\n      gl.bindTexture(texture.target, texture.handle);\n\n      switch (texture.target) {\n        case 35866:\n        case 32879:\n          gl.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n          break;\n\n        case 34067:\n          // layer must be a cubemap face (or if index, converted to cube map face)\n          var face = mapIndexToCubeMapFace(layer);\n          gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n          break;\n\n        case 3553:\n          gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n          break;\n\n        default:\n          assert(false, 'Illegal texture type');\n      }\n\n      gl.bindTexture(texture.target, null);\n      this.attachments[attachment] = texture;\n    } // Expects framebuffer to be bound\n\n  }, {\n    key: \"_setReadBuffer\",\n    value: function _setReadBuffer(gl, readBuffer) {\n      if (isWebGL2(gl)) {\n        gl.readBuffer(readBuffer);\n      } else {\n        // Setting to color attachment 0 is a noop, so allow it in WebGL1\n        assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n      }\n\n      this.readBuffer = readBuffer;\n    } // Expects framebuffer to be bound\n\n  }, {\n    key: \"_setDrawBuffers\",\n    value: function _setDrawBuffers(gl, drawBuffers) {\n      if (isWebGL2(gl)) {\n        gl.drawBuffers(drawBuffers);\n      } else {\n        var ext = gl.getExtension('WEBGL.draw_buffers');\n\n        if (ext) {\n          ext.drawBuffersWEBGL(drawBuffers);\n        } else {\n          // Setting a single draw buffer to color attachment 0 is a noop, allow in WebGL1\n          assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n        }\n      }\n\n      this.drawBuffers = drawBuffers;\n    } // Attempt to provide workable defaults for WebGL2 symbols under WebGL1\n    // null means OK to query\n    // TODO - move to webgl1 polyfills\n\n    /* eslint-disable complexity */\n\n  }, {\n    key: \"_getAttachmentParameterFallback\",\n    value: function _getAttachmentParameterFallback(pname) {\n      var caps = getFeatures(this.gl);\n\n      switch (pname) {\n        case 36052:\n          // GLint\n          return !caps.webgl2 ? 0 : null;\n\n        case 33298: // GLint\n\n        case 33299: // GLint\n\n        case 33300: // GLint\n\n        case 33301: // GLint\n\n        case 33302: // GLint\n\n        case 33303:\n          // GLint\n          return !caps.webgl2 ? 8 : null;\n\n        case 33297:\n          // GLenum\n          return !caps.webgl2 ? 5125 : null;\n\n        case 33296:\n          return !caps.webgl2 && !caps.EXT_sRGB ? 9729 : null;\n\n        default:\n          return null;\n      }\n    }\n    /* eslint-enable complexity */\n    // RESOURCE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createFramebuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteFramebuffer(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      return this.gl.bindFramebuffer(36160, handle);\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"texture\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this.attachments[36096] || this.attachments[33306] || null;\n    }\n  }, {\n    key: \"stencil\",\n    get: function get() {\n      return this.attachments[36128] || this.attachments[33306] || null;\n    }\n  }]);\n\n  return Framebuffer;\n}(Resource); // PUBLIC METHODS\n// Map an index to a cube map face constant\n\n\nexport { Framebuffer as default };\n\nfunction mapIndexToCubeMapFace(layer) {\n  // TEXTURE_CUBE_MAP_POSITIVE_X is a big value (0x8515)\n  // if smaller assume layer is index, otherwise assume it is already a cube map face constant\n  return layer < 34069 ? layer + 34069 : layer;\n} // Helper METHODS\n// Get a string describing the framebuffer error if installed\n\n\nfunction _getFrameBufferStatus(status) {\n  // Use error mapping if installed\n  var STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport var FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, // WebGLRenderbuffer or WebGLTexture\n36048, // GL.RENDERBUFFER, GL.TEXTURE, GL.NONE\n// GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE, // GL.TEXTURE_CUBE_MAP_POSITIVE_X, etc.\n// GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL, // GLint\n// EXT_sRGB or WebGL2\n33296, // GL.LINEAR, GL.SRBG\n// WebGL2\n// GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER, // GLint\n33298, // GLint\n33299, // GLint\n33300, // GLint\n33301, // GLint\n33302, // GLint\n33303 // GLint\n// GL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE\n// GL.FLOAT, GL.INT, GL.UNSIGNED_INT, GL.SIGNED_NORMALIZED, OR GL.UNSIGNED_NORMALIZED.\n];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\n/* eslint-disable no-inline-comments */\n\nimport { isWebGL2, assertWebGL2Context } from '../webgl-utils';\nimport Resource from './resource';\n\nvar Sampler = /*#__PURE__*/function (_Resource) {\n  _inherits(Sampler, _Resource);\n\n  _createClass(Sampler, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Sampler(gl, opts) {\n    var _this;\n\n    _classCallCheck(this, Sampler);\n\n    assertWebGL2Context(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Sampler).call(this, gl, opts));\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // Bind to the same texture unit as a texture to control sampling for that texture\n  // @param {GLuint} unit - texture unit index\n\n\n  _createClass(Sampler, [{\n    key: \"bind\",\n    value: function bind(unit) {\n      this.gl.bindSampler(unit, this.handle);\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(unit) {\n      this.gl.bindSampler(unit, null);\n      return this;\n    } // RESOURCE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createSampler();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteSampler(this.handle);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      return this.gl.getSamplerParameter(this.handle, pname);\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, param) {\n      // Apparently there are some conversion integer/float rules that made\n      // the WebGL committe expose two parameter setting functions in JavaScript.\n      // For now, pick the float version for parameters specified as GLfloat.\n      switch (pname) {\n        case 33082:\n        case 33083:\n          this.gl.samplerParameterf(this.handle, pname, param);\n          break;\n\n        default:\n          this.gl.samplerParameteri(this.handle, pname, param);\n          break;\n      }\n\n      return this;\n    }\n  }]);\n\n  return Sampler;\n}(Resource);\n\nexport { Sampler as default };","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _UNIFORM_SETTERS;\n\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport Sampler from './sampler';\nimport { log } from '../utils';\nvar UNIFORM_SETTERS = (_UNIFORM_SETTERS = {}, _defineProperty(_UNIFORM_SETTERS, 5126, function (gl, location, value) {\n  return gl.uniform1fv(location, toFloatArray(value, 1));\n}), _defineProperty(_UNIFORM_SETTERS, 35664, function (gl, location, value) {\n  return gl.uniform2fv(location, toFloatArray(value, 2));\n}), _defineProperty(_UNIFORM_SETTERS, 35665, function (gl, location, value) {\n  return gl.uniform3fv(location, toFloatArray(value, 3));\n}), _defineProperty(_UNIFORM_SETTERS, 35666, function (gl, location, value) {\n  return gl.uniform4fv(location, toFloatArray(value, 4));\n}), _defineProperty(_UNIFORM_SETTERS, 5124, function (gl, location, value) {\n  return gl.uniform1iv(location, toIntArray(value, 1));\n}), _defineProperty(_UNIFORM_SETTERS, 35667, function (gl, location, value) {\n  return gl.uniform2iv(location, toIntArray(value, 2));\n}), _defineProperty(_UNIFORM_SETTERS, 35668, function (gl, location, value) {\n  return gl.uniform3iv(location, toIntArray(value, 3));\n}), _defineProperty(_UNIFORM_SETTERS, 35669, function (gl, location, value) {\n  return gl.uniform4iv(location, toIntArray(value, 4));\n}), _defineProperty(_UNIFORM_SETTERS, 35670, function (gl, location, value) {\n  return gl.uniform1iv(location, toIntArray(value, 1));\n}), _defineProperty(_UNIFORM_SETTERS, 35671, function (gl, location, value) {\n  return gl.uniform2iv(location, toIntArray(value, 2));\n}), _defineProperty(_UNIFORM_SETTERS, 35672, function (gl, location, value) {\n  return gl.uniform3iv(location, toIntArray(value, 3));\n}), _defineProperty(_UNIFORM_SETTERS, 35673, function (gl, location, value) {\n  return gl.uniform4iv(location, toIntArray(value, 4));\n}), _defineProperty(_UNIFORM_SETTERS, 35674, function (gl, location, value) {\n  return gl.uniformMatrix2fv(location, false, toFloatArray(value, 4));\n}), _defineProperty(_UNIFORM_SETTERS, 35675, function (gl, location, value) {\n  return gl.uniformMatrix3fv(location, false, toFloatArray(value, 9));\n}), _defineProperty(_UNIFORM_SETTERS, 35676, function (gl, location, value) {\n  return gl.uniformMatrix4fv(location, false, toFloatArray(value, 16));\n}), _defineProperty(_UNIFORM_SETTERS, 35678, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 35680, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 5125, function (gl, location, value) {\n  return gl.uniform1uiv(location, toUIntArray(value, 1));\n}), _defineProperty(_UNIFORM_SETTERS, 36294, function (gl, location, value) {\n  return gl.uniform2uiv(location, toUIntArray(value, 2));\n}), _defineProperty(_UNIFORM_SETTERS, 36295, function (gl, location, value) {\n  return gl.uniform3uiv(location, toUIntArray(value, 3));\n}), _defineProperty(_UNIFORM_SETTERS, 36296, function (gl, location, value) {\n  return gl.uniform4uiv(location, toUIntArray(value, 4));\n}), _defineProperty(_UNIFORM_SETTERS, 35685, function (gl, location, value) {\n  return gl.uniformMatrix2x3fv(location, false, toFloatArray(value, 6));\n}), _defineProperty(_UNIFORM_SETTERS, 35686, function (gl, location, value) {\n  return gl.uniformMatrix2x4fv(location, false, toFloatArray(value, 8));\n}), _defineProperty(_UNIFORM_SETTERS, 35687, function (gl, location, value) {\n  return gl.uniformMatrix3x2fv(location, false, toFloatArray(value, 6));\n}), _defineProperty(_UNIFORM_SETTERS, 35688, function (gl, location, value) {\n  return gl.uniformMatrix3x4fv(location, false, toFloatArray(value, 12));\n}), _defineProperty(_UNIFORM_SETTERS, 35689, function (gl, location, value) {\n  return gl.uniformMatrix4x2fv(location, false, toFloatArray(value, 8));\n}), _defineProperty(_UNIFORM_SETTERS, 35690, function (gl, location, value) {\n  return gl.uniformMatrix4x3fv(location, false, toFloatArray(value, 12));\n}), _defineProperty(_UNIFORM_SETTERS, 35679, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 35682, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36289, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36292, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36293, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36298, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36299, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36300, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36303, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36306, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36307, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36308, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _defineProperty(_UNIFORM_SETTERS, 36311, function (gl, location, value) {\n  return gl.uniform1i(location, value);\n}), _UNIFORM_SETTERS); // Pre-allocated typed arrays for temporary conversion\n\nvar FLOAT_ARRAY = {};\nvar INT_ARRAY = {};\nvar UINT_ARRAY = {};\nvar array1 = [0]; // Functions to ensure the type of uniform values\n// TODO - Why is this necessary? The uniform*v funtions can consume Arrays\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  // convert boolean uniforms to Number\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  var length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  var result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (var i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function parseUniformName(name) {\n  // Shortcut to avoid redundant or bad matches\n  if (name[name.length - 1] !== ']') {\n    return {\n      name: name,\n      length: 1,\n      isArray: false\n    };\n  } // if array name then clean the array brackets\n\n\n  var UNIFORM_NAME_REGEXP = /([^\\[]*)(\\[[0-9]+\\])?/;\n  var matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n} // Returns a Magic Uniform Setter\n\n/* eslint-disable complexity */\n\nexport function getUniformSetter(gl, location, info) {\n  var setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter.bind(null, gl, location);\n} // Basic checks of uniform values (with or without knowledge of program)\n// To facilitate early detection of e.g. undefined values in JavaScript\n\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (var uniformName in uniforms) {\n    var value = uniforms[uniformName];\n    var shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      // Add space to source\n      source = source ? \"\".concat(source, \" \") : ''; // Value could be unprintable so write the object on console\n\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value); // eslint-disable-line\n\n      /* eslint-enable no-console */\n\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n} // TODO use type information during validation\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  } // Check if single value is a number\n\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture || value instanceof Sampler) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nfunction checkUniformArray(value) {\n  // Check that every element in array is a number, and at least 1 element\n  if (value.length === 0) {\n    return false;\n  }\n\n  var checkLength = Math.min(value.length, 16);\n\n  for (var i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * Given two values of a uniform, returns `true` if they are equal\n */\n\n\nexport function areUniformsEqual(uniform1, uniform2) {\n  if (Array.isArray(uniform1) || ArrayBuffer.isView(uniform1)) {\n    if (!uniform2) {\n      return false;\n    }\n\n    var len = uniform1.length;\n\n    if (uniform2.length !== len) {\n      return false;\n    }\n\n    for (var i = 0; i < len; i++) {\n      if (uniform1[i] !== uniform2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return uniform1 === uniform2;\n}\n/**\n * Creates a copy of the uniform\n */\n\nexport function getUniformCopy(uniform) {\n  if (Array.isArray(uniform) || ArrayBuffer.isView(uniform)) {\n    return uniform.slice();\n  }\n\n  return uniform;\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _COMPOSITE_GL_TYPES;\n/* eslint-disable camelcase */\n\n\nimport assert from '../utils/assert';\nvar GL_BYTE = 0x1400;\nvar GL_UNSIGNED_BYTE = 0x1401;\nvar GL_SHORT = 0x1402;\nvar GL_UNSIGNED_SHORT = 0x1403;\nvar GL_POINTS = 0x0;\nvar GL_LINES = 0x1;\nvar GL_LINE_LOOP = 0x2;\nvar GL_LINE_STRIP = 0x3;\nvar GL_TRIANGLES = 0x4;\nvar GL_TRIANGLE_STRIP = 0x5;\nvar GL_TRIANGLE_FAN = 0x6; // Local constants - these will \"collapse\" during minification\n\nvar GL_FLOAT = 0x1406;\nvar GL_FLOAT_VEC2 = 0x8b50;\nvar GL_FLOAT_VEC3 = 0x8b51;\nvar GL_FLOAT_VEC4 = 0x8b52;\nvar GL_INT = 0x1404;\nvar GL_INT_VEC2 = 0x8b53;\nvar GL_INT_VEC3 = 0x8b54;\nvar GL_INT_VEC4 = 0x8b55;\nvar GL_UNSIGNED_INT = 0x1405;\nvar GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nvar GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nvar GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nvar GL_BOOL = 0x8b56;\nvar GL_BOOL_VEC2 = 0x8b57;\nvar GL_BOOL_VEC3 = 0x8b58;\nvar GL_BOOL_VEC4 = 0x8b59;\nvar GL_FLOAT_MAT2 = 0x8b5a;\nvar GL_FLOAT_MAT3 = 0x8b5b;\nvar GL_FLOAT_MAT4 = 0x8b5c;\nvar GL_FLOAT_MAT2x3 = 0x8b65;\nvar GL_FLOAT_MAT2x4 = 0x8b66;\nvar GL_FLOAT_MAT3x2 = 0x8b67;\nvar GL_FLOAT_MAT3x4 = 0x8b68;\nvar GL_FLOAT_MAT4x2 = 0x8b69;\nvar GL_FLOAT_MAT4x3 = 0x8b6a; // Composite types table\n\nvar COMPOSITE_GL_TYPES = (_COMPOSITE_GL_TYPES = {}, _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT, [GL_FLOAT, 1, 'float']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC2, [GL_FLOAT, 2, 'vec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC3, [GL_FLOAT, 3, 'vec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC4, [GL_FLOAT, 4, 'vec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT, [GL_INT, 1, 'int']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC2, [GL_INT, 2, 'ivec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC3, [GL_INT, 3, 'ivec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC4, [GL_INT, 4, 'ivec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT, [GL_UNSIGNED_INT, 1, 'uint']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC2, [GL_UNSIGNED_INT, 2, 'uvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC3, [GL_UNSIGNED_INT, 3, 'uvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC4, [GL_UNSIGNED_INT, 4, 'uvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL, [GL_FLOAT, 1, 'bool']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC2, [GL_FLOAT, 2, 'bvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC3, [GL_FLOAT, 3, 'bvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC4, [GL_FLOAT, 4, 'bvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2, [GL_FLOAT, 8, 'mat2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x3, [GL_FLOAT, 8, 'mat2x3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x4, [GL_FLOAT, 8, 'mat2x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3, [GL_FLOAT, 12, 'mat3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x2, [GL_FLOAT, 12, 'mat3x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x4, [GL_FLOAT, 12, 'mat3x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4, [GL_FLOAT, 16, 'mat4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x2, [GL_FLOAT, 16, 'mat4x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x3, [GL_FLOAT, 16, 'mat4x3']), _COMPOSITE_GL_TYPES); // Counts the number of complete primitives given a number of vertices and a drawMode\n\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n} // Counts the number of complete \"primitives\" given a number of vertices and a drawMode\n\nexport function getPrimitiveCount(_ref) {\n  var drawMode = _ref.drawMode,\n      vertexCount = _ref.vertexCount;\n\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n} // Counts the number of vertices after splitting the vertex stream into separate \"primitives\"\n\nexport function getVertexCount(_ref2) {\n  var drawMode = _ref2.drawMode,\n      vertexCount = _ref2.vertexCount;\n  var primitiveCount = getPrimitiveCount({\n    drawMode: drawMode,\n    vertexCount: vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n} // Decomposes a composite type GL.VEC3 into a basic type (GL.FLOAT) and components (3)\n\nexport function decomposeCompositeGLType(compositeGLType) {\n  var typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  var _typeAndSize = _slicedToArray(typeAndSize, 2),\n      type = _typeAndSize[0],\n      components = _typeAndSize[1];\n\n  return {\n    type: type,\n    components: components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (var glType in COMPOSITE_GL_TYPES) {\n    var _COMPOSITE_GL_TYPES$g = _slicedToArray(COMPOSITE_GL_TYPES[glType], 3),\n        compType = _COMPOSITE_GL_TYPES$g[0],\n        compComponents = _COMPOSITE_GL_TYPES$g[1],\n        name = _COMPOSITE_GL_TYPES$g[2];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType: glType,\n        name: name\n      };\n    }\n  }\n\n  return null;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; // Contains metadata describing attribute configurations for a program's shaders\n// Much of this is automatically extracted from shaders after program linking\n\nimport Accessor from './accessor';\nimport { isWebGL2 } from '../webgl-utils';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\n\nvar ProgramConfiguration = /*#__PURE__*/function () {\n  function ProgramConfiguration(program) {\n    _classCallCheck(this, ProgramConfiguration);\n\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  _createClass(ProgramConfiguration, [{\n    key: \"getAttributeInfo\",\n    value: function getAttributeInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.attributeInfos[location];\n      }\n\n      return this.attributeInfosByName[locationOrName] || null;\n    } // Resolves an attribute name or index to an index\n\n  }, {\n    key: \"getAttributeLocation\",\n    value: function getAttributeLocation(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.location : -1;\n    }\n  }, {\n    key: \"getAttributeAccessor\",\n    value: function getAttributeAccessor(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.accessor : null;\n    }\n  }, {\n    key: \"getVaryingInfo\",\n    value: function getVaryingInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.varyingInfos[location];\n      }\n\n      return this.varyingInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getVaryingIndex\",\n    value: function getVaryingIndex(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.location : -1;\n    }\n  }, {\n    key: \"getVaryingAccessor\",\n    value: function getVaryingAccessor(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.accessor : null;\n    } // PRIVATE METHODS\n    // linkProgram needs to have been called, although linking does not need to have been successful\n\n  }, {\n    key: \"_readAttributesFromProgram\",\n    value: function _readAttributesFromProgram(program) {\n      var gl = program.gl;\n      var count = gl.getProgramParameter(program.handle, 35721);\n\n      for (var index = 0; index < count; index++) {\n        var _gl$getActiveAttrib = gl.getActiveAttrib(program.handle, index),\n            name = _gl$getActiveAttrib.name,\n            type = _gl$getActiveAttrib.type,\n            size = _gl$getActiveAttrib.size;\n\n        var location = gl.getAttribLocation(program.handle, name); // Add only user provided attributes, for built-in attributes like\n        // `gl_InstanceID` locaiton will be < 0\n\n        if (location >= 0) {\n          this._addAttribute(location, name, type, size);\n        }\n      }\n\n      this.attributeInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    } // linkProgram needs to have been called, although linking does not need to have been successful\n\n  }, {\n    key: \"_readVaryingsFromProgram\",\n    value: function _readVaryingsFromProgram(program) {\n      var gl = program.gl;\n\n      if (!isWebGL2(gl)) {\n        return;\n      }\n\n      var count = gl.getProgramParameter(program.handle, 35971);\n\n      for (var location = 0; location < count; location++) {\n        var _gl$getTransformFeedb = gl.getTransformFeedbackVarying(program.handle, location),\n            name = _gl$getTransformFeedb.name,\n            type = _gl$getTransformFeedb.type,\n            size = _gl$getTransformFeedb.size;\n\n        this._addVarying(location, name, type, size);\n      }\n\n      this.varyingInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_addAttribute\",\n    value: function _addAttribute(location, name, compositeType, size) {\n      var _decomposeCompositeGL = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL.type,\n          components = _decomposeCompositeGL.components;\n\n      var accessor = {\n        type: type,\n        size: size * components\n      };\n\n      this._inferProperties(location, name, accessor);\n\n      var attributeInfo = {\n        location: location,\n        name: name,\n        accessor: new Accessor(accessor)\n      }; // Base values\n\n      this.attributeInfos.push(attributeInfo);\n      this.attributeInfosByName[attributeInfo.name] = attributeInfo; // For quick name based lookup\n    } // Extract additional attribute metadata from shader names (based on attribute naming conventions)\n\n  }, {\n    key: \"_inferProperties\",\n    value: function _inferProperties(location, name, accessor) {\n      if (/instance/i.test(name)) {\n        // Any attribute containing the word \"instance\" will be assumed to be instanced\n        accessor.divisor = 1;\n      }\n    }\n  }, {\n    key: \"_addVarying\",\n    value: function _addVarying(location, name, compositeType, size) {\n      var _decomposeCompositeGL2 = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL2.type,\n          components = _decomposeCompositeGL2.components;\n\n      var accessor = new Accessor({\n        type: type,\n        size: size * components\n      });\n      var varying = {\n        location: location,\n        name: name,\n        accessor: accessor\n      }; // Base values\n\n      this.varyingInfos.push(varying);\n      this.varyingInfosByName[varying.name] = varying; // For quick name based lookup\n    }\n  }]);\n\n  return ProgramConfiguration;\n}();\n\nexport { ProgramConfiguration as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\n/* eslint-disable no-inline-comments */\n\nimport Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { withParameters } from '../webgl-context/context-state';\nimport { checkUniformValues, areUniformsEqual, getUniformCopy } from '../webgl/uniforms';\nimport { assertWebGL2Context, isWebGL2 } from '../webgl-utils';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { log, uid } from '../utils';\nimport assert from '../utils/assert';\nvar LOG_PROGRAM_PERF_PRIORITY = 4; // const GL_INTERLEAVED_ATTRIBS = 0x8C8C;\n\nvar GL_SEPARATE_ATTRIBS = 0x8c8d;\n\nvar Program = /*#__PURE__*/function (_Resource) {\n  _inherits(Program, _Resource);\n\n  function Program(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Program);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Program).call(this, gl, opts));\n\n    _this.stubRemovedMethods('Program', 'v6.0', ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo']); // Experimental flag to avoid deleting Program object while it is cached\n\n\n    _this._isCached = false;\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this._setId(opts.id);\n\n    return _this;\n  }\n\n  _createClass(Program, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var vs = props.vs,\n          fs = props.fs,\n          varyings = props.varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? GL_SEPARATE_ATTRIBS : _props$bufferMode; // Create shaders if needed\n\n      this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n        id: \"\".concat(props.id, \"-vs\"),\n        source: vs\n      }) : vs;\n      this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n        id: \"\".concat(props.id, \"-fs\"),\n        source: fs\n      }) : fs;\n      assert(this.vs instanceof VertexShader);\n      assert(this.fs instanceof FragmentShader); // uniforms\n\n      this.uniforms = {};\n      this.samplers = {}; // Setup varyings if supplied\n\n      if (varyings) {\n        assertWebGL2Context(this.gl);\n        this.varyings = varyings;\n        this.gl.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n      }\n\n      this._compileAndLink();\n\n      this._readUniformLocationsFromLinkedProgram();\n\n      this.configuration = new ProgramConfiguration(this);\n      return this.setProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._isCached) {\n        // This object is cached, do not delete\n        return this;\n      }\n\n      return _get(_getPrototypeOf(Program.prototype), \"delete\", this).call(this, opts);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms, props.samplers);\n      }\n\n      return this;\n    } // Another thing about the WebGL API is that there are so many ways to draw things.\n    // This function unifies those ways into a single call using common parameters with sane defaults\n\n  }, {\n    key: \"draw\",\n    value: function draw(_ref) {\n      var _this2 = this;\n\n      var logPriority = _ref.logPriority,\n          _ref$drawMode = _ref.drawMode,\n          drawMode = _ref$drawMode === void 0 ? 4 : _ref$drawMode,\n          vertexCount = _ref.vertexCount,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          start = _ref.start,\n          end = _ref.end,\n          _ref$isIndexed = _ref.isIndexed,\n          isIndexed = _ref$isIndexed === void 0 ? false : _ref$isIndexed,\n          _ref$indexType = _ref.indexType,\n          indexType = _ref$indexType === void 0 ? 5123 : _ref$indexType,\n          _ref$isInstanced = _ref.isInstanced,\n          isInstanced = _ref$isInstanced === void 0 ? false : _ref$isInstanced,\n          _ref$instanceCount = _ref.instanceCount,\n          instanceCount = _ref$instanceCount === void 0 ? 0 : _ref$instanceCount,\n          _ref$vertexArray = _ref.vertexArray,\n          vertexArray = _ref$vertexArray === void 0 ? null : _ref$vertexArray,\n          transformFeedback = _ref.transformFeedback,\n          framebuffer = _ref.framebuffer,\n          _ref$parameters = _ref.parameters,\n          parameters = _ref$parameters === void 0 ? {} : _ref$parameters,\n          _ref$uniforms = _ref.uniforms,\n          uniforms = _ref$uniforms === void 0 ? {} : _ref$uniforms,\n          _ref$samplers = _ref.samplers,\n          samplers = _ref$samplers === void 0 ? {} : _ref$samplers;\n\n      if (logPriority !== undefined) {\n        var fb = framebuffer ? framebuffer.id : 'default';\n        var message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n        log.log(logPriority, message)();\n      }\n\n      this.gl.useProgram(this.handle); // TODO - move vertex array binding and transform feedback binding to withParameters?\n\n      assert(vertexArray);\n      vertexArray.bindForDraw(vertexCount, instanceCount, function () {\n        if (uniforms) {\n          log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)');\n\n          _this2.setUniforms(uniforms, samplers);\n        }\n\n        _this2._bindTextures();\n\n        if (framebuffer !== undefined) {\n          parameters = Object.assign({}, parameters, {\n            framebuffer: framebuffer\n          });\n        }\n\n        if (transformFeedback) {\n          var primitiveMode = getPrimitiveDrawMode(drawMode);\n          transformFeedback.begin(primitiveMode);\n        }\n\n        withParameters(_this2.gl, parameters, function () {\n          // TODO - Use polyfilled WebGL2RenderingContext instead of ANGLE extension\n          if (isIndexed && isInstanced) {\n            _this2.gl.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n          } else if (isIndexed && isWebGL2(_this2.gl) && !isNaN(start) && !isNaN(end)) {\n            _this2.gl.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n          } else if (isIndexed) {\n            _this2.gl.drawElements(drawMode, vertexCount, indexType, offset);\n          } else if (isInstanced) {\n            _this2.gl.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n          } else {\n            _this2.gl.drawArrays(drawMode, offset, vertexCount);\n          }\n        });\n\n        if (transformFeedback) {\n          transformFeedback.end();\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"setSamplers\",\n    value: function setSamplers(samplers) {\n      Object.assign(this.samplers, samplers);\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var samplers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var _onChangeCallback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {}; // Simple change detection - if all uniforms are unchanged, do nothing\n      // TODO - Disabled since it interferes with textures\n      // we must still rebind texture units to current program's textures before drawing\n      // If modifying, test with `picking` example on website\n\n\n      var somethingChanged = false;\n      var changedUniforms = {};\n\n      for (var key in uniforms) {\n        if (!areUniformsEqual(this.uniforms[key], uniforms[key])) {\n          somethingChanged = true;\n          changedUniforms[key] = uniforms[key];\n          this.uniforms[key] = getUniformCopy(uniforms[key]);\n        }\n      }\n\n      if (somethingChanged) {\n        _onChangeCallback();\n\n        checkUniformValues(changedUniforms, this.id, this._uniformSetters);\n        Object.assign(this.samplers, samplers);\n\n        this._setUniforms(changedUniforms);\n      }\n\n      return this;\n    } // PRIVATE METHODS\n    // This needs to be done before every draw call\n\n  }, {\n    key: \"_bindTextures\",\n    value: function _bindTextures() {\n      for (var uniformName in this.uniforms) {\n        var uniformSetter = this._uniformSetters[uniformName];\n\n        if (uniformSetter && uniformSetter.textureIndex !== undefined) {\n          var uniform = this.uniforms[uniformName];\n          var sampler = this.samplers[uniformName];\n\n          if (uniform instanceof Framebuffer) {\n            uniform = uniform.texture;\n          }\n\n          if (uniform instanceof Texture) {\n            // Bind texture to index\n            uniform.bind(uniformSetter.textureIndex);\n          } // Bind a sampler (if supplied) to index\n\n\n          if (sampler) {\n            sampler.bind(uniformSetter.textureIndex);\n          }\n        }\n      }\n    } // Apply a set of uniform values to a program\n    // Only uniforms actually present in the linked program will be updated.\n\n    /* eslint-disable max-depth */\n\n  }, {\n    key: \"_setUniforms\",\n    value: function _setUniforms(uniforms) {\n      this.gl.useProgram(this.handle);\n\n      for (var uniformName in uniforms) {\n        var uniform = uniforms[uniformName];\n        var uniformSetter = this._uniformSetters[uniformName];\n\n        if (uniformSetter) {\n          if (uniform instanceof Framebuffer) {\n            uniform = uniform.texture;\n          }\n\n          if (uniform instanceof Texture) {\n            if (uniformSetter.textureIndex === undefined) {\n              uniformSetter.textureIndex = this._textureIndexCounter++;\n            } // Bind texture to index\n\n\n            var texture = uniform;\n            var textureIndex = uniformSetter.textureIndex;\n            texture.bind(textureIndex); // Set the uniform sampler to the texture index\n\n            uniformSetter(textureIndex);\n          } else {\n            // Just set the value\n            uniformSetter(uniform);\n          }\n        }\n      }\n\n      return this;\n    } // RESOURCE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createProgram();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteProgram(this.handle);\n    } // Extract opts needed to initialize a `Program` from an independently created WebGLProgram handle\n\n  }, {\n    key: \"_getOptionsFromHandle\",\n    value: function _getOptionsFromHandle(handle) {\n      var shaderHandles = this.gl.getAttachedShaders(handle);\n      var opts = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = shaderHandles[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var shaderHandle = _step.value;\n          var type = this.gl.getShaderParameter(this.handle, 35663);\n\n          switch (type) {\n            case 35633:\n              opts.vs = new VertexShader({\n                handle: shaderHandle\n              });\n              break;\n\n            case 35632:\n              opts.fs = new FragmentShader({\n                handle: shaderHandle\n              });\n              break;\n\n            default:\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return opts;\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      return this.gl.getProgramParameter(this.handle, pname);\n    } // If program is not named, name it after shader names\n    // TODO - this.id will already have been initialized\n\n  }, {\n    key: \"_setId\",\n    value: function _setId(id) {\n      if (!id) {\n        var programName = this._getName();\n\n        this.id = uid(programName);\n      }\n    } // Generate a default name for the program based on names of the shaders\n\n  }, {\n    key: \"_getName\",\n    value: function _getName() {\n      var programName = this.vs.getName() || this.fs.getName();\n      programName = programName.replace(/shader/i, '');\n      programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n      return programName;\n    }\n  }, {\n    key: \"_compileAndLink\",\n    value: function _compileAndLink() {\n      var gl = this.gl;\n      gl.attachShader(this.handle, this.vs.handle);\n      gl.attachShader(this.handle, this.fs.handle);\n      log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n      gl.linkProgram(this.handle);\n      log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))(); // Avoid checking program linking error in production\n\n      if (gl.debug || log.priority > 0) {\n        gl.validateProgram(this.handle);\n        var linked = gl.getProgramParameter(this.handle, 35714);\n\n        if (!linked) {\n          throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n        }\n      }\n    } // query uniform locations and build name to setter map.\n\n  }, {\n    key: \"_readUniformLocationsFromLinkedProgram\",\n    value: function _readUniformLocationsFromLinkedProgram() {\n      var gl = this.gl;\n      this._uniformSetters = {};\n      this._uniformCount = this._getParameter(35718);\n\n      for (var i = 0; i < this._uniformCount; i++) {\n        var info = this.gl.getActiveUniform(this.handle, i);\n\n        var _parseUniformName = parseUniformName(info.name),\n            name = _parseUniformName.name,\n            isArray = _parseUniformName.isArray;\n\n        var location = gl.getUniformLocation(this.handle, name);\n        this._uniformSetters[name] = getUniformSetter(gl, location, info, isArray);\n      }\n\n      this._textureIndexCounter = 0;\n    } // stub for shader chache, should reset uniforms to default valiues\n\n  }, {\n    key: \"reset\",\n    value: function reset() {} // TO BE REMOVED in v7?\n    // Rretrieves information about active uniforms identifed by their indices (`uniformIndices`)\n    // https://\n    // developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/getActiveUniforms\n\n  }, {\n    key: \"getActiveUniforms\",\n    value: function getActiveUniforms(uniformIndices, pname) {\n      return this.gl.getActiveUniforms(this.handle, uniformIndices, pname);\n    } // Retrieves the index of a uniform block\n\n  }, {\n    key: \"getUniformBlockIndex\",\n    value: function getUniformBlockIndex(blockName) {\n      return this.gl.getUniformBlockIndex(this.handle, blockName);\n    } // Retrieves information about an active uniform block (`blockIndex`)\n    // https://\n    // developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/getActiveUniformBlockParameter\n\n  }, {\n    key: \"getActiveUniformBlockParameter\",\n    value: function getActiveUniformBlockParameter(blockIndex, pname) {\n      return this.gl.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n    } // Binds a uniform block (`blockIndex`) to a specific binding point (`blockBinding`)\n\n  }, {\n    key: \"uniformBlockBinding\",\n    value: function uniformBlockBinding(blockIndex, blockBinding) {\n      this.gl.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n    }\n  }]);\n\n  return Program;\n}(Resource);\n\nexport { Program as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\"; // WebGL2 Query (also handles disjoint timer extensions)\n\nimport Resource from './resource';\nimport { FEATURES, hasFeatures } from '../webgl-context/context-features';\nimport { isWebGL2 } from '../webgl-utils';\nimport queryManager from '../webgl-utils/query-manager';\nimport assert from '../utils/assert';\n\nvar noop = function noop(x) {\n  return x;\n};\n\nvar ERR_GPU_DISJOINT = 'Disjoint GPU operation invalidated timer queries';\nvar ERR_TIMER_QUERY_NOT_SUPPORTED = 'Timer queries require \"EXT_disjoint_timer_query\" extension';\nvar GL_QUERY_COUNTER_BITS_EXT = 0x8864; // # bits in query result for the given target.\n\nvar GL_QUERY_RESULT = 0x8866; // Returns a GLuint containing the query result.\n\nvar GL_QUERY_RESULT_AVAILABLE = 0x8867; // whether query result is available.\n\nvar GL_TIME_ELAPSED_EXT = 0x88bf; // Elapsed time (in nanoseconds).\n\nvar GL_TIMESTAMP_EXT = 0x8e28; // The current time.\n\nvar GL_GPU_DISJOINT_EXT = 0x8fbb; // Whether GPU performed any disjoint operation.\n\nvar GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88; // #primitives written to feedback buffers\n\nvar GL_ANY_SAMPLES_PASSED = 0x8c2f; // Occlusion query (if drawing passed depth test)\n\nvar GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a; // Occlusion query less accurate/faster version\n\nvar Query = /*#__PURE__*/function (_Resource) {\n  _inherits(Query, _Resource);\n\n  _createClass(Query, null, [{\n    key: \"isSupported\",\n    // Returns true if Query is supported by the WebGL implementation\n    // Can also check whether timestamp queries are available.\n    value: function isSupported(gl) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var webgl2 = isWebGL2(gl); // Initial value\n\n      var hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n      var supported = webgl2 || hasTimerQuery;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = opts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          switch (key) {\n            case 'queries':\n              supported = supported && webgl2;\n              break;\n\n            case 'timers':\n              supported = supported && hasTimerQuery;\n              break;\n\n            case 'timestamps':\n              var queryCounterBits = hasTimerQuery ? gl.getQuery(GL_TIMESTAMP_EXT, GL_QUERY_COUNTER_BITS_EXT) : 0;\n              supported = supported && queryCounterBits > 0;\n              break;\n\n            default:\n              assert(false);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return supported;\n    } // Create a query class\n\n  }]);\n\n  function Query(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Query);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Query).call(this, gl, opts));\n    var _opts$onComplete = opts.onComplete,\n        onComplete = _opts$onComplete === void 0 ? noop : _opts$onComplete,\n        _opts$onError = opts.onError,\n        onError = _opts$onError === void 0 ? noop : _opts$onError;\n    _this.target = null;\n    _this.onComplete = onComplete;\n    _this.onError = onError; // query manager needs a promise field\n\n    _this.promise = null;\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // Shortcut for timer query (dependent on extension in both WebGL1 and 2)\n  // Measures GPU time delta between this call and a matching `end` call in the\n  // GPU instruction stream.\n\n\n  _createClass(Query, [{\n    key: \"beginTimeElapsedQuery\",\n    value: function beginTimeElapsedQuery() {\n      return this.begin(GL_TIME_ELAPSED_EXT);\n    } // Shortcut for occlusion queries\n\n  }, {\n    key: \"beginOcclusionQuery\",\n    value: function beginOcclusionQuery() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$conservative = _ref.conservative,\n          conservative = _ref$conservative === void 0 ? false : _ref$conservative;\n\n      return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n    } // Shortcut for transformFeedbackQuery\n\n  }, {\n    key: \"beginTransformFeedbackQuery\",\n    value: function beginTransformFeedbackQuery() {\n      return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n    } // Generates a GPU time stamp when the GPU instruction stream reaches this instruction.\n    // To measure time deltas, two timestamp queries are needed.\n    // Note: timestamp() queries may not be available even when the timer query extension is.\n\n  }, {\n    key: \"getTimestamp\",\n    value: function getTimestamp() {\n      queryManager.beginQuery(this, this.onComplete, this.onError);\n\n      try {\n        this.gl.queryCounter(this.handle, GL_TIMESTAMP_EXT);\n      } catch (error) {\n        queryManager.rejectQuery(this, ERR_TIMER_QUERY_NOT_SUPPORTED);\n      }\n\n      return this;\n    } // Due to OpenGL API limitations, after calling `begin()` on one Query\n    // instance, `end()` must be called on that same instance before\n    // calling `begin()` on another query. While there can be multiple\n    // outstanding queries representing disjoint `begin()`/`end()` intervals.\n    // It is not possible to interleave or overlap `begin` and `end` calls.\n\n  }, {\n    key: \"begin\",\n    value: function begin(target) {\n      // - Triggering a new query when a Query is already tracking an\n      //   unresolved query causes that query to be cancelled.\n      queryManager.beginQuery(this, this.onComplete, this.onError);\n      this.target = target;\n\n      try {\n        this.gl.beginQuery(this.target, this.handle);\n      } catch (error) {\n        queryManager.rejectQuery(this, 'Query not supported');\n      }\n\n      return this;\n    } // ends the current query\n\n  }, {\n    key: \"end\",\n    value: function end() {\n      // Note: calling end does not affect the pending promise\n      if (this.target) {\n        this.gl.endQuery(this.target);\n        this.target = null;\n      }\n\n      return this;\n    } // Cancels a pending query\n\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.end();\n      queryManager.cancelQuery(this);\n      return this;\n    } // Returns true if the query result is available\n\n  }, {\n    key: \"isResultAvailable\",\n    value: function isResultAvailable() {\n      return this.gl.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n    } // Returns the query result, converted to milliseconds to match JavaScript conventions.\n    // TODO - what about non-timer queries\n\n  }, {\n    key: \"getResult\",\n    value: function getResult() {\n      var result = this.gl.getQueryParameter(this.handle, GL_QUERY_RESULT);\n      return Number.isFinite(result) ? result / 1e6 : 0;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return Query.isSupported(this.gl) ? this.gl.createQuery() : null;\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      queryManager.deleteQuery(this);\n      this.gl.deleteQuery(this.handle);\n    }\n  }], [{\n    key: \"poll\",\n    value: function poll(gl) {\n      queryManager.poll(gl);\n    }\n  }]);\n\n  return Query;\n}(Resource); // NOTE: This call lets the queryManager know how to detect disjoint GPU state\n// It will check dsjoint state on polls and before adding a new query\n// and reject any outstanding TimerQueries with our supplied error message.\n\n\nexport { Query as default };\nqueryManager.setInvalidator({\n  queryType: Query,\n  errorMessage: ERR_GPU_DISJOINT,\n  // Note: Querying the disjoint state resets it\n  checkInvalid: function checkInvalid(gl) {\n    return gl.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n});","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Resource from './resource';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport queryManager from '../webgl-utils/query-manager';\n\nvar FenceSync = /*#__PURE__*/function (_Resource) {\n  _inherits(FenceSync, _Resource);\n  /*\n   * @class\n   * @param {WebGL2RenderingContext} gl\n   */\n\n\n  function FenceSync(gl, opts) {\n    var _this;\n\n    _classCallCheck(this, FenceSync);\n\n    assertWebGL2Context(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FenceSync).call(this, gl, opts)); // query manager needs a promise field\n\n    _this.promise = null;\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  /**\n   * The method is a no-op in the absence of the possibility of\n   * synchronizing between multiple GL contexts.\n   * Prevent commands from being added to GPU command queue.\n   * Note: commands can still be buffered in driver.\n   *\n   * @param {GLbitfield} flags\n   * @param {GLint64} timeout\n   * @return {Sync} status\n   */\n\n\n  _createClass(FenceSync, [{\n    key: \"wait\",\n    value: function wait() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$flags = _ref.flags,\n          flags = _ref$flags === void 0 ? 0 : _ref$flags,\n          _ref$timeout = _ref.timeout,\n          timeout = _ref$timeout === void 0 ? -1 : _ref$timeout;\n\n      this.gl.waitSync(this.handle, flags, timeout);\n      return this;\n    }\n    /**\n     * Block all CPU operations until fence is signalled\n     * @param {GLbitfield} flags\n     * @param {GLint64} timeout\n     * @return {GLenum} result\n     */\n\n  }, {\n    key: \"clientWait\",\n    value: function clientWait(_ref2) {\n      var _ref2$flags = _ref2.flags,\n          flags = _ref2$flags === void 0 ? 1 : _ref2$flags,\n          timeout = _ref2.timeout;\n      var result = this.gl.clientWaitSync(this.handle, flags, timeout); // TODO - map to boolean?\n\n      switch (result) {\n        case 37146:\n          // Indicates that sync object was signaled when this method was called.\n          break;\n\n        case 37147:\n          // Indicates that timeout time passed, sync object did not become signaled\n          break;\n\n        case 37148:\n          // Indicates that sync object was signaled before timeout expired.\n          break;\n\n        case 37149:\n          // Indicates that an error occurred during execution.\n          break;\n\n        default:\n      }\n\n      return result;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      queryManager.cancelQuery(this);\n    }\n  }, {\n    key: \"isSignaled\",\n    value: function isSignaled() {\n      return this.getParameter(37140) === 37145;\n    } // TODO - Query manager needs these?\n\n  }, {\n    key: \"isResultAvailable\",\n    value: function isResultAvailable() {\n      return this.isSignaled();\n    }\n  }, {\n    key: \"getResult\",\n    value: function getResult() {\n      return this.isSignaled();\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      return this.gl.getSyncParameter(this.handle, pname);\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.fenceSync(37143, 0);\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      queryManager.deleteQuery(this);\n      this.gl.deleteSync(this.handle);\n    }\n  }]);\n\n  return FenceSync;\n}(Resource);\n\nexport { FenceSync as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Texture from '../webgl/texture';\nimport { isWebGL2 } from '../webgl-utils';\n\nvar Texture2DArray = /*#__PURE__*/function (_Texture) {\n  _inherits(Texture2DArray, _Texture);\n\n  _createClass(Texture2DArray, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Texture2DArray(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture2DArray);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture2DArray).call(this, gl, opts));\n    throw new Error('Texture2DArray not yet implemented');\n    return _this;\n  }\n\n  return Texture2DArray;\n}(Texture);\n\nexport { Texture2DArray as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2, assertWebGL2Context } from '../webgl-utils';\nimport { log, isObjectEmpty } from '../utils'; // NOTE: The `bindOnUse` flag is a major workaround:\n// See https://github.com/KhronosGroup/WebGL/issues/2346\n\nvar TransformFeedback = /*#__PURE__*/function (_Resource) {\n  _inherits(TransformFeedback, _Resource);\n\n  _createClass(TransformFeedback, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function TransformFeedback(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TransformFeedback);\n\n    assertWebGL2Context(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TransformFeedback).call(this, gl, props));\n\n    _this.initialize(props);\n\n    _this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TransformFeedback, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.buffers = {};\n      this.unused = {};\n      this.configuration = null;\n      this.bindOnUse = true; // Unbind any currently bound buffers\n\n      if (!isObjectEmpty(this.buffers)) {\n        this.bind(function () {\n          return _this2._unbindBuffers();\n        });\n      }\n\n      this.setProps(props);\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      if ('buffers' in props) {\n        this.setBuffers(props.buffers);\n      }\n    }\n  }, {\n    key: \"setBuffers\",\n    value: function setBuffers() {\n      var _this3 = this;\n\n      var buffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.bind(function () {\n        for (var bufferName in buffers) {\n          _this3.setBuffer(bufferName, buffers[bufferName]);\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, bufferOrParams) {\n      var _this4 = this;\n\n      var location = this._getVaryingIndex(locationOrName);\n\n      var _this$_getBufferParam = this._getBufferParams(bufferOrParams),\n          buffer = _this$_getBufferParam.buffer,\n          sizeInBytes = _this$_getBufferParam.sizeInBytes,\n          offsetInBytes = _this$_getBufferParam.offsetInBytes;\n\n      if (location < 0) {\n        this.unused[locationOrName] = buffer;\n        log.warn(function () {\n          return \"\".concat(_this4.id, \" unused varying buffer \").concat(locationOrName);\n        })();\n        return this;\n      }\n\n      this.buffers[location] = bufferOrParams; // Need to avoid chrome bug where buffer that is already bound to a different target\n      // cannot be bound to 'TRANSFORM_FEEDBACK_BUFFER' target.\n\n      if (!this.bindOnUse) {\n        this._bindBuffer(location, buffer, offsetInBytes, sizeInBytes);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      var primitiveMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.gl.bindTransformFeedback(36386, this.handle);\n\n      this._bindBuffers();\n\n      this.gl.beginTransformFeedback(primitiveMode);\n      return this;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.gl.endTransformFeedback();\n\n      this._unbindBuffers();\n\n      this.gl.bindTransformFeedback(36386, null);\n      return this;\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_getBufferParams\",\n    value: function _getBufferParams(bufferOrParams) {\n      var offsetInBytes;\n      var sizeInBytes;\n      var buffer;\n\n      if (bufferOrParams instanceof Buffer === false) {\n        buffer = bufferOrParams.buffer;\n        sizeInBytes = bufferOrParams.sizeInBytes;\n        offsetInBytes = bufferOrParams.offsetInBytes;\n      } else {\n        buffer = bufferOrParams;\n      } // to use bindBufferRange, either offset or size must be specified, use default value for the other.\n\n\n      if (offsetInBytes !== undefined || sizeInBytes !== undefined) {\n        offsetInBytes = offsetInBytes || 0;\n        sizeInBytes = sizeInBytes || buffer.byteLength - offsetInBytes;\n      }\n\n      return {\n        buffer: buffer,\n        offsetInBytes: offsetInBytes,\n        sizeInBytes: sizeInBytes\n      };\n    }\n  }, {\n    key: \"_getVaryingInfo\",\n    value: function _getVaryingInfo(locationOrName) {\n      return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n    }\n  }, {\n    key: \"_getVaryingIndex\",\n    value: function _getVaryingIndex(locationOrName) {\n      if (this.configuration) {\n        return this.configuration.getVaryingInfo(locationOrName).location;\n      }\n\n      var location = Number(locationOrName);\n      return Number.isFinite(location) ? location : -1;\n    } // Need to avoid chrome bug where buffer that is already bound to a different target\n    // cannot be bound to 'TRANSFORM_FEEDBACK_BUFFER' target.\n\n  }, {\n    key: \"_bindBuffers\",\n    value: function _bindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          var _this$_getBufferParam2 = this._getBufferParams(this.buffers[bufferIndex]),\n              buffer = _this$_getBufferParam2.buffer,\n              sizeInBytes = _this$_getBufferParam2.sizeInBytes,\n              offsetInBytes = _this$_getBufferParam2.offsetInBytes;\n\n          this._bindBuffer(bufferIndex, buffer, offsetInBytes, sizeInBytes);\n        }\n      }\n    }\n  }, {\n    key: \"_unbindBuffers\",\n    value: function _unbindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          this._bindBuffer(bufferIndex, null);\n        }\n      }\n    }\n  }, {\n    key: \"_bindBuffer\",\n    value: function _bindBuffer(index, buffer) {\n      var offsetInBytes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var sizeInBytes = arguments.length > 3 ? arguments[3] : undefined;\n      var handle = buffer && buffer.handle;\n\n      if (!handle || sizeInBytes === undefined) {\n        this.gl.bindBufferBase(35982, index, handle);\n      } else {\n        this.gl.bindBufferRange(35982, index, handle, offsetInBytes, sizeInBytes);\n      }\n\n      return this;\n    } // RESOURCE METHODS\n\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTransformFeedback();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTransformFeedback(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindTransformFeedback(36386, this.handle);\n    }\n  }]);\n\n  return TransformFeedback;\n}(Resource);\n\nexport { TransformFeedback as default };","var arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  var scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length); // arrayBuffer, byteOffset, length (in elements)\n} // Uses copyWithin to significantly speed up typed array value filling\n\nexport function fillArray(_ref) {\n  var target = _ref.target,\n      source = _ref.source,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count;\n  var length = source.length;\n  var total = count * length;\n  var copied = 0;\n\n  for (var i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    // If we have copied less than half, copy everything we got\n    // else copy remaining in one operation\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n/*\n\n// Creates a new Uint8Array based on two different ArrayBuffers\n// @private\n// @param {ArrayBuffers} buffer1 The first buffer.\n// @param {ArrayBuffers} buffer2 The second buffer.\n// @return {ArrayBuffers} The new ArrayBuffer created out of the two.\n//\nexport function copyArrayBuffer(\n  targetBuffer, sourceBuffer, byteOffset, byteLength = sourceBuffer.byteLength\n) {\n  const targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  const sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\n\n*/","import { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\"; // WebGL2 VertexArrayObject class\n\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '../webgl-utils';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils';\nimport { getBrowser } from 'probe.gl';\n/* eslint-disable camelcase */\n\nvar OES_vertex_array_object = 'OES_vertex_array_object';\nvar ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\n\nvar VertexArrayObject = /*#__PURE__*/function (_Resource) {\n  _inherits(VertexArrayObject, _Resource);\n\n  _createClass(VertexArrayObject, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; // Attribute 0 can not be disable on most desktop OpenGL based browsers\n      // and on iOS Safari browser.\n\n      if (options.constantAttributeZero) {\n        return isWebGL2(gl) || getBrowser() === 'Chrome';\n      } // Whether additional objects can be created\n\n\n      return isWebGL2(gl) || gl.getExtension(OES_vertex_array_object);\n    } // Returns the global (null) vertex array object. Exists even when no extension available\n\n  }, {\n    key: \"getDefaultArray\",\n    value: function getDefaultArray(gl) {\n      gl.luma = gl.luma || {};\n\n      if (!gl.luma.defaultVertexArray) {\n        gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n          handle: null\n        });\n      }\n\n      return gl.luma.defaultVertexArray;\n    }\n  }, {\n    key: \"getMaxAttributes\",\n    value: function getMaxAttributes(gl) {\n      // TODO - should be cached per context\n      VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n      return VertexArrayObject.MAX_ATTRIBUTES;\n    } // Note: Constants are stored globally on the WebGL context, not the VAO\n    // So they need to be updated before every render\n    // TODO - use known type (in configuration or passed in) to allow non-typed arrays?\n    // TODO - remember/cache values to avoid setting them unnecessarily?\n\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(gl, location, array) {\n      switch (array.constructor) {\n        case Float32Array:\n          VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n          break;\n\n        case Int32Array:\n          VertexArrayObject._setConstantIntArray(gl, location, array);\n\n          break;\n\n        case Uint32Array:\n          VertexArrayObject._setConstantUintArray(gl, location, array);\n\n          break;\n\n        default:\n          assert(false);\n      }\n    } // Create a VertexArray\n\n  }]);\n\n  function VertexArrayObject(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArrayObject); // Use program's id if program but no id is supplied\n\n\n    var id = opts.id || opts.program && opts.program.id;\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VertexArrayObject).call(this, gl, Object.assign({}, opts, {\n      id: id\n    })));\n    _this.hasVertexArrays = VertexArrayObject.isSupported(gl);\n    _this.buffer = null;\n    _this.bufferValue = null;\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(VertexArrayObject, [{\n    key: \"delete\",\n    value: function _delete() {\n      _get(_getPrototypeOf(VertexArrayObject.prototype), \"delete\", this).call(this);\n\n      if (this.buffer) {\n        this.buffer.delete();\n      }\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.setProps(props);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      // TODO: decide which props should be supported\n      return this;\n    } // Set (bind) an elements buffer, for indexed rendering.\n    // Must be a Buffer bound to GL.ELEMENT_ARRAY_BUFFER. Constants not supported\n\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var _this2 = this;\n\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS); // The GL.ELEMENT_ARRAY_BUFFER_BINDING is stored on the VertexArrayObject...\n\n      this.bind(function () {\n        _this2.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n      });\n      return this;\n    } // Set a location in vertex attributes array to a bufferk, enables the location, sets divisor\n\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(location, buffer, accessor) {\n      // Check target\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer, accessor);\n      }\n\n      var size = accessor.size,\n          type = accessor.type,\n          stride = accessor.stride,\n          offset = accessor.offset,\n          normalized = accessor.normalized,\n          integer = accessor.integer,\n          divisor = accessor.divisor;\n      var gl = this.gl;\n      location = Number(location);\n      this.bind(function () {\n        // A non-zero buffer object must be bound to the GL_ARRAY_BUFFER target\n        gl.bindBuffer(34962, buffer.handle); // WebGL2 supports *integer* data formats, i.e. GPU will see integer values\n\n        if (integer) {\n          assert(isWebGL2(gl));\n          gl.vertexAttribIPointer(location, size, type, stride, offset);\n        } else {\n          // Attaches ARRAY_BUFFER with specified buffer format to location\n          gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n        }\n\n        gl.enableVertexAttribArray(location);\n        gl.vertexAttribDivisor(location, divisor || 0); // NOTE We don't unbind buffer here, typically another buffer will be bound just after\n      });\n      return this;\n    } // Enabling an attribute location makes it reference the currently bound buffer\n    // Disabling an attribute location makes it reference the global constant value\n    // TODO - handle single values for size 1 attributes?\n    // TODO - convert classic arrays based on known type?\n\n  }, {\n    key: \"enable\",\n    value: function enable(location) {\n      var _this3 = this;\n\n      var _enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true; // Attribute 0 cannot be disabled in most desktop OpenGL based browsers\n\n\n      var disablingAttributeZero = !_enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      });\n\n      if (!disablingAttributeZero) {\n        location = Number(location);\n        this.bind(function () {\n          return _enable ? _this3.gl.enableVertexAttribArray(location) : _this3.gl.disableVertexAttribArray(location);\n        });\n      }\n\n      return this;\n    } // Provide a means to create a buffer that is equivalent to a constant.\n    // NOTE: Desktop OpenGL cannot disable attribute 0.\n    // https://stackoverflow.com/questions/20305231/webgl-warning-attribute-0-is-disabled-\n    // this-has-significant-performance-penalt\n\n  }, {\n    key: \"getConstantBuffer\",\n    value: function getConstantBuffer(elementCount, value, accessor) {\n      // Create buffer only when needed, and reuse it (avoids inflating buffer creation statistics)\n      var constantValue = this._normalizeConstantArrayValue(value, accessor);\n\n      var byteLength = constantValue.byteLength * elementCount;\n      var length = constantValue.length * elementCount;\n      var updateNeeded = !this.buffer;\n      this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n      updateNeeded = updateNeeded || this.buffer.setByteLength(byteLength); // Reallocate and update contents if needed\n\n      updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n      if (updateNeeded) {\n        // Create a typed array that is big enough, and fill it with the required data\n        var typedArray = getScratchArray(value.constructor, length);\n        fillArray({\n          target: typedArray,\n          source: constantValue,\n          start: 0,\n          count: length\n        });\n        this.buffer.subData(typedArray);\n        this.bufferValue = value;\n      }\n\n      return this.buffer;\n    } // PRIVATE\n    // TODO - convert Arrays based on known type? (read type from accessor, don't assume Float32Array)\n    // TODO - handle single values for size 1 attributes?\n\n  }, {\n    key: \"_normalizeConstantArrayValue\",\n    value: function _normalizeConstantArrayValue(arrayValue, accessor) {\n      if (Array.isArray(arrayValue)) {\n        return new Float32Array(arrayValue);\n      }\n\n      return arrayValue;\n    }\n  }, {\n    key: \"_compareConstantArrayValues\",\n    value: function _compareConstantArrayValues(v1, v2) {\n      if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n        return false;\n      }\n\n      for (var i = 0; i < v1.length; ++i) {\n        if (v1[i] !== v2[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_createHandle\",\n    // RESOURCE IMPLEMENTATION\n    value: function _createHandle() {\n      this.hasVertexArrays = VertexArrayObject.isSupported(this.gl);\n\n      if (this.hasVertexArrays) {\n        return this.gl.createVertexArray();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle(handle) {\n      if (this.hasVertexArrays) {\n        this.gl.deleteVertexArray(handle);\n      }\n\n      return [this.elements]; // return [this.elements, ...this.buffers];\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      if (this.hasVertexArrays) {\n        this.gl.bindVertexArray(handle);\n      }\n    } // Generic getter for information about a vertex attribute at a given position\n\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, _ref) {\n      var _this4 = this;\n\n      var location = _ref.location;\n      assert(Number.isFinite(location));\n      return this.bind(function () {\n        switch (pname) {\n          case 34373:\n            return _this4.gl.getVertexAttribOffset(location, pname);\n\n          default:\n            return _this4.gl.getVertexAttrib(location, pname);\n        }\n      });\n    } // DEPRECATED\n\n    /*\n    setDivisor(location, divisor) {\n      location = Number(location);\n      this.bind(() => this.gl.vertexAttribDivisor(location, divisor));\n      return this;\n    }\n     // match assumed WebGL defaults\n    static resetConstants(gl) {\n      const MAX_ATTRIBUTES = VertexArrayObject.getMaxAttributes(gl);\n      for (let i = 0; i < MAX_ATTRIBUTES; i++) {\n        VertexArrayObject.setConstant(gl, i, [0, 0, 0, 1]);\n      }\n    }\n     // Resets all attributes (to default valued constants)\n    resetAttributes() {\n      // WebGL offers disabling, but no clear way to set a VertexArray buffer to `null`\n      // But Chrome does not like buffers that are bound to several binding points.\n      // So we just bind all the attributes to the dummy \"attribute zero\" buffer\n      this.buffer = this.buffer || new Buffer(this.gl, {size: 4});\n       for (const location in this.values) {\n        if (this.values[location] instanceof Buffer) {\n          this.gl.disableVertexAttribArray(location);\n          this.gl.bindBuffer(GL.ARRAY_BUFFER, this.buffer.handle);\n          this.gl.vertexAttribPointer(location, 1, GL.FLOAT, false, 0, 0);\n        }\n      }\n       this.setElementBuffer(null);\n      return this;\n    }\n    */\n\n  }, {\n    key: \"MAX_ATTRIBUTES\",\n    get: function get() {\n      return VertexArrayObject.getMaxAttributes(this.gl);\n    }\n  }], [{\n    key: \"_setConstantFloatArray\",\n    value: function _setConstantFloatArray(gl, location, array) {\n      switch (array.length) {\n        case 1:\n          gl.vertexAttrib1fv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttrib2fv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttrib3fv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttrib4fv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantIntArray\",\n    value: function _setConstantIntArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1iv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2iv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3iv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4iv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantUintArray\",\n    value: function _setConstantUintArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1uiv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2uiv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3uiv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4uiv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }]);\n\n  return VertexArrayObject;\n}(Resource);\n\nexport { VertexArrayObject as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\"; // VertexArray class\n\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { log, assert } from '../utils';\nimport { stubRemovedMethods } from '../utils';\nvar ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\n\nvar VertexArray = /*#__PURE__*/function () {\n  function VertexArray(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArray); // Use program's id if program is supplied but no id is supplied\n\n\n    var id = opts.id || opts.program && opts.program.id; // super(gl, Object.assign({}, opts, {id}));\n\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null; // Extracted information\n\n    this.elements = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null; // For attribute 0 on desktops, and created when unbinding buffers\n\n    this.vertexArrayObject = VertexArrayObject.isSupported(gl) ? new VertexArrayObject(gl) : VertexArrayObject.getDefaultArray(gl); // Issue errors when using removed methods\n\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable']);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  _createClass(VertexArray, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this.buffer) {\n        this.buffer.delete();\n      }\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.reset();\n      this.configuration = null;\n      this.bindOnUse = false;\n      return this.setProps(props);\n    } // Resets all attributes (to default valued constants)\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      // this.vertexArrayObject.reset();\n      this.elements = null;\n      var MAX_ATTRIBUTES = this.vertexArrayObject.MAX_ATTRIBUTES;\n      this.values = new Array(MAX_ATTRIBUTES).fill(null);\n      this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n      this.unused = {}; // Auto detects draw params\n\n      this.drawParams = null;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('elements' in props) {\n        this.setElementBuffer(props.elements);\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      return this;\n    } // Automatically called if buffers changed through VertexArray API\n\n  }, {\n    key: \"clearDrawParams\",\n    value: function clearDrawParams() {\n      this.drawParams = null;\n    }\n  }, {\n    key: \"getDrawParams\",\n    value: function getDrawParams(appParameters) {\n      // Auto deduced draw parameters\n      this.drawParams = this.drawParams || this._updateDrawParams(); // Override with any application supplied draw parameters\n\n      return Object.assign({}, this.drawParams, appParameters);\n    } // Set (bind) an array or map of vertex array buffers, either in numbered or named locations.\n    // For names that are not present in `location`, the supplied buffers will be ignored.\n    // if a single buffer of type GL.ELEMENT_ARRAY_BUFFER is present, it will be set as elements\n    //   Signatures:\n    //     {attributeName: buffer}\n    //     {attributeName: [buffer, accessor]}\n    //     {attributeName: (typed) array} => constant\n\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes(attributes) {\n      var _this = this;\n\n      this.vertexArrayObject.bind(function () {\n        for (var locationOrName in attributes) {\n          var value = attributes[locationOrName];\n\n          if (value instanceof Buffer) {\n            //  Signature: attributeName: buffer\n            _this.setBuffer(locationOrName, value);\n          } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n            // Signature: attributeName: [buffer, accessor]\n            var buffer = value[0];\n            var accessor = value[1];\n\n            _this.setBuffer(locationOrName, buffer, accessor);\n          } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n            //  Signature: attributeName: (short) (typed) array => constant\n            _this.setConstant(locationOrName, value);\n          } else {\n            throw new Error(ERR_ATTRIBUTE_TYPE);\n          }\n        } // Make sure we don't leave any bindings\n\n\n        _this.gl.bindBuffer(34962, null);\n      });\n      return this;\n    } // Set (bind) an elements buffer, for indexed rendering.\n    // Must be a Buffer bound to GL.ELEMENT_ARRAY_BUFFER. Constants not supported\n\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.elements = elementBuffer; // Save value for debugging\n\n      this.clearDrawParams(); // Update vertexArray immediately if we have our own array\n\n      if (!this.vertexArrayObject.isDefaultArray) {\n        this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n      }\n\n      return this;\n    } // Set a location in vertex attributes array to a buffer\n\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, buffer) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}; // Check target\n\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer);\n      }\n\n      var _this$_resolveLocatio = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor),\n          location = _this$_resolveLocatio.location,\n          accessor = _this$_resolveLocatio.accessor;\n\n      if (location >= 0) {\n        this.values[location] = buffer;\n        this.accessors[location] = accessor;\n        this.clearDrawParams(); // Update vertexArray immediately if we have our own array\n\n        if (!this.vertexArrayObject.isDefaultArray) {\n          this.vertexArrayObject.setBuffer(location, buffer, accessor);\n        }\n      }\n\n      return this;\n    } // Set attribute to constant value (small typed array corresponding to one vertex' worth of data)\n\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(locationOrName, arrayValue) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var _this$_resolveLocatio2 = this._resolveLocationAndAccessor(locationOrName, arrayValue, appAccessor),\n          location = _this$_resolveLocatio2.location,\n          accessor = _this$_resolveLocatio2.accessor;\n\n      if (location >= 0) {\n        arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue, accessor);\n        this.values[location] = arrayValue;\n        this.accessors[location] = accessor;\n        this.clearDrawParams(); // Update vertexArray immediately if we have our own array\n        // NOTE: We set the actual constant value later on bind. We can't set the value now since\n        // constants are global and affect all other VertexArrays that have disabled attributes\n        // in the same location.\n        // We do disable the attribute which makes it use the global constant value at that location\n\n        if (!this.vertexArrayObject.isDefaultArray) {\n          this.vertexArrayObject.enable(location, false);\n        }\n      }\n\n      return this;\n    } // Workaround for Chrome TransformFeedback binding issue\n    // If required, unbind temporarily to avoid conflicting with TransformFeedback\n\n  }, {\n    key: \"unbindBuffers\",\n    value: function unbindBuffers() {\n      var _this2 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this2.elements) {\n          _this2.setElementBuffer(null);\n        } // Chrome does not like buffers that are bound to several binding points,\n        // so we need to offer and unbind facility\n        // WebGL offers disabling, but no clear way to set a VertexArray buffer to `null`\n        // So we just bind all the attributes to the dummy \"attribute zero\" buffer\n\n\n        _this2.buffer = _this2.buffer || new Buffer(_this2.gl, {\n          size: 4\n        });\n\n        for (var location = 0; location < _this2.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          if (_this2.values[location] instanceof Buffer) {\n            _this2.gl.disableVertexAttribArray(location);\n\n            _this2.gl.bindBuffer(34962, _this2.buffer.handle);\n\n            _this2.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n          }\n        }\n      });\n      return this;\n    } // Workaround for Chrome TransformFeedback binding issue\n    // If required, rebind rebind after temporary unbind\n\n  }, {\n    key: \"bindBuffers\",\n    value: function bindBuffers() {\n      var _this3 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this3.elements) {\n          _this3.setElementBuffer(_this3.elements);\n        }\n\n        for (var location = 0; location < _this3.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          var buffer = _this3.values[location];\n\n          if (buffer instanceof Buffer) {\n            _this3.setBuffer(location, buffer);\n          }\n        }\n      });\n      return this;\n    } // Bind for use\n    // When a vertex array is about to be used, we must:\n    // - Set constant attributes (since these are stored on the context and reset on bind)\n    // - Check if we need to initialize the buffer\n\n  }, {\n    key: \"bindForDraw\",\n    value: function bindForDraw(vertexCount, instanceCount, func) {\n      var _this4 = this;\n\n      var value;\n      this.vertexArrayObject.bind(function () {\n        // Make sure that any constant attributes are updated (stored on the context, not the VAO)\n        // Also handles attribute 0\n        _this4._setConstantAttributes(vertexCount, instanceCount);\n\n        if (!_this4.vertexArrayObject.hasVertexArrays) {\n          _this4.bindBuffers();\n        }\n\n        value = func();\n\n        if (!_this4.vertexArrayObject.hasVertexArrays) {\n          _this4.unbindBuffers();\n        }\n      });\n      return value;\n    } // PRIVATE\n    // Resolve locations and accessors\n\n  }, {\n    key: \"_resolveLocationAndAccessor\",\n    value: function _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n      var _this5 = this;\n\n      var location = this._getAttributeIndex(locationOrName);\n\n      if (!Number.isFinite(location) || location < 0) {\n        this.unused[locationOrName] = value;\n        log.once(3, function () {\n          return \"unused value \".concat(locationOrName, \" in \").concat(_this5.id);\n        })();\n        return this;\n      }\n\n      var accessInfo = this._getAttributeInfo(locationOrName); // Resolve the partial accessors into a final accessor\n\n\n      var accessor = Accessor.resolve(accessInfo.accessor, valueAccessor, appAccessor);\n      var size = accessor.size,\n          type = accessor.type;\n      assert(Number.isFinite(size) && Number.isFinite(type));\n      return {\n        location: location,\n        accessor: accessor\n      };\n    }\n  }, {\n    key: \"_getAttributeInfo\",\n    value: function _getAttributeInfo(attributeName) {\n      return this.configuration && this.configuration.getAttributeInfo(attributeName);\n    }\n  }, {\n    key: \"_getAttributeIndex\",\n    value: function _getAttributeIndex(locationOrName) {\n      if (this.configuration) {\n        return this.configuration.getAttributeLocation(locationOrName);\n      }\n\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return location;\n      }\n\n      return -1;\n    } // Updates all constant attribute values (constants are used when vertex attributes are disabled).\n    // This needs to be done repeatedly since in contrast to buffer bindings,\n    // constants are stored on the WebGL context, not the VAO\n\n  }, {\n    key: \"_setConstantAttributes\",\n    value: function _setConstantAttributes(vertexCount, instanceCount) {\n      // TODO - use accessor to determine what length to use\n      var elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n      var constant = this.values[0];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttributeZero(constant, elementCount);\n      }\n\n      for (var location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        constant = this.values[location];\n\n        if (ArrayBuffer.isView(constant)) {\n          this._setConstantAttribute(location, constant);\n        }\n      }\n    }\n  }, {\n    key: \"_setConstantAttributeZero\",\n    value: function _setConstantAttributeZero(constant, elementCount) {\n      if (VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      })) {\n        this._setConstantAttribute(0, constant);\n\n        return;\n      } // Get a dummy buffer populated with repeated constants\n\n\n      var buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant); // Set the buffer on location 0\n\n      this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n    }\n  }, {\n    key: \"_setConstantAttribute\",\n    value: function _setConstantAttribute(location, constant) {\n      VertexArrayObject.setConstant(this.gl, location, constant); // If we are using the global VertexArrayObject, we need to disable the attribute now\n\n      if (this.vertexArrayObject.isDefault) {\n        this.vertexArrayObject.enable(location, false);\n      }\n    } // Walks the buffers and updates draw parameters\n\n  }, {\n    key: \"_updateDrawParams\",\n    value: function _updateDrawParams() {\n      var drawParams = {\n        isIndexed: false,\n        isInstanced: false,\n        indexCount: Infinity,\n        vertexCount: Infinity,\n        instanceCount: Infinity\n      };\n\n      for (var location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        this._updateDrawParamsForLocation(drawParams, location);\n      }\n\n      if (this.elements) {\n        // indexing is autodetected - buffer with target GL.ELEMENT_ARRAY_BUFFER\n        // index type is saved for drawElement calls\n        drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n        drawParams.isIndexed = true;\n        drawParams.indexType = this.elements.accessor.type;\n      } // Post-calculation checks\n\n\n      if (drawParams.indexCount === Infinity) {\n        drawParams.indexCount = 0;\n      }\n\n      if (drawParams.vertexCount === Infinity) {\n        drawParams.vertexCount = 0;\n      }\n\n      if (drawParams.instanceCount === Infinity) {\n        drawParams.instanceCount = 0;\n      }\n\n      return drawParams;\n    }\n  }, {\n    key: \"_updateDrawParamsForLocation\",\n    value: function _updateDrawParamsForLocation(drawParams, location) {\n      var value = this.values[location];\n      var accessor = this.accessors[location];\n\n      if (!value) {\n        return;\n      } // Check if instanced (whether buffer or constant)\n\n\n      var divisor = accessor.divisor;\n      var isInstanced = divisor > 0;\n      drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n      if (value instanceof Buffer) {\n        var buffer = value;\n\n        if (isInstanced) {\n          // instance attribute\n          var instanceCount = buffer.getVertexCount(accessor);\n          drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n        } else {\n          // normal attribute\n          var vertexCount = buffer.getVertexCount(accessor);\n          drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n        }\n      }\n    } // DEPRECATED\n\n  }, {\n    key: \"setElements\",\n    value: function setElements() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      log.deprecated('setElements', 'setElementBuffer');\n      return this.setElementBuffer(elementBuffer, accessor);\n    }\n  }]);\n\n  return VertexArray;\n}();\n\nexport { VertexArray as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","var config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = true;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure(options) {\n  if ('epsilon' in options) {\n    config.EPSILON = options.epsilon;\n  }\n\n  if ('debug' in options) {\n    config.debug = options.debug;\n  }\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return parseFloat(value.toPrecision(precision));\n}\nexport function formatAngle(value) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$precision = _ref2.precision,\n      precision = _ref2$precision === void 0 ? config.precision || 4 : _ref2$precision,\n      _ref2$printDegrees = _ref2.printDegrees,\n      printDegrees = _ref2$printDegrees === void 0 ? config.printAngles : _ref2$printDegrees;\n\n  value = printDegrees ? degrees(value) : value;\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision))).concat(printDegrees ? '' : '');\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && value.length !== undefined;\n}\nexport function clone(array) {\n  return array.clone ? array.clone() : new Array(array);\n}\n\nfunction map(value, func) {\n  if (isArray(value)) {\n    var result = clone(value);\n\n    for (var i = 0; i < result.length; ++i) {\n      result[i] = func(result[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function radians(degrees) {\n  return map(degrees, function (degrees) {\n    return degrees / 180 * Math.PI;\n  });\n}\nexport function degrees(radians) {\n  return map(radians, function (radians) {\n    return radians * 180 / Math.PI;\n  });\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b) {\n  if (isArray(a) && isArray(b)) {\n    if (a === b) {\n      return true;\n    }\n\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!equals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals } from './common';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this).check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = (i < 0 || arguments.length <= i ? undefined : arguments[i]) || 0;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"inverse\",\n    value: function inverse() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = 1 / this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate(this)) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(a) {\n      return this.scale(a);\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from './common';\n\nvar assert = function assert(x, m) {\n  if (!x) {\n    throw new Error(m);\n  }\n};\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0; _i < vectors.length; _i++) {\n        var vector = vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0; _i2 < vectors.length; _i2++) {\n        var vector = vectors[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len3 = arguments.length, vectors = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        vectors[_key3] = arguments[_key3];\n      }\n\n      for (var _i3 = 0; _i3 < vectors.length; _i3++) {\n        var vector = vectors[_i3];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len4 = arguments.length, vectors = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        vectors[_key4] = arguments[_key4];\n      }\n\n      for (var _i4 = 0; _i4 < vectors.length; _i4++) {\n        var vector = vectors[_i4];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scaleAndAdd\",\n    value: function scaleAndAdd(vector, scale) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = this[i] * scale + vector[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import \"core-js/modules/es.math.hypot.js\";\n\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import \"core-js/modules/es.math.hypot.js\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './lib/vector';\nimport { checkNumber } from './lib/common';\nimport * as vec3 from 'gl-matrix/vec3';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, 3));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z);\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"operation\",\n    value: function operation(_operation) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      _operation.apply(void 0, [this, this].concat(args));\n\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","export function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  return v.every(Number.isFinite);\n}","import \"core-js/modules/es.math.hypot.js\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './lib/vector';\nimport * as vec2 from 'gl-matrix/vec2';\n\nvar Vector2 = function (_Vector) {\n  _inherits(Vector2, _Vector);\n\n  function Vector2() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, Vector2);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector2).call(this, 2));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y);\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector2, [{\n    key: \"cross\",\n    value: function cross(vector) {\n      vec2.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"horizontalAngle\",\n    value: function horizontalAngle() {\n      return Math.atan2(this.y, this.x);\n    }\n  }, {\n    key: \"verticalAngle\",\n    value: function verticalAngle() {\n      return Math.atan2(this.x, this.y);\n    }\n  }, {\n    key: \"operation\",\n    value: function operation(_operation) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      _operation.apply(void 0, [this, this].concat(args));\n\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 2;\n    }\n  }]);\n\n  return Vector2;\n}(Vector);\n\nexport { Vector2 as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './lib/vector';\nimport { checkNumber } from './lib/common';\n\nvar Vector4 = function (_Vector) {\n  _inherits(Vector4, _Vector);\n\n  function Vector4() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n    _classCallCheck(this, Vector4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector4).call(this, 4));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z, w);\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector4, [{\n    key: \"applyMatrix4\",\n    value: function applyMatrix4(m) {\n      m.transformVector(this, this);\n      return this;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 4;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(value) {\n      return this[3] = checkNumber(value);\n    }\n  }]);\n\n  return Vector4;\n}(Vector);\n\nexport { Vector4 as default };","import \"core-js/modules/es.math.hypot.js\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es.math.hypot.js\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './lib/math-array';\nimport { checkNumber } from './lib/common';\nimport { validateVector } from './lib/validators';\nimport Vector2 from './vector2';\nimport Vector3 from './vector3';\nimport Vector4 from './vector4';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nexport function validateMatrix4(m) {\n  return m.length === 16 && Number.isFinite(m[0]) && Number.isFinite(m[1]) && Number.isFinite(m[2]) && Number.isFinite(m[3]) && Number.isFinite(m[4]) && Number.isFinite(m[5]) && Number.isFinite(m[6]) && Number.isFinite(m[7]) && Number.isFinite(m[8]) && Number.isFinite(m[9]) && Number.isFinite(m[10]) && Number.isFinite(m[11]) && Number.isFinite(m[12]) && Number.isFinite(m[13]) && Number.isFinite(m[14]) && Number.isFinite(m[15]);\n}\n\nvar Matrix4 = function (_MathArray) {\n  _inherits(Matrix4, _MathArray);\n\n  function Matrix4() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, 16));\n\n    if (Array.isArray(args[0]) && arguments.length === 1) {\n      _this.copy(args[0]);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"setRowMajor\",\n    value: function setRowMajor() {\n      var m00 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var m01 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var m02 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var m03 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var m10 = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      var m11 = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var m12 = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var m13 = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var m20 = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n      var m21 = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      var m22 = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : 1;\n      var m23 = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : 0;\n      var m30 = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : 0;\n      var m31 = arguments.length > 13 && arguments[13] !== undefined ? arguments[13] : 0;\n      var m32 = arguments.length > 14 && arguments[14] !== undefined ? arguments[14] : 0;\n      var m33 = arguments.length > 15 && arguments[15] !== undefined ? arguments[15] : 1;\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setColumnMajor\",\n    value: function setColumnMajor() {\n      var m00 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var m10 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var m20 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var m30 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var m01 = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      var m11 = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n      var m21 = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n      var m31 = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n      var m02 = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n      var m12 = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 0;\n      var m22 = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : 1;\n      var m32 = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : 0;\n      var m03 = arguments.length > 12 && arguments[12] !== undefined ? arguments[12] : 0;\n      var m13 = arguments.length > 13 && arguments[13] !== undefined ? arguments[13] : 0;\n      var m23 = arguments.length > 14 && arguments[14] !== undefined ? arguments[14] : 0;\n      var m33 = arguments.length > 15 && arguments[15] !== undefined ? arguments[15] : 1;\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set() {\n      return this.setColumnMajor.apply(this, arguments);\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(i, j) {\n      var columnMajor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      return columnMajor ? this[i][j] : this[j][i];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(i, j, value) {\n      var columnMajor = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (columnMajor) {\n        this[i][j] = checkNumber(value);\n      } else {\n        this[j][i] = checkNumber(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n      mat4.frustum(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(_ref2) {\n      var eye = _ref2.eye,\n          _ref2$center = _ref2.center,\n          center = _ref2$center === void 0 ? [0, 0, 0] : _ref2$center,\n          _ref2$up = _ref2.up,\n          up = _ref2$up === void 0 ? [0, 1, 0] : _ref2$up;\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref3) {\n      var left = _ref3.left,\n          right = _ref3.right,\n          bottom = _ref3.bottom,\n          top = _ref3.top,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref4) {\n      var _ref4$fovy = _ref4.fovy,\n          fovy = _ref4$fovy === void 0 ? 45 * Math.PI / 180 : _ref4$fovy,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$focalDistance = _ref4.focalDistance,\n          focalDistance = _ref4$focalDistance === void 0 ? 1 : _ref4$focalDistance,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          fovy = _ref5.fovy,\n          _ref5$fov = _ref5.fov,\n          fov = _ref5$fov === void 0 ? 45 * Math.PI / 180 : _ref5$fov,\n          _ref5$aspect = _ref5.aspect,\n          aspect = _ref5$aspect === void 0 ? 1 : _ref5$aspect,\n          _ref5$near = _ref5.near,\n          near = _ref5$near === void 0 ? 0.1 : _ref5$near,\n          _ref5$far = _ref5.far,\n          far = _ref5$far === void 0 ? 500 : _ref5$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref6) {\n      var _ref7 = _slicedToArray(_ref6, 3),\n          rx = _ref7[0],\n          ry = _ref7[1],\n          rz = _ref7[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transformVector2\",\n    value: function transformVector2(vector, out) {\n      out = out || new Vector2();\n      vec2.transformMat4(out, vector, this);\n      validateVector(out, 2);\n      return out;\n    }\n  }, {\n    key: \"transformVector3\",\n    value: function transformVector3(vector, out) {\n      out = out || new Vector3();\n      vec3.transformMat4(out, vector, this);\n      validateVector(out, 3);\n      return out;\n    }\n  }, {\n    key: \"transformVector4\",\n    value: function transformVector4(vector, out) {\n      out = out || new Vector4();\n      vec4.transformMat4(out, vector, this);\n      validateVector(out, 4);\n      return out.check();\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, out) {\n      switch (vector.length) {\n        case 2:\n          return this.transformVector2(vector, out);\n\n        case 3:\n          return this.transformVector3(vector, out);\n\n        case 4:\n          return this.transformVector4(vector, out);\n\n        default:\n          throw new Error('Illegal vector');\n      }\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, out) {\n      return this._transformVector(vector, out, 0);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, out) {\n      return this._transformVector(vector, out, 1);\n    }\n  }, {\n    key: \"_transformVector\",\n    value: function _transformVector(vector, out, w) {\n      switch (vector.length) {\n        case 2:\n          out = out || new Vector2();\n          vec4.transformMat4(out, [vector[0], vector[1], 0, w], this);\n          out.length = 2;\n          validateVector(out, 2);\n          break;\n\n        case 3:\n          out = out || new Vector3();\n          vec4.transformMat4(out, [vector[0], vector[1], vector[2], w], this);\n          out.length = 3;\n          validateVector(out, 3);\n          break;\n\n        case 4:\n          if (Boolean(w) !== Boolean(vector[3])) {\n            throw new Error('math.gl: Matrix4.transformPoint - invalid vector');\n          }\n\n          out = out || new Vector4();\n          vec4.transformMat4(out, vector, this);\n          validateVector(out, 4);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      return out;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }]);\n\n  return Matrix4;\n}(MathArray);\n\nexport { Matrix4 as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { uid } from '../utils';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport assert from '../utils/assert';\n\nvar Object3D = /*#__PURE__*/function () {\n  function Object3D(_ref) {\n    var id = _ref.id,\n        _ref$display = _ref.display,\n        display = _ref$display === void 0 ? true : _ref$display;\n\n    _classCallCheck(this, Object3D); // whether to display the object at all\n\n\n    this.id = id || uid(this.constructor.name);\n    this.display = true; // model position, rotation, scale and all in all matrix\n\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n  }\n\n  _createClass(Object3D, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"{id: \".concat(this.id, \", children: \").concat(this.children, \")}\");\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      assert(position.length === 3, 'setPosition requires vector argument');\n      this.position = position;\n      return this;\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      assert(rotation.length === 3, 'setRotation requires vector argument');\n      this.rotation = rotation;\n      return this;\n    }\n  }, {\n    key: \"setScale\",\n    value: function setScale(scale) {\n      assert(scale.length === 3, 'setScale requires vector argument');\n      this.scale = scale;\n      return this;\n    }\n  }, {\n    key: \"setMatrixComponents\",\n    value: function setMatrixComponents(_ref2) {\n      var position = _ref2.position,\n          rotation = _ref2.rotation,\n          scale = _ref2.scale,\n          _ref2$update = _ref2.update,\n          update = _ref2$update === void 0 ? true : _ref2$update;\n\n      if (position) {\n        this.setPosition(position);\n      }\n\n      if (rotation) {\n        this.setRotation(rotation);\n      }\n\n      if (scale) {\n        this.setScale(scale);\n      }\n\n      if (update) {\n        this.updateMatrix();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"updateMatrix\",\n    value: function updateMatrix() {\n      var pos = this.position;\n      var rot = this.rotation;\n      var scale = this.scale;\n      this.matrix.identity();\n      this.matrix.translate(pos);\n      this.matrix.rotateXYZ(rot);\n      this.matrix.scale(scale);\n      return this;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          position = _ref3.position,\n          rotation = _ref3.rotation,\n          scale = _ref3.scale;\n\n      if (position) {\n        this.setPosition(position);\n      }\n\n      if (rotation) {\n        this.setRotation(rotation);\n      }\n\n      if (scale) {\n        this.setScale(scale);\n      }\n\n      this.updateMatrix();\n      return this;\n    }\n  }, {\n    key: \"getCoordinateUniforms\",\n    value: function getCoordinateUniforms(viewMatrix, modelMatrix) {\n      // TODO - solve multiple class problem\n      // assert(viewMatrix instanceof Matrix4);\n      assert(viewMatrix);\n      modelMatrix = modelMatrix || this.matrix;\n      var worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n      var worldInverse = worldMatrix.invert();\n      var worldInverseTranspose = worldInverse.transpose();\n      return {\n        viewMatrix: viewMatrix,\n        modelMatrix: modelMatrix,\n        objectMatrix: modelMatrix,\n        worldMatrix: worldMatrix,\n        worldInverseMatrix: worldInverse,\n        worldInverseTransposeMatrix: worldInverseTranspose\n      };\n    } // TODO - copied code, not yet vetted\n\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      if (!this.parent) {\n        this.endPosition.set(this.position);\n        this.endRotation.set(this.rotation);\n        this.endScale.set(this.scale);\n      } else {\n        var parent = this.parent;\n        this.endPosition.set(this.position.add(parent.endPosition));\n        this.endRotation.set(this.rotation.add(parent.endRotation));\n        this.endScale.set(this.scale.add(parent.endScale));\n      }\n\n      var ch = this.children;\n\n      for (var i = 0; i < ch.length; ++i) {\n        ch[i].transform();\n      }\n\n      return this;\n    }\n  }]);\n\n  return Object3D;\n}();\n\nexport { Object3D as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n/* eslint-disable complexity */\n\nimport { Buffer } from '../webgl';\nimport { log, uid } from '../utils';\nimport { hasFeature, FEATURES } from '../webgl-context/context-features';\n\nvar Attribute = /*#__PURE__*/function () {\n  function Attribute(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Attribute);\n\n    var _opts$id = opts.id,\n        id = _opts$id === void 0 ? uid('attribute') : _opts$id,\n        type = opts.type,\n        _opts$isIndexed = opts.isIndexed,\n        isIndexed = _opts$isIndexed === void 0 ? false : _opts$isIndexed; // Options that cannot be changed later\n\n    this.gl = gl;\n    this.id = id;\n    this.isIndexed = isIndexed;\n    this.target = isIndexed ? 34963 : 34962;\n    this.type = type;\n\n    if (isIndexed && !type) {\n      // If the attribute is indices, auto infer the correct type\n      // WebGL2 and WebGL1 w/ uint32 index extension support accepts Uint32Array, otherwise Uint16Array\n      this.type = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } // Initialize the attribute descriptor, with WebGL and metadata fields\n\n\n    this.value = null;\n    this.externalBuffer = null;\n    this.buffer = null;\n    this.userData = {}; // Reserved for application\n\n    this.update(opts); // Sanity - no app fields on our attributes. Use userData instead.\n\n    Object.seal(this); // Check all fields and generate helpful error messages\n\n    this._validateAttributeDefinition();\n  }\n\n  _createClass(Attribute, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this.buffer) {\n        this.buffer.delete();\n        this.buffer = null;\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(opts) {\n      var value = opts.value,\n          buffer = opts.buffer,\n          _opts$constant = opts.constant,\n          constant = _opts$constant === void 0 ? this.constant || false : _opts$constant;\n      this.constant = constant;\n\n      if (buffer) {\n        this.externalBuffer = buffer;\n        this.constant = false;\n        this.type = buffer.accessor.type;\n\n        if (buffer.accessor.divisor !== undefined) {\n          this.divisor = buffer.accessor.divisor;\n        }\n      } else if (value) {\n        this.externalBuffer = null;\n        this.value = value;\n\n        if (!constant && this.gl) {\n          // Create buffer if needed\n          this.buffer = this.buffer || new Buffer(this.gl, Object.assign({}, opts, {\n            id: this.id,\n            target: this.target,\n            type: this.type\n          }));\n          this.buffer.setData({\n            data: value\n          });\n          this.type = this.buffer.accessor.type;\n        }\n      }\n\n      this._setAccessor(opts);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      if (this.constant) {\n        return null;\n      }\n\n      return this.externalBuffer || this.buffer;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (this.constant) {\n        return this.value;\n      }\n\n      var buffer = this.externalBuffer || this.buffer;\n\n      if (buffer) {\n        return [buffer, this];\n      }\n\n      return null;\n    } // Sets all accessor props except type\n    // TODO - store on `this.accessor`\n\n  }, {\n    key: \"_setAccessor\",\n    value: function _setAccessor(opts) {\n      var _opts$size = opts.size,\n          size = _opts$size === void 0 ? this.size : _opts$size,\n          _opts$offset = opts.offset,\n          offset = _opts$offset === void 0 ? this.offset || 0 : _opts$offset,\n          _opts$stride = opts.stride,\n          stride = _opts$stride === void 0 ? this.stride || 0 : _opts$stride,\n          _opts$normalized = opts.normalized,\n          normalized = _opts$normalized === void 0 ? this.normalized || false : _opts$normalized,\n          _opts$integer = opts.integer,\n          integer = _opts$integer === void 0 ? this.integer || false : _opts$integer,\n          _opts$divisor = opts.divisor,\n          divisor = _opts$divisor === void 0 ? this.divisor || 0 : _opts$divisor,\n          instanced = opts.instanced,\n          isInstanced = opts.isInstanced;\n      this.size = size;\n      this.offset = offset;\n      this.stride = stride;\n      this.normalized = normalized;\n      this.integer = integer;\n      this.divisor = divisor;\n\n      if (isInstanced !== undefined) {\n        log.deprecated('Attribute.isInstanced');\n        this.divisor = isInstanced ? 1 : 0;\n      }\n\n      if (instanced !== undefined) {\n        log.deprecated('Attribute.instanced');\n        this.divisor = instanced ? 1 : 0;\n      }\n    }\n  }, {\n    key: \"_validateAttributeDefinition\",\n    value: function _validateAttributeDefinition() {// Can be undefined for buffers (auto deduced from shaders)\n      // or larger than 4 for uniform arrays\n      // assert(\n      //   this.size >= 1 && this.size <= 4,\n      //   `Attribute definition for ${this.id} invalid size`\n      // );\n    }\n  }]);\n\n  return Attribute;\n}();\n\nexport { Attribute as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { uid } from '../utils';\nimport assert from '../utils/assert'; // Rendering primitives - specify how to extract primitives from vertices.\n// NOTE: These are numerically identical to the corresponding WebGL/OpenGL constants\n\nexport var DRAW_MODE = {\n  POINTS: 0x0000,\n  // draw single points.\n  LINES: 0x0001,\n  // draw lines. Each vertex connects to the one after it.\n  LINE_LOOP: 0x0002,\n  // draw lines. Each set of two vertices is treated as a separate line segment.\n  LINE_STRIP: 0x0003,\n  // draw a connected group of line segments from the first vertex to the last\n  TRIANGLES: 0x0004,\n  // draw triangles. Each set of three vertices creates a separate triangle.\n  TRIANGLE_STRIP: 0x0005,\n  // draw a connected group of triangles.\n  TRIANGLE_FAN: 0x0006 // draw a connected group of triangles.\n  // Each vertex connects to the previous and the first vertex in the fan.\n\n}; // Helper function to handle string draw modes - when using this library without WebGL constants\n\nexport function getDrawMode(drawMode) {\n  var mode = typeof drawMode === 'string' ? DRAW_MODE[drawMode] || DRAW_MODE.TRIANGLES : drawMode;\n  assert(mode >= 0 && mode <= DRAW_MODE.TRIANGLE_FAN, 'Illegal drawMode');\n  return mode;\n}\n\nvar Geometry = /*#__PURE__*/function () {\n  function Geometry() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Geometry);\n\n    var id = opts.id,\n        _opts$drawMode = opts.drawMode,\n        drawMode = _opts$drawMode === void 0 ? DRAW_MODE.TRIANGLES : _opts$drawMode,\n        _opts$vertexCount = opts.vertexCount,\n        vertexCount = _opts$vertexCount === void 0 ? undefined : _opts$vertexCount,\n        attributes = opts.attributes;\n    this.id = id || uid(this.constructor.name);\n    this.drawMode = getDrawMode(drawMode);\n    this.vertexCount = vertexCount;\n    this.attributes = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    Object.seal(this);\n\n    if (attributes) {\n      this.setAttributes(attributes);\n    }\n  }\n\n  _createClass(Geometry, [{\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.needsRedraw = redraw;\n      return this;\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$clearRedrawFlags = _ref.clearRedrawFlags,\n          clearRedrawFlags = _ref$clearRedrawFlags === void 0 ? false : _ref$clearRedrawFlags;\n\n      var redraw = false;\n      redraw = redraw || this.needsRedraw;\n      this.needsRedraw = this.needsRedraw && !clearRedrawFlags;\n      return redraw;\n    }\n  }, {\n    key: \"setVertexCount\",\n    value: function setVertexCount(vertexCount) {\n      this.vertexCount = vertexCount;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      if (this.vertexCount !== undefined) {\n        return this.vertexCount;\n      } else if (this.attributes.indices) {\n        return this.attributes.indices.value.length;\n      } else if (this.attributes.vertices) {\n        return this.attributes.vertices.value.length / 3;\n      } else if (this.attributes.positions) {\n        return this.attributes.positions.value.length / 3;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(attributeName) {\n      return Boolean(this.attributes[attributeName]);\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(attributeName) {\n      var attribute = this.attributes[attributeName];\n      assert(attribute);\n      return attribute.value;\n    }\n  }, {\n    key: \"getArray\",\n    value: function getArray(attributeName) {\n      var attribute = this.attributes[attributeName];\n      assert(attribute);\n      return attribute.value;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    } // Attribute\n    // value: typed array\n    // type: indices, vertices, uvs\n    // size: elements per vertex\n    // target: WebGL buffer type (string or constant)\n\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes(attributes) {\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName]; // Wrap \"unwrapped\" arrays and try to autodetect their type\n\n        attribute = ArrayBuffer.isView(attribute) ? {\n          value: attribute\n        } : attribute;\n        assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n        this._autoDetectAttribute(attributeName, attribute);\n\n        this.attributes[attributeName] = attribute;\n      }\n\n      this.setNeedsRedraw();\n      return this;\n    } // Check for well known attribute names\n\n    /* eslint-disable default-case, complexity */\n\n  }, {\n    key: \"_autoDetectAttribute\",\n    value: function _autoDetectAttribute(attributeName, attribute) {\n      var category;\n\n      switch (attributeName) {\n        case 'indices':\n          category = category || 'indices';\n          break;\n\n        case 'texCoords':\n        case 'texCoord1':\n        case 'texCoord2':\n        case 'texCoord3':\n          category = 'uvs';\n          break;\n\n        case 'vertices':\n        case 'positions':\n        case 'normals':\n        case 'pickingColors':\n          category = 'vectors';\n          break;\n      } // Check for categorys\n\n\n      switch (category) {\n        case 'vectors':\n          attribute.size = attribute.size || 3;\n          break;\n\n        case 'uvs':\n          attribute.size = attribute.size || 2;\n          break;\n\n        case 'indices':\n          attribute.size = attribute.size || 1;\n          attribute.isIndexed = attribute.isIndexed === undefined ? true : attribute.isIndexed;\n          assert(attribute.value instanceof Uint16Array || attribute.value instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n          break;\n      }\n\n      assert(attribute.size, \"attribute \".concat(attributeName, \" needs size\"));\n    }\n    /* eslint-enable default-case, complexity */\n\n  }, {\n    key: \"_print\",\n    value: function _print(attributeName) {\n      return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n    }\n  }]);\n\n  return Geometry;\n}();\n\nexport { Geometry as default };","// Default Shaders\n// A set of base shaders that leverage the shader module system,\n// dynamically enabling features depending on which modules are included\nimport MODULAR_VS from './modular-vertex.glsl';\nimport MODULAR_FS from './modular-fragment.glsl';\nexport var MODULAR_SHADERS = {\n  vs: MODULAR_VS,\n  fs: MODULAR_FS,\n  defaultUniforms: {}\n};","export default \"#define SHADER_NAME luma_modular_vertex\\n\\n// object attributes\\nattribute vec3 positions;\\nattribute vec3 normals;\\nattribute vec4 colors;\\nattribute vec2 texCoords;\\nattribute vec3 pickingColors;\\n\\nvoid main(void) {\\n\\n  // Set up position\\n#ifdef MODULE_GEOMETRY\\n  geometry_setPosition(positions);\\n  geometry_setNormal(normals);\\n#endif\\n\\n#ifdef MODULE_PROJECT\\n  project_setPositionAndNormal_Model(positions, normals);\\n  gl_Position = project_model_to_clipspace(positions);\\n#endif\\n\\n  // Set up depth\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\\n#ifdef MODULE_DIFFUSE\\n  diffuse_setTextureCoordinate(texCoords);\\n#endif\\n\\n  // Set up color calculations\\n#ifdef MODULE_MATERIAL\\n  material_setDiffuseColor(colors);\\n  material_setDiffuseTextureCoordinates(texCoords);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  lighting_setPositionAndNormal(positions, normals);\\n  lighting_apply_light(positions);\\n  lighting_apply_reflection(positions);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  picking_setPickingColor(pickingColors);\\n#endif\\n\\n}\\n\";","export default \"#define SHADER_NAME luma-modular-fragment\\n\\nprecision highp float;\\n\\n// varyings\\nvarying vec4 vColor;\\n\\nvoid main(){\\n  gl_FragColor = vec4(1., 0., 1., 1.);\\n\\n#ifdef MODULE_DIFFUSE\\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth(gl_Position);\\n#endif\\n}\\n\";","// Transpiles shader source code to target GLSL version\n// Note: We always run transpiler even if same version e.g. 3.00 => 3.00\n// RFC: https://github.com/uber/luma.gl/blob/master/dev-docs/RFCs/v6.0/portable-glsl-300-rfc.md\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertVertexShaderTo300(source) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertVertexShaderTo100(source) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\n\nfunction convertVertexShaderTo300(source) {\n  return source.replace(/attribute\\s+/g, 'in ').replace(/varying\\s+/g, 'out ').replace(/texture2D\\(/g, 'texture(').replace(/textureCube\\(+/g, 'texture('); // Deal with fragColor\n  // .replace(/gl_fragColor/g, 'fragColor ');\n}\n\nfunction convertFragmentShaderTo300(source) {\n  return source.replace(/varying\\s+/g, 'in ').replace(/texture2D\\(/g, 'texture(').replace(/textureCube\\(/g, 'texture('); // Deal with fragColor\n  // .replace(/gl_fragColor/g, 'fragColor ');\n}\n\nfunction convertVertexShaderTo100(source) {\n  // /gm - treats each line as a string, so that ^ matches after newlines\n  return source.replace(/^in\\s+/gm, 'attribute ').replace(/^out\\s+/gm, 'varying ').replace(/texture\\(/g, 'texture2D(');\n}\n\nfunction convertFragmentShaderTo100(source) {\n  // /gm - treats each line as a string, so that ^ matches after newlines\n  return source.replace(/^in\\s+/gm, 'varying ').replace(/texture\\(/g, 'texture2D('); // Deal with fragColor\n  // .replace(/^out\\s+/g, 'varying ')\n}","// Recommendation is to ignore message but current test suite checks agains the\n// message so keep it for now.\nexport default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport transpileShader from './transpile-shader';\nimport assert from '../utils/assert';\nvar VERTEX_SHADER = 'vs';\nvar FRAGMENT_SHADER = 'fs';\n\nvar ShaderModule = /*#__PURE__*/function () {\n  function ShaderModule(_ref) {\n    var name = _ref.name,\n        vs = _ref.vs,\n        fs = _ref.fs,\n        _ref$dependencies = _ref.dependencies,\n        dependencies = _ref$dependencies === void 0 ? [] : _ref$dependencies,\n        _ref$getUniforms = _ref.getUniforms,\n        getUniforms = _ref$getUniforms === void 0 ? function () {\n      return {};\n    } : _ref$getUniforms,\n        _ref$deprecations = _ref.deprecations,\n        deprecations = _ref$deprecations === void 0 ? [] : _ref$deprecations,\n        vertexShader = _ref.vertexShader,\n        fragmentShader = _ref.fragmentShader;\n\n    _classCallCheck(this, ShaderModule);\n\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n  } // Extracts the source code chunk for the specified shader type from the named shader module\n\n\n  _createClass(ShaderModule, [{\n    key: \"getModuleSource\",\n    value: function getModuleSource(type, targetGLSLVersion) {\n      var moduleSource;\n\n      switch (type) {\n        case VERTEX_SHADER:\n          moduleSource = transpileShader(this.vs || '', targetGLSLVersion, true);\n          break;\n\n        case FRAGMENT_SHADER:\n          moduleSource = transpileShader(this.fs || '', targetGLSLVersion, false);\n          break;\n\n        default:\n          assert(false);\n      }\n\n      if (typeof moduleSource !== 'string') {\n        return '';\n      }\n\n      return \"#define MODULE_\".concat(this.name.toUpperCase(), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(opts, uniforms) {\n      return this.getModuleUniforms(opts, uniforms);\n    } // Warn about deprecated uniforms or functions\n\n  }, {\n    key: \"checkDeprecations\",\n    value: function checkDeprecations(shaderSource, log) {\n      this.deprecations.forEach(function (def) {\n        if (def.regex.test(shaderSource)) {\n          if (def.deprecated && log) {\n            log.deprecated(def.old, def.new)();\n          } else if (log) {\n            log.removed(def.old, def.new)();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_parseDeprecationDefinitions\",\n    value: function _parseDeprecationDefinitions() {\n      var deprecations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      deprecations.forEach(function (def) {\n        switch (def.type) {\n          case 'function':\n            def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n            break;\n\n          default:\n            def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n        }\n      });\n      return deprecations;\n    }\n  }]);\n\n  return ShaderModule;\n}();\n\nexport { ShaderModule as default };","import ShaderModuleRegistry from './shader-module-registry';\nvar shaderModuleRegistry = new ShaderModuleRegistry();\n/**\n * Registers an array of default shader modules. These will be concatenated\n * automatically at the end of any shader module list passed to\n * `assembleShaders` (plus `resolveModules` and `getShaderDependencies`)\n * @param {Object[]} modules - Array of shader modules\n */\n\nexport function setDefaultShaderModules(modules) {\n  shaderModuleRegistry.setDefaultShaderModules(modules);\n}\n/**\n * Registers an array of shader modules\n * @param {Object[]} shaderModuleList - Array of shader modules\n */\n\nexport function registerShaderModules(shaderModuleList) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$ignoreMultipleRe = _ref.ignoreMultipleRegistrations,\n      ignoreMultipleRegistrations = _ref$ignoreMultipleRe === void 0 ? false : _ref$ignoreMultipleRe;\n\n  shaderModuleRegistry.registerShaderModules(shaderModuleList, {\n    ignoreMultipleRegistrations: ignoreMultipleRegistrations\n  });\n} // registers any supplied modules and returns a list of module names\n\nexport function resolveModules(modules) {\n  modules = modules.concat(shaderModuleRegistry.defaultShaderModules);\n  modules = shaderModuleRegistry.resolveModules(modules);\n  return getShaderDependencies(modules);\n} // Looks up a moduleName among registered modules and returns definition.\n// If \"inline\" module, returns it directly\n\nexport function getShaderModule(moduleOrName) {\n  return shaderModuleRegistry.getShaderModule(moduleOrName);\n}\n/**\n * Takes a list of shader module names and returns a new list of\n * shader module names that includes all dependencies, sorted so\n * that modules that are dependencies of other modules come first.\n *\n * If the shader glsl code from the returned modules is concatenated\n * in the reverse order, it is guaranteed that all functions be resolved and\n * that all function and variable definitions come before use.\n *\n * @param {String[]} modules - Array of modules (inline modules or module names)\n * @return {String[]} - Array of modules\n */\n\nfunction getShaderDependencies(modules) {\n  var moduleMap = {};\n  var moduleDepth = {};\n  getDependencyGraph({\n    modules: modules,\n    level: 0,\n    moduleMap: moduleMap,\n    moduleDepth: moduleDepth\n  }); // Return a reverse sort so that dependencies come before the modules that use them\n\n  return Object.keys(moduleDepth).sort(function (a, b) {\n    return moduleDepth[b] - moduleDepth[a];\n  }).map(function (name) {\n    return moduleMap[name];\n  });\n}\n/**\n * Recursively checks module dpendencies to calculate dependency\n * level of each module.\n *\n * @param {String[]} modules - Array of modules\n * @param {Number} level - Current level\n * @return {result} - Map of module name to its level\n */\n// Adds another level of dependencies to the result map\n\n\nfunction getDependencyGraph(_ref2) {\n  var modules = _ref2.modules,\n      level = _ref2.level,\n      moduleMap = _ref2.moduleMap,\n      moduleDepth = _ref2.moduleDepth;\n\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  } // Update level on all current modules\n\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = modules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var module = _step.value;\n      moduleMap[module.name] = module;\n\n      if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n        moduleDepth[module.name] = level;\n      }\n    } // Recurse\n\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _module = _step2.value;\n\n      if (_module.dependencies) {\n        getDependencyGraph({\n          modules: _module.dependencies,\n          level: level + 1,\n          moduleMap: moduleMap,\n          moduleDepth: moduleDepth\n        });\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nexport var TEST_EXPORTS = {\n  getShaderDependencies: getShaderDependencies,\n  getDependencyGraph: getDependencyGraph\n};","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport ShaderModule from './shader-module';\nimport assert from '../utils/assert';\n\nvar ShaderModuleRegistry = /*#__PURE__*/function () {\n  function ShaderModuleRegistry() {\n    _classCallCheck(this, ShaderModuleRegistry);\n\n    this.shaderModules = {};\n    this.defaultShaderModules = [];\n  }\n\n  _createClass(ShaderModuleRegistry, [{\n    key: \"setDefaultShaderModules\",\n    value: function setDefaultShaderModules(modules) {\n      this.defaultShaderModules = this.resolveModules(modules);\n    }\n  }, {\n    key: \"registerShaderModules\",\n    value: function registerShaderModules(shaderModuleList) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$ignoreMultipleRe = _ref.ignoreMultipleRegistrations,\n          ignoreMultipleRegistrations = _ref$ignoreMultipleRe === void 0 ? false : _ref$ignoreMultipleRe;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = shaderModuleList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var shaderModule = _step.value;\n\n          this._registerShaderModule(shaderModule, ignoreMultipleRegistrations);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"getShaderModule\",\n    value: function getShaderModule(moduleOrName) {\n      // Check if \"inline\" module, return it\n      if (moduleOrName instanceof ShaderModule) {\n        return moduleOrName;\n      } // Check if module descriptor\n\n\n      if (typeof moduleOrName !== 'string') {\n        return this._registerShaderModule(moduleOrName, true);\n      } // Module name - Look up module\n\n\n      var module = this.shaderModules[moduleOrName];\n\n      if (!module) {\n        assert(false, \"Unknown shader module \".concat(moduleOrName));\n      }\n\n      return module;\n    } // registers any supplied modules, resolves any names into modules\n    // returns a list of modules\n\n  }, {\n    key: \"resolveModules\",\n    value: function resolveModules(modules) {\n      var _this = this;\n\n      return modules.map(function (moduleOrName) {\n        return _this.getShaderModule(moduleOrName);\n      });\n    } // PRIVATE API\n\n  }, {\n    key: \"_registerShaderModule\",\n    value: function _registerShaderModule(module) {\n      var ignoreMultipleRegistrations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; // Check if \"inline\" module, return it\n\n      if (module instanceof ShaderModule) {\n        return module;\n      }\n\n      assert(module.name, 'shader module has no name');\n\n      if (!this.shaderModules[module.name] || ignoreMultipleRegistrations) {\n        // if ignoreMultipleRegistrations = true, we allow module to be re-registered\n        module = new ShaderModule(module);\n        module.dependencies = this.resolveModules(module.dependencies);\n        this.shaderModules[module.name] = module;\n      } else {\n        // TODO - instead verify that definition is not changing...\n        throw new Error(\"shader module \".concat(module.name, \" already registered\"));\n      }\n\n      return this.shaderModules[module.name];\n    }\n  }]);\n\n  return ShaderModuleRegistry;\n}();\n\nexport { ShaderModuleRegistry as default };","/* global window */\n// opts allows user agent to be overridden for testing\nexport default function isOldIE() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  var userAgent = opts.userAgent || navigator.userAgent || ''; // We only care about older versions of IE (IE 11 and below). Newer versions of IE (Edge)\n  // have much better web standards support.\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}","// Feature detection for WebGL\n//\n// Provides a function that enables simple checking of which WebGL features are\n// available in an WebGL1 or WebGL2 environment.\n\n/* eslint-disable no-inline-comments, max-len */\n\n/* global WebGL2RenderingContext */\nimport isOldIE from './is-old-ie';\nimport assert from './assert';\nvar GL_TEXTURE_BINDING_3D = 0x806a;\nvar GL_VENDOR = 0x1f00;\nvar GL_RENDERER = 0x1f01;\nvar GL_VERSION = 0x1f02;\nvar GL_SHADING_LANGUAGE_VERSION = 0x8b8c; // Defines luma.gl \"feature\" names and semantics\n\nvar WEBGL_FEATURES = {\n  // GLSL extensions\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  // TODO - name makes no sense in GLSL 3.00\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n}; // Create a key-mirrored FEATURES array\n\nvar FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(function (key) {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  return Boolean(gl && (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext || 32874 === GL_TEXTURE_BINDING_3D));\n}\n\nexport function getContextInfo(gl) {\n  var info = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  var renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  var gpuVendor = identifyGPUVendor(vendor, renderer);\n  var gpuInfo = {\n    gpuVendor: gpuVendor,\n    vendor: vendor,\n    renderer: renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nvar compiledGlslExtensions = {}; // Enables feature detection in IE11 due to a bug where gl.getExtension may return true\n// but fail to compile when the extension is enabled in the shader. Specifically,\n// the OES_standard_derivatives and WEBGL_draw_buffers extensions fails to compile in IE11 even though its included\n// in the list of supported extensions.\n// opts allows user agent to be overridden for testing\n\n/*\n* Inputs :\n*  gl : WebGL context\n*  cap : Key of WEBGL_FEATURES object identifying the extension\n*  opts :\n*   behavior : behavor of extension to be tested, by defualt `enable` is used\n* Returns : true, if shader is compiled successfully, false otherwise\n*/\n\nexport function canCompileGLGSExtension(gl, cap) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  var extensionName = feature[0];\n  var behavior = opts.behavior || 'enable';\n  var source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  var shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n} // TODO - cache the value\n\nfunction getFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap); // Get extension name from table\n\n  var extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0]; // Check if the value is dependent on checking an extension\n\n  var value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return getFeature(gl, feature);\n  });\n}","export var MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport var MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _MODULE_INJECTORS;\n\nimport { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport assert from 'assert'; // TODO - experimental\n\nvar MODULE_INJECTORS = (_MODULE_INJECTORS = {}, _defineProperty(_MODULE_INJECTORS, VERTEX_SHADER, MODULE_INJECTORS_VS), _defineProperty(_MODULE_INJECTORS, FRAGMENT_SHADER, MODULE_INJECTORS_FS), _MODULE_INJECTORS);\nvar REGEX_START_OF_MAIN = /void main\\s*\\([^\\)]*\\)\\s*\\{\\n?/; // Beginning of main\n\nvar REGEX_END_OF_MAIN = /}\\n?[^{}]*$/; // End of main, assumes main is last function\n// A minimal shader injection/templating system.\n// RFC: https://github.com/uber/luma.gl/blob/master/dev-docs/RFCs/v6.0/shader-injection-rfc.md\n\n/* eslint-disable complexity */\n\nexport default function injectShader(source, type, inject, injectStandardStubs) {\n  var isVertex = type === VERTEX_SHADER;\n\n  var _loop = function _loop(key) {\n    var fragment = inject[key];\n\n    switch (key) {\n      // declarations are injected before the main function\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return \"\".concat(fragment, \"\\n\").concat(match);\n          });\n        }\n\n        break;\n      // main code is injected at the end of main function\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragment;\n          });\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragment + match;\n          });\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return \"\".concat(fragment, \"\\n\").concat(match);\n          });\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragment;\n          });\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragment + match;\n          });\n        }\n\n        break;\n\n      default:\n        // inject code after key, leaving key in place\n        source = source.replace(key, function (match) {\n          return match + fragment;\n        });\n    }\n  };\n\n  for (var key in inject) {\n    _loop(key);\n  } // Finally, if requested, insert an automatic module injector chunk\n\n\n  if (injectStandardStubs) {\n    source = source.replace('}s*$', function (match) {\n      return match + MODULE_INJECTORS[type];\n    });\n  }\n\n  return source;\n}\n/* eslint-enable complexity */\n// Takes an array of inject objects and combines them into one\n\nexport function combineInjects(injects) {\n  var result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(function (inject) {\n    for (var key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SHADER_TYPE;\n\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules, getShaderModule } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader from './inject-shader';\nimport assert from '../utils/assert';\nvar SHADER_TYPE = (_SHADER_TYPE = {}, _defineProperty(_SHADER_TYPE, VERTEX_SHADER, 'vertex'), _defineProperty(_SHADER_TYPE, FRAGMENT_SHADER, 'fragment'), _SHADER_TYPE); // Precision prologue to inject before functions are injected in shader\n// TODO - extract any existing prologue in the fragment source and move it up...\n\nvar FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\"; // Inject a list of modules\n\nexport function assembleShaders(gl) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var vs = opts.vs,\n      fs = opts.fs;\n  var modules = resolveModules(opts.modules || []);\n  return {\n    gl: gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules: modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules: modules\n    })),\n    getUniforms: assembleGetUniforms(modules),\n    modules: assembleModuleMap(modules)\n  };\n} // Pulls together complete source code for either a vertex or a fragment shader\n// adding prologues, requested module chunks, and any final injections.\n\nfunction assembleShader(gl, _ref) {\n  var id = _ref.id,\n      source = _ref.source,\n      type = _ref.type,\n      _ref$modules = _ref.modules,\n      modules = _ref$modules === void 0 ? [] : _ref$modules,\n      _ref$defines = _ref.defines,\n      defines = _ref$defines === void 0 ? {} : _ref$defines,\n      _ref$inject = _ref.inject,\n      inject = _ref$inject === void 0 ? {} : _ref$inject,\n      _ref$prologue = _ref.prologue,\n      prologue = _ref$prologue === void 0 ? true : _ref$prologue,\n      log = _ref.log;\n  assert(typeof source === 'string', 'shader source must be a string');\n  var isVertex = type === VERTEX_SHADER;\n  var sourceLines = source.split('\\n');\n  var glslVersion = 100;\n  var versionLine = '';\n  var coreSource = source; // Extract any version directive string from source.\n  // TODO : keep all pre-processor statements at the begining of the shader.\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300; // TODO - regexp that matches atual version number\n\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } // Add platform defines (use these to work around platform-specific bugs and limitations)\n  // Add common defines (GLSL version compatibility, feature detection)\n  // Add precision declaration for fragment shaders\n\n\n  var assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id: id,\n    source: source,\n    type: type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(defines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\"); // Add source of dependent modules in resolved order\n\n  var injectStandardStubs = false;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = modules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var module = _step.value;\n\n      switch (module.name) {\n        case 'inject':\n          injectStandardStubs = true;\n          break;\n\n        default:\n          module.checkDeprecations(coreSource, log);\n          var moduleSource = module.getModuleSource(type, glslVersion); // Add the module source, and a #define that declares it presence\n\n          assembledSource += moduleSource;\n      }\n    } // Add the version directive and actual source of this shader\n\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  assembledSource += coreSource; // Apply any requested shader injections\n\n  assembledSource = injectShader(assembledSource, type, inject, injectStandardStubs);\n  return assembledSource;\n} // Returns a combined `getUniforms` covering the options for all the modules,\n// the created function will pass on options to the inidividual `getUniforms`\n// function of each shader module and combine the results into one object that\n// can be passed to setUniforms.\n\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    var uniforms = {};\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var module = _step2.value; // `modules` is already sorted by dependency level. This guarantees that\n        // modules have access to the uniforms that are generated by their dependencies.\n\n        var moduleUniforms = module.getUniforms(opts, uniforms);\n        Object.assign(uniforms, moduleUniforms);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    return uniforms;\n  };\n} // Returns a map with module names as keys, resolving to their module definitions\n// The presence of a key indicates that the module is available in this program,\n// whether directly included, or through a dependency of some other module\n\n\nfunction assembleModuleMap(modules) {\n  var result = {};\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = modules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var moduleName = _step3.value;\n      var shaderModule = getShaderModule(moduleName);\n      result[moduleName] = shaderModule;\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return result;\n} // Generate \"glslify-compatible\" SHADER_NAME defines\n// These are understood by the GLSL error parsing function\n// If id is provided and no SHADER_NAME constant is present in source, create one\n\n\nfunction getShaderName(_ref2) {\n  var id = _ref2.id,\n      source = _ref2.source,\n      type = _ref2.type;\n  var injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n} // Generates application defines from an object\n\n\nfunction getApplicationDefines() {\n  var defines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var count = 0;\n  var sourceText = '';\n\n  for (var define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    var value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}","export var VERTEX_SHADER = 'vs';\nexport var FRAGMENT_SHADER = 'fs';","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  var debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      // AMD Does not eliminate fp64 code\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      // We don't know what GPU it is, could be that the GPU driver or\n      // browser is not implementing UNMASKED_RENDERER constant and not\n      // reporting a correct name\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  // Add shadertools defines to let shaders portably v1/v3 check for features\n  var versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n# define TEXTURE_LOD\\n#define texture2DLod texture2DLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define textureCubeLod textureCubeLodEXT\\n#define texture2DGrad texture2DGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define textureCubeGrad textureCubeGradEXT\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}","// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nexport default \"uniform float ONE;\\nvec2 split(float a) {\\n  const float SPLIT = 4097.0;\\n  float t = a * SPLIT;\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float a_hi = t * ONE - (t - a);\\n  float a_lo = a * ONE - a_hi;\\n#else\\n  float a_hi = t - (t - a);\\n  float a_lo = a - a_hi;\\n#endif\\n  return vec2(a_hi, a_lo);\\n}\\nvec2 split2(vec2 a) {\\n  vec2 b = split(a.x);\\n  b.y += a.y;\\n  return b;\\n}\\nvec2 quickTwoSum(float a, float b) {\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float sum = (a + b) * ONE;\\n  float err = b - (sum - a) * ONE;\\n#else\\n  float sum = a + b;\\n  float err = b - (sum - a);\\n#endif\\n  return vec2(sum, err);\\n}\\nvec2 twoSum(float a, float b) {\\n  float s = (a + b);\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float v = (s * ONE - a) * ONE;\\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\\n#else\\n  float v = s - a;\\n  float err = (a - (s - v)) + (b - v);\\n#endif\\n  return vec2(s, err);\\n}\\n\\nvec2 twoSub(float a, float b) {\\n  float s = (a - b);\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float v = (s * ONE - a) * ONE;\\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\\n#else\\n  float v = s - a;\\n  float err = (a - (s - v)) - (b + v);\\n#endif\\n  return vec2(s, err);\\n}\\n\\nvec2 twoSqr(float a) {\\n  float prod = a * a;\\n  vec2 a_fp64 = split(a);\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\\n#else\\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\\n#endif\\n  return vec2(prod, err);\\n}\\n\\nvec2 twoProd(float a, float b) {\\n  float prod = a * b;\\n  vec2 a_fp64 = split(a);\\n  vec2 b_fp64 = split(b);\\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\\n  return vec2(prod, err);\\n}\\n\\nvec2 sum_fp64(vec2 a, vec2 b) {\\n  vec2 s, t;\\n  s = twoSum(a.x, b.x);\\n  t = twoSum(a.y, b.y);\\n  s.y += t.x;\\n  s = quickTwoSum(s.x, s.y);\\n  s.y += t.y;\\n  s = quickTwoSum(s.x, s.y);\\n  return s;\\n}\\n\\nvec2 sub_fp64(vec2 a, vec2 b) {\\n  vec2 s, t;\\n  s = twoSub(a.x, b.x);\\n  t = twoSub(a.y, b.y);\\n  s.y += t.x;\\n  s = quickTwoSum(s.x, s.y);\\n  s.y += t.y;\\n  s = quickTwoSum(s.x, s.y);\\n  return s;\\n}\\n\\nvec2 mul_fp64(vec2 a, vec2 b) {\\n  vec2 prod = twoProd(a.x, b.x);\\n  prod.y += a.x * b.y;\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  prod = split2(prod);\\n#endif\\n  prod = quickTwoSum(prod.x, prod.y);\\n  prod.y += a.y * b.x;\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  prod = split2(prod);\\n#endif\\n  prod = quickTwoSum(prod.x, prod.y);\\n  return prod;\\n}\\n\\nvec2 div_fp64(vec2 a, vec2 b) {\\n  float xn = 1.0 / b.x;\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\\n#else\\n  vec2 yn = a * xn;\\n#endif\\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\\n  vec2 prod = twoProd(xn, diff);\\n  return sum_fp64(yn, prod);\\n}\\n\\nvec2 sqrt_fp64(vec2 a) {\\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\\n\\n  float x = 1.0 / sqrt(a.x);\\n  float yn = a.x * x;\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  vec2 yn_sqr = twoSqr(yn) * ONE;\\n#else\\n  vec2 yn_sqr = twoSqr(yn);\\n#endif\\n  float diff = sub_fp64(a, yn_sqr).x;\\n  vec2 prod = twoProd(x * 0.5, diff);\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  return sum_fp64(split(yn), prod);\\n#else\\n  return sum_fp64(vec2(yn, 0.0), prod);\\n#endif\\n}\\n\";","// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport { fp64ify, fp64LowPart, fp64ifyMatrix4 } from './fp64-utils';\nimport fp64arithmeticShader from './fp64-arithmetic.glsl';\nimport fp64functionShader from './fp64-functions.glsl';\nvar fp64shader = \"\".concat(fp64arithmeticShader, \"\\n\").concat(fp64functionShader);\nvar CONST_UNIFORMS = {\n  // Used in LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n  ONE: 1.0\n};\nexport { fp64ify, fp64LowPart, fp64ifyMatrix4 };\n\nfunction getUniforms() {\n  return Object.assign({}, CONST_UNIFORMS);\n}\n\nexport default {\n  name: 'fp64',\n  vs: fp64shader,\n  fs: null,\n  fp64ify: fp64ify,\n  fp64LowPart: fp64LowPart,\n  fp64ifyMatrix4: fp64ifyMatrix4,\n  getUniforms: getUniforms\n}; // Arithmetic only\n\nexport var fp64arithmetic = {\n  name: 'fp64-arithmetic',\n  vs: \"\".concat(fp64arithmeticShader),\n  fs: null\n}; // Fragment shader fp64\n\nexport var fp64fs = {\n  name: 'fp64-fs',\n  vs: null,\n  fs: fp64shader\n};","// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nexport default \"const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\\n\\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\\n\\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\\n\\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\\n\\nfloat nint(float d) {\\n    if (d == floor(d)) return d;\\n    return floor(d + 0.5);\\n}\\n\\nvec2 nint_fp64(vec2 a) {\\n    float hi = nint(a.x);\\n    float lo;\\n    vec2 tmp;\\n    if (hi == a.x) {\\n        lo = nint(a.y);\\n        tmp = quickTwoSum(hi, lo);\\n    } else {\\n        lo = 0.0;\\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\\n            hi -= 1.0;\\n        }\\n        tmp = vec2(hi, lo);\\n    }\\n    return tmp;\\n}\\n\\nvec2 exp_fp64(vec2 a) {\\n\\n  const int k_power = 4;\\n  const float k = 16.0;\\n\\n  const float inv_k = 1.0 / k;\\n\\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\\n\\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\\n  vec2 s, t, p;\\n\\n  p = mul_fp64(r, r);\\n  s = sum_fp64(r, p * 0.5);\\n  p = mul_fp64(p, r);\\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\\n\\n  s = sum_fp64(s, t);\\n  p = mul_fp64(p, r);\\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\\n\\n  s = sum_fp64(s, t);\\n  p = mul_fp64(p, r);\\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\\n\\n\\n\\n\\n\\n\\n  s = sum_fp64(s, t);\\n  for (int i = 0; i < k_power; i++) {\\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\\n  }\\n\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n  s = sum_fp64(s, vec2(ONE, 0.0));\\n#else\\n  s = sum_fp64(s, vec2(1.0, 0.0));\\n#endif\\n\\n  return s * pow(2.0, m);\\n}\\n\\nvec2 log_fp64(vec2 a)\\n{\\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\\n  vec2 x = vec2(log(a.x), 0.0);\\n  vec2 s;\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n  s = vec2(ONE, 0.0);\\n#else\\n  s = vec2(1.0, 0.0);\\n#endif\\n\\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\\n  return x;\\n}\\n\\nvec2 sin_taylor_fp64(vec2 a) {\\n  vec2 r, s, t, x;\\n\\n  if (a.x == 0.0 && a.y == 0.0) {\\n    return vec2(0.0, 0.0);\\n  }\\n\\n  x = -mul_fp64(a, a);\\n  s = a;\\n  r = a;\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\\n  s = sum_fp64(s, t);\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\\n  s = sum_fp64(s, t);\\n\\n\\n\\n\\n\\n\\n  return s;\\n}\\n\\nvec2 cos_taylor_fp64(vec2 a) {\\n  vec2 r, s, t, x;\\n\\n  if (a.x == 0.0 && a.y == 0.0) {\\n    return vec2(1.0, 0.0);\\n  }\\n\\n  x = -mul_fp64(a, a);\\n  r = x;\\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\\n  s = sum_fp64(s, t);\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\\n  s = sum_fp64(s, t);\\n\\n\\n\\n\\n\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\\n  if (a.x == 0.0 && a.y == 0.0) {\\n    sin_t = vec2(0.0, 0.0);\\n    cos_t = vec2(1.0, 0.0);\\n  }\\n\\n  sin_t = sin_taylor_fp64(a);\\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\\n}\\n\\nvec2 sin_fp64(vec2 a) {\\n    if (a.x == 0.0 && a.y == 0.0) {\\n        return vec2(0.0, 0.0);\\n    }\\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\\n\\n    vec2 t;\\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    }\\n\\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\\n\\n    q = floor(t.x / PI_16_FP64.x + 0.5);\\n    int k = int(q);\\n\\n    if (k == 0) {\\n        if (j == 0) {\\n            return sin_taylor_fp64(t);\\n        } else if (j == 1) {\\n            return cos_taylor_fp64(t);\\n        } else if (j == -1) {\\n            return -cos_taylor_fp64(t);\\n        } else {\\n            return -sin_taylor_fp64(t);\\n        }\\n    }\\n\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    } else {\\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\\n    }\\n\\n    vec2 u = vec2(0.0, 0.0);\\n    vec2 v = vec2(0.0, 0.0);\\n\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n    if (abs(float(abs_k) - 1.0) < 0.5) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#else\\n    if (abs_k == 1) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs_k == 2) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs_k == 3) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs_k == 4) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#endif\\n\\n    vec2 sin_t, cos_t;\\n    sincos_taylor_fp64(t, sin_t, cos_t);\\n\\n\\n\\n    vec2 result = vec2(0.0, 0.0);\\n    if (j == 0) {\\n        if (k > 0) {\\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        }\\n    } else if (j == 1) {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        } else {\\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    } else if (j == -1) {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\\n        } else {\\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\\n        }\\n    } else {\\n        if (k > 0) {\\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\\n        }\\n    }\\n\\n    return result;\\n}\\n\\nvec2 cos_fp64(vec2 a) {\\n    if (a.x == 0.0 && a.y == 0.0) {\\n        return vec2(1.0, 0.0);\\n    }\\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\\n\\n    vec2 t;\\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    }\\n\\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\\n\\n    q = floor(t.x / PI_16_FP64.x + 0.5);\\n    int k = int(q);\\n\\n    if (k == 0) {\\n        if (j == 0) {\\n            return cos_taylor_fp64(t);\\n        } else if (j == 1) {\\n            return -sin_taylor_fp64(t);\\n        } else if (j == -1) {\\n            return sin_taylor_fp64(t);\\n        } else {\\n            return -cos_taylor_fp64(t);\\n        }\\n    }\\n\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    } else {\\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\\n    }\\n\\n    vec2 u = vec2(0.0, 0.0);\\n    vec2 v = vec2(0.0, 0.0);\\n\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n    if (abs(float(abs_k) - 1.0) < 0.5) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#else\\n    if (abs_k == 1) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs_k == 2) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs_k == 3) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs_k == 4) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#endif\\n\\n    vec2 sin_t, cos_t;\\n    sincos_taylor_fp64(t, sin_t, cos_t);\\n\\n    vec2 result = vec2(0.0, 0.0);\\n    if (j == 0) {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        } else {\\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    } else if (j == 1) {\\n        if (k > 0) {\\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\\n        }\\n    } else if (j == -1) {\\n        if (k > 0) {\\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        }\\n    } else {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\\n        } else {\\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    }\\n\\n    return result;\\n}\\n\\nvec2 tan_fp64(vec2 a) {\\n    vec2 sin_a;\\n    vec2 cos_a;\\n\\n    if (a.x == 0.0 && a.y == 0.0) {\\n        return vec2(0.0, 0.0);\\n    }\\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\\n\\n    vec2 t;\\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\\n    int j = int(q);\\n\\n\\n    if (j < -2 || j > 2) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    }\\n\\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\\n\\n    q = floor(t.x / PI_16_FP64.x + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    } else {\\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\\n    }\\n\\n\\n    vec2 u = vec2(0.0, 0.0);\\n    vec2 v = vec2(0.0, 0.0);\\n\\n    vec2 sin_t, cos_t;\\n    vec2 s, c;\\n    sincos_taylor_fp64(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0_FP64;\\n            v = SIN_TABLE_0_FP64;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1_FP64;\\n            v = SIN_TABLE_1_FP64;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2_FP64;\\n            v = SIN_TABLE_2_FP64;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3_FP64;\\n            v = SIN_TABLE_3_FP64;\\n        }\\n#else\\n        if (abs_k == 1) {\\n            u = COS_TABLE_0_FP64;\\n            v = SIN_TABLE_0_FP64;\\n        } else if (abs_k == 2) {\\n            u = COS_TABLE_1_FP64;\\n            v = SIN_TABLE_1_FP64;\\n        } else if (abs_k == 3) {\\n            u = COS_TABLE_2_FP64;\\n            v = SIN_TABLE_2_FP64;\\n        } else if (abs_k == 4) {\\n            u = COS_TABLE_3_FP64;\\n            v = SIN_TABLE_3_FP64;\\n        }\\n#endif\\n        if (k > 0) {\\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        } else {\\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return div_fp64(sin_a, cos_a);\\n}\\n\\nvec2 radians_fp64(vec2 degree) {\\n  return mul_fp64(degree, PI_180_FP64);\\n}\\n\\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\\n  vec2 range = sub_fp64(b, a);\\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\\n}\\n\\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = sum_fp64(a[0], b[0]);\\n    out_val[1] = sum_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = sub_fp64(a[0], b[0]);\\n    out_val[1] = sub_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = mul_fp64(a[0], b[0]);\\n    out_val[1] = mul_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = div_fp64(a[0], b[0]);\\n    out_val[1] = div_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\\n  vec2 range[2];\\n  vec2_sub_fp64(y, x, range);\\n  vec2 portion[2];\\n  portion[0] = range[0] * a;\\n  portion[1] = range[1] * a;\\n  vec2_sum_fp64(x, portion, out_val);\\n}\\n\\nvec2 vec2_length_fp64(vec2 x[2]) {\\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\\n}\\n\\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\\n  vec2 length = vec2_length_fp64(x);\\n  vec2 length_vec2[2];\\n  length_vec2[0] = length;\\n  length_vec2[1] = length;\\n\\n  vec2_div_fp64(x, length_vec2, out_val);\\n}\\n\\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\\n  vec2 diff[2];\\n  vec2_sub_fp64(x, y, diff);\\n  return vec2_length_fp64(diff);\\n}\\n\\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\\n  vec2 v[2];\\n\\n  v[0] = mul_fp64(a[0], b[0]);\\n  v[1] = mul_fp64(a[1], b[1]);\\n\\n  return sum_fp64(v[0], v[1]);\\n}\\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\\n  for (int i = 0; i < 3; i++) {\\n    out_val[i] = sum_fp64(a[i], b[i]);\\n  }\\n}\\n\\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\\n  for (int i = 0; i < 3; i++) {\\n    out_val[i] = sum_fp64(a[i], b[i]);\\n  }\\n}\\n\\nvec2 vec3_length_fp64(vec2 x[3]) {\\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\\n    mul_fp64(x[2], x[2])));\\n}\\n\\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\\n  vec2 diff[3];\\n  vec3_sub_fp64(x, y, diff);\\n  return vec3_length_fp64(diff);\\n}\\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\\n  out_val[0].x = a[0];\\n  out_val[0].y = 0.0;\\n\\n  out_val[1].x = a[1];\\n  out_val[1].y = 0.0;\\n\\n  out_val[2].x = a[2];\\n  out_val[2].y = 0.0;\\n\\n  out_val[3].x = a[3];\\n  out_val[3].y = 0.0;\\n}\\n\\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\\n  out_val[0] = mul_fp64(a[0], b);\\n  out_val[1] = mul_fp64(a[1], b);\\n  out_val[2] = mul_fp64(a[2], b);\\n  out_val[3] = mul_fp64(a[3], b);\\n}\\n\\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\\n  for (int i = 0; i < 4; i++) {\\n    out_val[i] = sum_fp64(a[i], b[i]);\\n  }\\n}\\n\\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\\n  vec2 v[4];\\n\\n  v[0] = mul_fp64(a[0], b[0]);\\n  v[1] = mul_fp64(a[1], b[1]);\\n  v[2] = mul_fp64(a[2], b[2]);\\n  v[3] = mul_fp64(a[3], b[3]);\\n\\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\\n}\\n\\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\\n  vec2 tmp[4];\\n\\n  for (int i = 0; i < 4; i++)\\n  {\\n    for (int j = 0; j < 4; j++)\\n    {\\n      tmp[j] = b[j + i * 4];\\n    }\\n    vec4_dot_fp64(a, tmp, out_val[i]);\\n  }\\n}\\n\";","import { Matrix4 } from 'math.gl';\nvar IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nvar DEFAULT_MODULE_OPTIONS = {\n  modelMatrix: IDENTITY_MATRIX,\n  viewMatrix: IDENTITY_MATRIX,\n  projectionMatrix: IDENTITY_MATRIX,\n  cameraPositionWorld: [0, 0, 0]\n};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var prevUniforms = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; // const viewProjectionInverse = viewProjection.invert();\n  // viewInverseMatrix: view.invert(),\n  // viewProjectionInverseMatrix: viewProjectionInverse\n\n  var uniforms = {};\n\n  if (opts.modelMatrix !== undefined) {\n    uniforms.modelMatrix = opts.modelMatrix;\n  }\n\n  if (opts.viewMatrix !== undefined) {\n    uniforms.viewMatrix = opts.viewMatrix;\n  }\n\n  if (opts.projectionMatrix !== undefined) {\n    uniforms.projectionMatrix = opts.projectionMatrix;\n  }\n\n  if (opts.cameraPositionWorld !== undefined) {\n    uniforms.cameraPositionWorld = opts.cameraPositionWorld;\n  } // COMPOSITE UNIFORMS\n\n\n  if (opts.projectionMatrix !== undefined || opts.viewMatrix !== undefined) {\n    uniforms.viewProjectionMatrix = new Matrix4(opts.projectionMatrix).multiplyRight(opts.viewMatrix);\n  }\n\n  return uniforms;\n}\n\nvar common = \"varying vec4 project_vPositionWorld;\\nvarying vec3 project_vNormalWorld;\\n\\nvec4 project_getPosition_World() {\\n  return project_vPositionWorld;\\n}\\n\\nvec3 project_getNormal_World() {\\n  return project_vNormalWorld;\\n}\\n\";\nvar vs = \"\".concat(common, \"\\nuniform mat4 modelMatrix;\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform mat4 viewProjectionMatrix;\\nuniform vec3 cameraPositionWorld;\\n\\nstruct World {\\n  vec3 position;\\n  vec3 normal;\\n};\\n\\nWorld world;\\n\\nvoid project_setPosition(vec4 position) {\\n  project_vPositionWorld = position;\\n}\\n\\nvoid project_setNormal(vec3 normal) {\\n  project_vNormalWorld = normal;\\n}\\n\\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\\n  world.position = position;\\n  world.normal = normal;\\n}\\n\\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\\n  world.normal = mat3(modelMatrix) * normal;\\n}\\n\\nvec4 project_model_to_clipspace(vec4 position) {\\n  return viewProjectionMatrix * modelMatrix * position;\\n}\\n\\nvec4 project_model_to_clipspace(vec3 position) {\\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\\n}\\n\\nvec4 project_world_to_clipspace(vec3 position) {\\n  return viewProjectionMatrix * vec4(position, 1.);\\n}\\n\\nvec4 project_view_to_clipspace(vec3 position) {\\n  return projectionMatrix * vec4(position, 1.);\\n}\\n\\nvec4 project_to_clipspace(vec3 position) {\\n  return viewProjectionMatrix * vec4(position, 1.);\\n}\\n\");\nvar fs = \"\\n\".concat(common);\nexport default {\n  name: 'project',\n  getUniforms: getUniforms,\n  vs: vs,\n  fs: fs\n};","import { Vector3 } from 'math.gl';\nimport commonShader from './lighting-common.glsl';\nimport vertexShader1 from './lighting-vertex.glsl';\nimport fragmentShader1 from './lighting-fragment.glsl';\nexport var vertexShader = \"\".concat(commonShader, \"\\n\").concat(vertexShader1, \"\\n\");\nexport var fragmentShader = \"\".concat(commonShader, \"\\n\").concat(fragmentShader1, \"\\n\");\nexport var name = 'lighting';\nexport var config = {\n  MAX_POINT_LIGHTS: 4\n}; // Setup the lighting system: ambient, directional, point lights.\n\nexport function getUniforms(_ref) {\n  var _ref$lightingEnable = _ref.lightingEnable,\n      lightingEnable = _ref$lightingEnable === void 0 ? false : _ref$lightingEnable,\n      _ref$lightingAmbientC = _ref.lightingAmbientColor,\n      lightingAmbientColor = _ref$lightingAmbientC === void 0 ? [0.2, 0.2, 0.2] : _ref$lightingAmbientC,\n      _ref$lightingDirectio = _ref.lightingDirection,\n      lightingDirection = _ref$lightingDirectio === void 0 ? [1, 1, 1] : _ref$lightingDirectio,\n      _ref$lightingDirectio2 = _ref.lightingDirectionalColor,\n      lightingDirectionalColor = _ref$lightingDirectio2 === void 0 ? [0, 0, 0] : _ref$lightingDirectio2,\n      _ref$lightingPointLig = _ref.lightingPointLights,\n      lightingPointLights = _ref$lightingPointLig === void 0 ? [] : _ref$lightingPointLig; // Set light uniforms. Ambient, directional and point lights.\n\n  return Object.assign({\n    lightingEnable: lightingEnable,\n    // Ambient\n    lightingAmbientColor: lightingAmbientColor\n  }, getDirectionalUniforms(lightingDirection), getPointUniforms(lightingPointLights));\n}\n\nfunction getDirectionalUniforms(_ref2) {\n  var color = _ref2.color,\n      direction = _ref2.direction; // Normalize lighting direction vector\n\n  var dir = new Vector3(direction.x, direction.y, direction.z).normalize().scale(-1, -1, -1);\n  return {\n    directionalColor: [color.r, color.g, color.b],\n    lightingDirection: [dir.x, dir.y, dir.z]\n  };\n}\n\nfunction getPointUniforms(points) {\n  points = points instanceof Array ? points : [points];\n  var numberPoints = points.length;\n  var pointLocations = [];\n  var pointColors = [];\n  var enableSpecular = [];\n  var pointSpecularColors = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = points[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var point = _step.value;\n      var position = point.position,\n          color = point.color,\n          diffuse = point.diffuse,\n          specular = point.specular;\n      var pointColor = color || diffuse;\n      pointLocations.push(position.x, position.y, position.z);\n      pointColors.push(pointColor.r, pointColor.g, pointColor.b); // Add specular color\n\n      enableSpecular.push(Number(Boolean(specular)));\n\n      if (specular) {\n        pointSpecularColors.push(specular.r, specular.g, specular.b);\n      } else {\n        pointSpecularColors.push(0, 0, 0);\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return {\n    numberPoints: numberPoints,\n    pointLocation: pointLocations,\n    pointColor: pointColors,\n    enableSpecular: enableSpecular,\n    pointSpecularColor: pointSpecularColors\n  };\n}\n\nexport default {\n  name: name,\n  vs: vertexShader,\n  fs: fragmentShader,\n  getUniforms: getUniforms\n};","export default \"\\n\";","export default \"#define LIGHT_MAX 4\\n\\nuniform bool lighting_uEnableLights;\\nuniform vec3 lighting_uAmbientColor;\\nuniform vec3 lighting_uDirection;\\nuniform vec3 lighting_uDirectionalColor;\\nuniform int  lighting_uPointCount;\\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\\nuniform bool lighting_uEnableReflections;\\nvarying vec4 lighting_vPosition;\\nvarying vec4 lighting_vNormal;\\nvarying vec3 lighting_vColor;\\nvarying vec3 lighting_vLightWeighting;\\nvarying vec3 lighting_vReflection;\\n\\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\\n}\\n\\nvoid lighting__getLightWeigting() {\\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\\n  vec3 pointWeight = vec3(0., 0., 0.);\\n  for (int i = 0; i < LIGHT_MAX; i++) {\\n    if (i < numberPoints) {\\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\\n     } else {\\n       break;\\n     }\\n   }\\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\\n}\\n\\nvoid lighting_apply(vec3 position, vec3 normal) {\\n  lighting_setPositionAndNormal(position, normal);\\n  if(!lighting_uEnableLights) {\\n    lighting_vLightWeighting = vec3(1., 1., 1.);\\n  } else {\\n    lighting_vLightWeighting = lighting__getLightWeighting();\\n  }\\n}\\n\\nvoid lighting_set_reflection(vec3 position) {\\n  if (lighting_uEnableReflections) {\\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\\n  } else {\\n    lighting_vReflection = vec3(1., 1., 1.);\\n  }\\n}\\n\";","export default \"precision highp float;\\n\\n#define LIGHT_MAX 4\\n\\nvarying vec3 lighting_vLightWeighting;\\n\\nvec4 lighting_apply(vec4 color) {\\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\\n}\\n\\nuniform mat4 viewMatrix;\\n\\n\\nvarying vec4 lighting_vColor;\\nvarying vec4 lighting_vTransformedNormal;\\nvarying vec4 lighting_vPosition;\\n\\nuniform float shininess;\\nuniform bool enableSpecularMap;\\nuniform bool enableLights;\\n\\nuniform vec3 ambientColor;\\nuniform vec3 directionalColor;\\nuniform vec3 lightingDirection;\\n\\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\\nuniform int numberPoints;\\n\\n\\nvec3 lighting__calculate_light_weighting() {\\n\\treturn lighting__calculate_light_weighting(shininess);\\n}\\n\\nvec3 lighting__calculate_light_weighting(shininess) {\\n  vec3 normal = vTransformedNormal.xyz;\\n  vec3 eyeDirection = normalize(-vPosition.xyz);\\n\\n  vec3 specularLight = vec3(0., 0., 0.);\\n  vec3 diffuseLight = vec3(0., 0., 0.);\\n\\n  for (int i = 0; i < LIGHT_MAX; i++) {\\n    if (i < numberPoints) {\\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\\n\\n      if (lighting_uPointSpecularEnable > 0.) {\\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\\n        float specularLightWeighting =\\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\\n      }\\n\\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return ambientColor + diffuseLight + specularLight;\\n}\\n\\nvoid lighting_filterColor(fragmentColor) {\\n  if (!lighting_enable) {\\n  \\treturn fragmentColor;\\n  } else {\\n  \\tvec3 lightWeighting = lighting__calculate_light_weighting();\\n  \\treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\\n  }\\n}\\n\\nuniform vec3 material_uAmbientColor;\\nuniform vec3 material_uDiffuseColor;\\nuniform vec3 material_uSpecularColor;\\nuniform vec3 material_uEmissiveColor;\\n\\nuniform bool hasTexture1;\\nuniform sampler2D sampler1;\\n\\nuniform mat4 viewMatrix;\\n\\nvoid apply_lighting(color) {\\n  vec3 ambientLightWeighting = ambientColor;\\n\\n  vec3 normal = vTransformedNormal.xyz;\\n  vec3 eyeDirection = normalize(-vPosition.xyz);\\n\\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\\n\\n  for (int i = 0; i < LIGHT_MAX; i++) {\\n    if (i < numberPoints) {\\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\\n\\n      if (enableSpecularHighlights) {\\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\\n        float specularLightWeighting =\\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\\n        specularLight += specularLightWeighting * pointSpecularColor[i];\\n      }\\n\\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\\n      diffuseLight += diffuseLightWeighting * pointColor[i];\\n    } else {\\n        break;\\n    }\\n  }\\n\\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\\n  gl_FragColor = vec4(\\n    matAmbientColor * ambientLightWeighting\\n    + matDiffuseColor * diffuseLightWeighting\\n    + matSpecularColor * specularLightWeighting\\n    + matEmissiveColor,\\n    color.a\\n  );\\n}\\n\\n  vec3 lightWeighting;\\n  if (!enableLights) {\\n    lightWeighting = vec3(1.0, 1.0, 1.0);\\n  } else {\\n    vec3 lightDirection;\\n    float specularLightWeighting = 0.0;\\n    float diffuseLightWeighting = 0.0;\\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\\n\\n    vec3 transformedPointLocation;\\n    vec3 normal = vTransformedNormal.xyz;\\n\\n    vec3 eyeDirection = normalize(-vPosition.xyz);\\n    vec3 reflectionDirection;\\n\\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\\n\\n    for (int i = 0; i < LIGHT_MAX; i++) {\\n      if (i < numberPoints) {\\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\\n\\n        if (enableSpecular[i] > 0.0) {\\n          reflectionDirection = reflect(-lightDirection, normal);\\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\\n          specularLight += specularLightWeighting * pointSpecularColor[i];\\n        }\\n\\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\\n        diffuseLight += diffuseLightWeighting * pointColor[i];\\n      } else {\\n        break;\\n      }\\n    }\\n\\n    lightWeighting = ambientColor + diffuseLight + specularLight;\\n  }\\nuniform float reflection;\\nuniform float refraction;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\";","// Cheap lighting - single directional light, single dot product, one uniform\nimport project from '../project/project';\n/* eslint-disable camelcase */\n\nvar DEFAULT_LIGHT_DIRECTION = new Float32Array([1, 1, 2]);\nvar DEFAULT_MODULE_OPTIONS = {\n  lightDirection: DEFAULT_LIGHT_DIRECTION\n};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var uniforms = {};\n\n  if (opts.lightDirection) {\n    uniforms.dirlight_uLightDirection = opts.lightDirection;\n  }\n\n  return uniforms;\n} // TODO - reuse normal from geometry module\n\n\nvar vs = null;\nvar fs = \"uniform vec3 dirlight_uLightDirection;\\nvec4 dirlight_filterColor(vec4 color) {\\n  vec3 normal = project_getNormal_World();\\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\\n  return vec4(color.rgb * d, color.a);\\n}\\n\";\nexport default {\n  name: 'dirlight',\n  vs: vs,\n  fs: fs,\n  getUniforms: getUniforms,\n  dependencies: [project]\n};","var DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nvar DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  //  Set to a picking color to visually highlight that item\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  // Color of visual highlight of \"selected\" item\n  pickingThreshold: 1.0,\n  pickingActive: false // Set to true when rendering to off-screen \"picking\" buffer\n\n};\n/* eslint-disable camelcase */\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (opts.pickingSelectedColor === null) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      var selectedColor = [opts.pickingSelectedColor[0], opts.pickingSelectedColor[1], opts.pickingSelectedColor[2]];\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor !== undefined) {\n    uniforms.picking_uHighlightColor = opts.pickingHighlightColor;\n  } // TODO - major hack - decide on normalization and remove\n\n\n  if (opts.pickingThreshold !== undefined) {\n    uniforms.picking_uThreshold = opts.pickingThreshold;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = opts.pickingActive ? 1 : 0;\n  }\n\n  return uniforms;\n}\n\nvar vs = \"uniform vec3 picking_uSelectedColor;\\nuniform float picking_uThreshold;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Aselected;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  picking_vRGBcolor_Aselected.a =\\n    float(isVertexPicked(pickingColor));\\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\\n}\\n\";\nvar fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Aselected;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\\n\\n  if (selected) {\\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\\n\\n    float highLightAlpha = highLightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\\n  if (picking_uActive && length(pickingColor) < 0.001) {\\n    discard;\\n  }\\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nexport default {\n  name: 'picking',\n  vs: vs,\n  fs: fs,\n  getUniforms: getUniforms\n};","// Minimal texture (diffuse map) support\n\n/* eslint-disable camelcase */\nvar DEFAULT_MODULE_OPTIONS = {\n  diffuseTexture: null,\n  diffuseColor: [0.5, 0.5, 0.5, 1]\n};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var uniforms = {};\n\n  if (opts.diffuseTexture !== undefined) {\n    uniforms.diffuse_uHasTexture = Boolean(opts.diffuseTexture);\n    uniforms.diffuse_uTexture = opts.diffuseTexture;\n  }\n\n  if (opts.diffuseColor !== undefined) {\n    uniforms.diffuse_uColor = opts.diffuseColor;\n  }\n\n  return uniforms;\n}\n\nvar vs = \"out vec2 diffuse_vTexCoord;\\nvoid diffuse_setTextureCoordinate(vec2 uv) {\\n  diffuse_vTexCoord = uv;\\n}\\n\";\nvar fs = \"uniform vec4 diffuse_uColor;\\nuniform bool diffuse_uHasTexture;\\nuniform sampler2D diffuse_uTexture;\\n\\nin vec2 diffuse_vTexCoord;\\n\\n\\n\\nvec4 diffuse_getColor() {\\n  vec2 texCoord = diffuse_vTexCoord;\\n  return diffuse_uHasTexture ?\\n    texture2D(diffuse_uTexture, vec2(texCoord.s, texCoord.t)) :\\n    diffuse_uColor;\\n}\\n\\nvec4 diffuse_filterColor(vec4 color) {\\n  return diffuse_getColor();\\n}\\n\";\nexport default {\n  name: 'diffuse',\n  getUniforms: getUniforms,\n  vs: vs,\n  fs: fs\n};","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport assert from 'assert';\nvar FS100 = 'void main() {}';\nvar FS300 = \"#version 300 es\\n\".concat(FS100); // Prase given glsl line and return qualifier details or null\n\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  var words = line.replace(/^\\s+/, '').split(/\\s+/); // TODO add support for precession qualifiers (highp, mediump and lowp)\n\n  var _words = _slicedToArray(words, 3),\n      qualifier = _words[0],\n      type = _words[1],\n      definition = _words[2];\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  var name = definition.split(';')[0];\n  return {\n    qualifier: qualifier,\n    type: type,\n    name: name\n  };\n} // Given the shader version, input and output variable names,\n// builds and return a pass through fragment shader.\n\nexport function getPassthroughFS() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$version = _ref.version,\n      version = _ref$version === void 0 ? 100 : _ref$version,\n      input = _ref.input,\n      inputType = _ref.inputType,\n      output = _ref.output;\n\n  if (!input) {\n    return version === 300 ? FS300 : FS100;\n  }\n\n  var outputValue = convertToVec4(input, inputType);\n\n  if (version === 300) {\n    return \"#version 300 es\\nin \".concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  } // version 100\n\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n} // convert glsl type to suffix\n\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n} // convert glsl type to channel count\n\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n} // Returns glsl instruction for converting to vec4\n\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}","// Private shader module used by `Transform`\nvar vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport default {\n  name: 'transform',\n  vs: vs,\n  fs: null\n};","import seer from 'seer';\nimport { window } from '../utils/globals';\nvar models = {};\n/**\n * Add a model to our cache indexed by id\n */\n\nexport var addModel = function addModel(model) {\n  if (models[model.id]) {\n    return;\n  }\n\n  models[model.id] = model;\n  seer.listItem('luma.gl', model.id);\n};\n/**\n * Log a model uniforms and attributes.\n */\n\nexport var logModel = function logModel(model, uniforms) {\n  if (!seer.isReady() || seer.throttle(\"luma.gl:\".concat(model.id), 1e3)) {\n    return;\n  }\n\n  var attributesObject = model.geometry ? Object.assign({}, model.geometry.attributes, model.attributes) : model.attributes;\n  var uniformsObject = Object.assign({}, model.uniforms, uniforms);\n  seer.multiUpdate('luma.gl', model.id, [{\n    path: 'objects.uniforms',\n    data: uniformsObject\n  }, {\n    path: 'objects.attributes',\n    data: attributesObject\n  }]);\n};\n/**\n * Remove a previously set model from the cache\n */\n\nexport var removeModel = function removeModel(id) {\n  delete models[id];\n  seer.deleteItem('luma.gl', id);\n};\n/**\n * Recursively traverse an object given a path of properties and set the given value\n */\n\nvar recursiveSet = function recursiveSet(obj, path, value) {\n  if (!obj) {\n    return;\n  }\n\n  if (path.length > 1) {\n    recursiveSet(obj[path[0]], path.slice(1), value);\n  } else {\n    obj[path[0]] = value;\n  }\n};\n\nvar overrides = new Map();\n/**\n * Create an override on the specify layer, indexed by a valuePath array.\n * Do nothing in case Seer as not been initialized to prevent any preformance drawback.\n */\n\nexport var setOverride = function setOverride(id, valuePath, value) {\n  if (!window.__SEER_INITIALIZED__) {\n    return;\n  }\n\n  if (!overrides.has(id)) {\n    overrides.set(id, new Map());\n  }\n\n  var uniforms = overrides.get(id);\n  uniforms.set(valuePath, value);\n};\n/**\n * Apply overrides to a specific model's uniforms\n */\n\nexport var getOverrides = function getOverrides(id, uniforms) {\n  if (!window.__SEER_INITIALIZED__ || !id) {\n    return;\n  }\n\n  var overs = overrides.get(id);\n\n  if (!overs) {\n    return;\n  }\n\n  overs.forEach(function (value, valuePath) {\n    recursiveSet(uniforms, valuePath, value);\n  });\n};\n/**\n * Listen for luma.gl edit events\n */\n\nseer.listenFor('luma.gl', function (payload) {\n  var model = models[payload.itemKey];\n\n  if (!model || payload.type !== 'edit' || payload.valuePath[0] !== 'uniforms') {\n    return;\n  }\n\n  var valuePath = payload.valuePath.slice(1);\n  setOverride(payload.itemKey, valuePath, payload.value);\n  var uniforms = model.getUniforms();\n  recursiveSet(uniforms, valuePath, payload.value);\n  model.setUniforms(uniforms);\n});","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { formatValue } from '../utils';\nimport assert from '../utils/assert'; // Prepares a table suitable for console.table\n\n/* eslint-disable max-statements, complexity */\n\nexport function getDebugTableForUniforms() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Uniforms' : _ref$header,\n      program = _ref.program,\n      uniforms = _ref.uniforms,\n      _ref$undefinedOnly = _ref.undefinedOnly,\n      undefinedOnly = _ref$undefinedOnly === void 0 ? false : _ref$undefinedOnly;\n\n  assert(program);\n  var SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  var PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix'; // TODO - Use explicit list\n\n  var uniformLocations = program._uniformSetters;\n  var table = {}; // {[header]: {}};\n  // Add program's provided uniforms (in alphabetical order)\n\n  var uniformNames = Object.keys(uniformLocations).sort();\n  var count = 0; // First add non-underscored uniforms (assumed not coming from shader modules)\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = uniformNames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _uniformName = _step.value;\n\n      if (!_uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !_uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    } // add underscored uniforms (assumed from shader modules)\n\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = uniformNames[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _uniformName2 = _step2.value;\n\n      if (_uniformName2.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName2,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = uniformNames[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _uniformName3 = _step3.value;\n\n      if (!table[_uniformName3]) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName3,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    } // Create a table of unused uniforms\n\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  var unusedCount = 0;\n  var unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (var uniformName in uniforms) {\n      var uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = _defineProperty({\n          Type: \"NOT USED: \".concat(uniform)\n        }, header, formatValue(uniform));\n      }\n    }\n  }\n\n  return {\n    table: table,\n    count: count,\n    unusedTable: unusedTable,\n    unusedCount: unusedCount\n  };\n} // Helper\n\nfunction addUniformToTable(_ref2) {\n  var table = _ref2.table,\n      header = _ref2.header,\n      uniforms = _ref2.uniforms,\n      uniformName = _ref2.uniformName,\n      undefinedOnly = _ref2.undefinedOnly;\n  var value = uniforms[uniformName];\n  var isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    var _table$uniformName;\n\n    table[uniformName] = (_table$uniformName = {}, _defineProperty(_table$uniformName, header, isDefined ? formatValue(value) : 'N/A'), _defineProperty(_table$uniformName, 'Uniform Type', isDefined ? value : 'NOT PROVIDED'), _table$uniformName);\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Buffer from '../webgl/buffer';\nimport { glKey } from '../webgl-utils/constants-to-keys';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils'; // Creates object suitable as input for console.table\n\nexport function getDebugTableForVertexArray() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      vertexArray = _ref.vertexArray,\n      _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Attributes' : _ref$header;\n\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  var table = {}; // {[header]: {}};\n  // Add index (elements) if available\n\n  if (vertexArray.elements) {\n    // const elements = Object.assign({size: 1}, vertexArray.elements);\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  } // Add used attributes\n\n\n  var attributes = vertexArray.values;\n\n  for (var attributeLocation in attributes) {\n    var info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      var rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      var accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n/* eslint-disable max-statements */\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  var _ref3; // const round = xnum => Math.round(num * 10) / 10;\n\n\n  var gl = vertexArray.gl;\n  var type = 'NOT PROVIDED';\n  var size = 'N/A';\n  var verts = 'N/A';\n  var bytes = 'N/A';\n  var isInteger;\n  var marker;\n  var value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size; // Generate a type name by dropping Array from Float32Array etc.\n\n    type = String(type).replace('Array', ''); // Look for 'nt' to detect integer types, e.g. Int32Array, Uint32Array\n\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    var _ref2;\n\n    var buffer = attribute;\n\n    var _buffer$getDebugData = buffer.getDebugData(),\n        data = _buffer$getDebugData.data,\n        modified = _buffer$getDebugData.modified;\n\n    marker = modified ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    var format;\n\n    if (accessor) {\n      var instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(glKey(gl, type), \")\");\n    } else {\n      // element buffer\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return _ref2 = {}, _defineProperty(_ref2, header, \"\".concat(marker).concat(formatValue(value, {\n      size: size,\n      isInteger: isInteger\n    }))), _defineProperty(_ref2, 'Format ', format), _ref2;\n  } // CONSTANT VALUE\n\n\n  value = attribute;\n  size = attribute.length; // Generate a type name by dropping Array from Float32Array etc.\n\n  type = String(attribute.constructor.name).replace('Array', ''); // Look for 'nt' to detect integer types, e.g. Int32Array, Uint32Array\n\n  isInteger = type.indexOf('nt') !== -1;\n  return _ref3 = {}, _defineProperty(_ref3, header, \"\".concat(formatValue(value, {\n    size: size,\n    isInteger: isInteger\n  }), \" (constant)\")), _defineProperty(_ref3, 'Format ', \"\".concat(size, \"x\").concat(type, \" (constant)\")), _ref3;\n}\n/* eslint-ensable max-statements */\n\n\nfunction getGLSLDeclaration(name, accessor) {\n  var type = accessor.type,\n      size = accessor.size;\n  var typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(name, \" (\").concat(typeAndName.name, \")\");\n  }\n\n  return name;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  var table = {};\n  var header = \"Accessors for \".concat(config.id);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = config.attributeInfos[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var attributeInfo = _step.value;\n\n      if (attributeInfo) {\n        var glslDeclaration = getGLSLDeclaration(attributeInfo);\n        table[\"in \".concat(glslDeclaration)] = _defineProperty({}, header, JSON.stringify(attributeInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = config.varyingInfos[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var varyingInfo = _step2.value;\n\n      if (varyingInfo) {\n        var _glslDeclaration = getGLSLDeclaration(varyingInfo);\n\n        table[\"out \".concat(_glslDeclaration)] = _defineProperty({}, header, JSON.stringify(varyingInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  var _attributeInfo$access = attributeInfo.accessor,\n      type = _attributeInfo$access.type,\n      size = _attributeInfo$access.size;\n  var typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Attribute from './attribute';\nimport Object3D from './object-3d';\nimport { getDrawMode } from '../geometry/geometry';\nimport { Buffer, Query, Program, TransformFeedback, VertexArray, clear as _clear } from '../webgl';\nimport { isWebGL } from '../webgl-utils';\nimport { MODULAR_SHADERS } from '../shadertools/src/shaders';\nimport { assembleShaders } from '../shadertools/src';\nimport { addModel, removeModel, logModel, getOverrides } from '../debug/seer-integration';\nimport { getDebugTableForUniforms } from '../webgl-debug/debug-uniforms';\nimport { getDebugTableForVertexArray } from '../webgl-debug/debug-vertex-array';\nimport { getDebugTableForProgramConfiguration } from '../webgl-debug/debug-program-configuration';\nimport { log, isObjectEmpty } from '../utils';\nimport assert from '../utils/assert';\nvar ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\nvar LOG_DRAW_PRIORITY = 2;\nvar LOG_DRAW_TIMEOUT = 10000; // These old picking uniforms should be avoided and we should use picking module\n// and set uniforms using Model class 'updateModuleSettings()'\n// TODO - move to shader modules\n\nvar DEPRECATED_PICKING_UNIFORMS = ['renderPickingBuffer', 'pickingEnabled']; // Model abstract O3D Class\n\nvar Model = /*#__PURE__*/function (_Object3D) {\n  _inherits(Model, _Object3D);\n\n  function Model(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Model);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Model).call(this, props));\n    assert(isWebGL(gl));\n    _this.gl = gl;\n    _this.lastLogTime = 0; // TODO - move to probe.gl\n\n    _this.initialize(props); // intended to be subclassed, do not seal\n\n\n    return _this;\n  }\n  /* eslint-disable max-statements  */\n\n  /* eslint-disable complexity  */\n\n\n  _createClass(Model, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.props = {};\n      this.program = this._createProgram(props); // Create a vertex array configured after this program\n\n      this.vertexArray = new VertexArray(this.gl, {\n        program: this.program\n      }); // Initialize state\n\n      this.userData = {};\n      this.needsRedraw = true; // Model manages auto Buffer creation from typed arrays\n\n      this._attributes = {}; // All attributes\n\n      this.attributes = {}; // User defined attributes\n      // Model manages uniform animation\n\n      this.animatedUniforms = {};\n      this.animated = false;\n      this.animationLoop = null; // if set, used as source for animationProps\n\n      this.timerQueryEnabled = false;\n      this.timeElapsedQuery = undefined;\n      this.lastQueryReturned = true;\n      this.stats = {\n        accumulatedFrameTime: 0,\n        averageFrameTime: 0,\n        profileFrameCount: 0\n      }; // picking options\n\n      this.pickable = true; // this.pick = pick || (() => false);\n\n      this.setProps(props); // Make sure we have some reasonable default uniforms in place\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms(), // Get all default uniforms\n      this.getModuleUniforms(props.moduleSettings) // Get unforms for supplied parameters\n      )); // Attributes and buffers\n      // geometry might have set drawMode and vertexCount\n\n      this.isInstanced = props.isInstanced || props.instanced;\n\n      this.onBeforeRender = props.onBeforeRender || function () {};\n\n      this.onAfterRender = props.onAfterRender || function () {}; // assert(program || program instanceof Program);\n\n\n      assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n    }\n    /* eslint-enable max-statements */\n\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      Object.assign(this.props, props); // params\n      // if ('drawMode' in props) {\n      //   this.drawMode = getDrawMode(props.drawMode);\n      // }\n      // if ('vertexCount' in props) {\n      //   this.vertexCount = props.vertexCount;\n      // }\n\n      if ('instanceCount' in props) {\n        this.instanceCount = props.instanceCount;\n      }\n\n      if ('geometry' in props) {\n        this.setGeometry(props.geometry);\n      } // webgl settings\n\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms, props.samplers);\n      }\n\n      if ('pickable' in props) {\n        this.pickable = props.pickable;\n      } // Experimental props\n\n\n      if ('timerQueryEnabled' in props) {\n        this.timerQueryEnabled = props.timerQueryEnabled && Query.isSupported(this.gl, ['timers']);\n\n        if (props.timerQueryEnabled && !this.timerQueryEnabled) {\n          log.warn('GPU timer not supported')();\n        }\n      }\n\n      if ('_feedbackBuffers' in props) {\n        this._setFeedbackBuffers(props._feedbackBuffers);\n      }\n\n      if ('_animationProps' in props) {\n        this._setAnimationProps(props._animationProps);\n      }\n\n      if ('_animationLoop' in props) {\n        this.animationLoop = props._animationLoop;\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      // delete all attributes created by this model\n      // TODO - should buffer deletes be handled by vertex array?\n      for (var key in this._attributes) {\n        if (this._attributes[key] !== this.attributes[key]) {\n          this._attributes[key].delete();\n        }\n      }\n\n      this.program.delete();\n      this.vertexArray.delete();\n      removeModel(this.id);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.delete();\n    } // GETTERS\n\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$clearRedrawFlags = _ref.clearRedrawFlags,\n          clearRedrawFlags = _ref$clearRedrawFlags === void 0 ? false : _ref$clearRedrawFlags;\n\n      var redraw = false;\n      redraw = redraw || this.needsRedraw;\n      this.needsRedraw = this.needsRedraw && !clearRedrawFlags;\n\n      if (this.geometry) {\n        redraw = redraw || this.geometry.getNeedsRedraw({\n          clearRedrawFlags: clearRedrawFlags\n        });\n      }\n\n      if (this.animated) {\n        redraw = redraw || \"animated model \".concat(this.id);\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"getDrawMode\",\n    value: function getDrawMode() {\n      return this.drawMode;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getInstanceCount\",\n    value: function getInstanceCount() {\n      return this.instanceCount;\n    }\n  }, {\n    key: \"getProgram\",\n    value: function getProgram() {\n      return this.program;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms() {\n      return this.program.getUniforms;\n    } // SETTERS\n\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.needsRedraw = redraw;\n      return this;\n    }\n  }, {\n    key: \"setDrawMode\",\n    value: function setDrawMode(drawMode) {\n      this.props.drawMode = getDrawMode(drawMode);\n      return this;\n    }\n  }, {\n    key: \"setVertexCount\",\n    value: function setVertexCount(vertexCount) {\n      assert(Number.isFinite(vertexCount));\n      this.props.vertexCount = vertexCount;\n      return this;\n    }\n  }, {\n    key: \"setInstanceCount\",\n    value: function setInstanceCount(instanceCount) {\n      assert(Number.isFinite(instanceCount));\n      this.instanceCount = instanceCount;\n      return this;\n    } // TODO - just set attributes, don't hold on to geometry\n\n  }, {\n    key: \"setGeometry\",\n    value: function setGeometry(geometry) {\n      this.geometry = geometry;\n\n      var buffers = this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());\n\n      this.vertexArray.setAttributes(buffers);\n      this.setNeedsRedraw();\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; // Avoid setting needsRedraw if no attributes\n\n      if (isObjectEmpty(attributes)) {\n        return this;\n      }\n\n      Object.assign(this.attributes, attributes);\n\n      var buffers = this._createBuffersFromAttributeDescriptors(attributes); // Object.assign(this.attributes, buffers);\n\n\n      this.vertexArray.setAttributes(buffers);\n      this.setNeedsRedraw();\n      return this;\n    } // TODO - should actually set the uniforms\n\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var _this2 = this;\n\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var samplers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; // Let Seer override edited uniforms\n\n      uniforms = Object.assign({}, uniforms);\n      getOverrides(this.id, uniforms); // Resolve any animated uniforms so that we have an initial value\n\n      uniforms = this._extractAnimatedUniforms(uniforms);\n      this.program.setUniforms(uniforms, samplers, function () {\n        // if something changed\n        _this2._checkForDeprecatedUniforms(uniforms);\n\n        _this2.setNeedsRedraw();\n      });\n    } // Updates (evaluates) all function valued uniforms based on a new set of animationProps\n    // experimental\n\n  }, {\n    key: \"_setAnimationProps\",\n    value: function _setAnimationProps(animationProps) {\n      var _this3 = this;\n\n      if (this.animated) {\n        assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n\n        var animatedUniforms = this._evaluateAnimateUniforms(animationProps);\n\n        this.program.setUniforms(animatedUniforms, {}, function () {\n          // if something changed\n          _this3._checkForDeprecatedUniforms(animatedUniforms);\n\n          _this3.setNeedsRedraw();\n        });\n      }\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings(opts) {\n      var uniforms = this.getModuleUniforms(opts || {});\n      return this.setUniforms(uniforms);\n    } // DRAW CALLS\n\n  }, {\n    key: \"clear\",\n    value: function clear(opts) {\n      _clear(this.program.gl, opts);\n\n      return this;\n    }\n    /* eslint-disable max-statements  */\n\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$moduleSettings = opts.moduleSettings,\n          moduleSettings = _opts$moduleSettings === void 0 ? null : _opts$moduleSettings,\n          framebuffer = opts.framebuffer,\n          _opts$uniforms = opts.uniforms,\n          uniforms = _opts$uniforms === void 0 ? {} : _opts$uniforms,\n          _opts$attributes = opts.attributes,\n          attributes = _opts$attributes === void 0 ? {} : _opts$attributes,\n          _opts$samplers = opts.samplers,\n          samplers = _opts$samplers === void 0 ? {} : _opts$samplers,\n          _opts$transformFeedba = opts.transformFeedback,\n          transformFeedback = _opts$transformFeedba === void 0 ? this.transformFeedback : _opts$transformFeedba,\n          _opts$parameters = opts.parameters,\n          parameters = _opts$parameters === void 0 ? {} : _opts$parameters,\n          _opts$vertexArray = opts.vertexArray,\n          vertexArray = _opts$vertexArray === void 0 ? this.vertexArray : _opts$vertexArray,\n          animationProps = opts.animationProps; // Update module settings\n\n      addModel(this); // Update model with any just provided attributes, settings or uniforms\n\n      this.setAttributes(attributes);\n      this.updateModuleSettings(moduleSettings);\n      this.setUniforms(uniforms, samplers); // Animate any function valued uniforms\n\n      this._refreshAnimationProps(animationProps);\n\n      var logPriority = this._logDrawCallStart(2);\n\n      var drawParams = this.vertexArray.getDrawParams(this.props);\n\n      if (drawParams.isInstanced && !this.isInstanced) {\n        log.warn('Found instanced attributes on non-instanced model', this.id)();\n      }\n\n      var isIndexed = drawParams.isIndexed,\n          indexType = drawParams.indexType;\n      var isInstanced = this.isInstanced,\n          instanceCount = this.instanceCount;\n      this.onBeforeRender();\n\n      this._timerQueryStart();\n\n      this.program.draw(Object.assign({}, opts, {\n        logPriority: logPriority,\n        uniforms: null,\n        // Already set (may contain \"function values\" not understood by Program)\n        framebuffer: framebuffer,\n        parameters: parameters,\n        drawMode: this.getDrawMode(),\n        vertexCount: this.getVertexCount(),\n        vertexArray: vertexArray,\n        transformFeedback: transformFeedback,\n        isIndexed: isIndexed,\n        indexType: indexType,\n        isInstanced: isInstanced,\n        instanceCount: instanceCount\n      }));\n\n      this._timerQueryEnd();\n\n      this.onAfterRender();\n      this.setNeedsRedraw(false);\n\n      this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n\n      return this;\n    }\n    /* eslint-enable max-statements  */\n    // Draw call for transform feedback\n\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$discard = opts.discard,\n          discard = _opts$discard === void 0 ? true : _opts$discard,\n          feedbackBuffers = opts.feedbackBuffers,\n          _opts$unbindModels = opts.unbindModels,\n          unbindModels = _opts$unbindModels === void 0 ? [] : _opts$unbindModels;\n      var parameters = opts.parameters;\n\n      if (feedbackBuffers) {\n        this._setFeedbackBuffers(feedbackBuffers);\n      }\n\n      if (discard) {\n        parameters = Object.assign({}, parameters, _defineProperty({}, 35977, discard));\n      }\n\n      unbindModels.forEach(function (model) {\n        return model.vertexArray.unbindBuffers();\n      });\n\n      try {\n        this.draw(Object.assign({}, opts, {\n          parameters: parameters\n        }));\n      } finally {\n        unbindModels.forEach(function (model) {\n          return model.vertexArray.bindBuffers();\n        });\n      }\n\n      return this;\n    } // DEPRECATED METHODS\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      assert(arguments.length <= 1); // log.deprecated('Model.render()', 'Model.draw()')();\n\n      return this.draw({\n        uniforms: uniforms\n      });\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_createProgram\",\n    value: function _createProgram(_ref2) {\n      var _ref2$vs = _ref2.vs,\n          vs = _ref2$vs === void 0 ? null : _ref2$vs,\n          _ref2$fs = _ref2.fs,\n          fs = _ref2$fs === void 0 ? null : _ref2$fs,\n          _ref2$modules = _ref2.modules,\n          modules = _ref2$modules === void 0 ? null : _ref2$modules,\n          _ref2$defines = _ref2.defines,\n          defines = _ref2$defines === void 0 ? {} : _ref2$defines,\n          _ref2$inject = _ref2.inject,\n          inject = _ref2$inject === void 0 ? {} : _ref2$inject,\n          _ref2$shaderCache = _ref2.shaderCache,\n          shaderCache = _ref2$shaderCache === void 0 ? null : _ref2$shaderCache,\n          _ref2$varyings = _ref2.varyings,\n          varyings = _ref2$varyings === void 0 ? null : _ref2$varyings,\n          _ref2$bufferMode = _ref2.bufferMode,\n          bufferMode = _ref2$bufferMode === void 0 ? 35981 : _ref2$bufferMode,\n          _ref2$program = _ref2.program,\n          program = _ref2$program === void 0 ? null : _ref2$program;\n\n      this.getModuleUniforms = function (x) {};\n\n      var id = this.id;\n\n      if (!program) {\n        // Assign default shaders if none are provided\n        vs = vs || MODULAR_SHADERS.vs;\n        fs = fs || MODULAR_SHADERS.fs;\n        var assembleResult = assembleShaders(this.gl, {\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          log: log\n        });\n        vs = assembleResult.vs;\n        fs = assembleResult.fs;\n\n        if (shaderCache) {\n          program = shaderCache.getProgram(this.gl, {\n            id: id,\n            vs: vs,\n            fs: fs\n          });\n        } else {\n          program = new Program(this.gl, {\n            id: id,\n            vs: vs,\n            fs: fs,\n            varyings: varyings,\n            bufferMode: bufferMode\n          });\n        }\n\n        this.getModuleUniforms = assembleResult.getUniforms || function (x) {};\n      }\n\n      assert(program instanceof Program, 'Model needs a program');\n      return program;\n    }\n    /* eslint-enable complexity */\n    // Uniforms\n\n  }, {\n    key: \"_checkForDeprecatedUniforms\",\n    value: function _checkForDeprecatedUniforms(uniforms) {\n      // deprecated picking uniforms\n      DEPRECATED_PICKING_UNIFORMS.forEach(function (uniform) {\n        if (uniform in uniforms) {\n          log.deprecated(uniform, 'use picking shader module and Model class updateModuleSettings()')();\n        }\n      });\n    } // Refreshes animated uniforms, attempting to get animated props from animationLoop if registered\n\n  }, {\n    key: \"_refreshAnimationProps\",\n    value: function _refreshAnimationProps(animationProps) {\n      // Try to read animationProps\n      animationProps = animationProps || this.animationLoop && this.animationLoop.animationProps;\n\n      if (animationProps) {\n        this._setAnimationProps(animationProps);\n      }\n    } // Calculate new values for any function uniforms based on supplied animationProps\n\n  }, {\n    key: \"_evaluateAnimateUniforms\",\n    value: function _evaluateAnimateUniforms(animationProps) {\n      if (!this.animated) {\n        return {};\n      }\n\n      var animatedUniforms = {};\n\n      for (var uniformName in this.animatedUniforms) {\n        var valueFunction = this.animatedUniforms[uniformName];\n        animatedUniforms[uniformName] = valueFunction(animationProps);\n      }\n\n      return animatedUniforms;\n    } // Extracts a list of function valued uniforms, so we can update them before each draw call\n    // Also removes such uniforms from the returned list\n\n  }, {\n    key: \"_extractAnimatedUniforms\",\n    value: function _extractAnimatedUniforms(uniforms) {\n      var foundAnimated = false; // Keep our animatedUniforms map up-to-date\n\n      for (var uniformName in uniforms) {\n        var newValue = uniforms[uniformName];\n\n        if (typeof newValue === 'function') {\n          this.animatedUniforms[uniformName] = newValue;\n          foundAnimated = true;\n        } else {\n          delete this.animatedUniforms[uniformName];\n        }\n      } // Update animated flag: `Model` is animated if any uniforms are animated (i.e. functions)\n\n\n      this.animated = !isObjectEmpty(this.animatedUniforms);\n\n      if (!foundAnimated) {\n        return uniforms;\n      } // If animated uniforms were found, remove them from ordinary uniform list\n      // `Program` class can't (and shouldn't) handle function valued uniforms\n\n\n      var staticUniforms = {};\n\n      for (var _uniformName in uniforms) {\n        if (!this.animatedUniforms[_uniformName]) {\n          staticUniforms[_uniformName] = uniforms[_uniformName];\n        }\n      }\n\n      return staticUniforms;\n    } // Transform Feedback\n\n  }, {\n    key: \"_setFeedbackBuffers\",\n    value: function _setFeedbackBuffers() {\n      var feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}; // Avoid setting needsRedraw if no feedbackBuffers\n\n      if (isObjectEmpty(feedbackBuffers)) {\n        return this;\n      }\n\n      var gl = this.program.gl;\n      this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n        program: this.program\n      });\n      this.transformFeedback.setBuffers(feedbackBuffers);\n      this.setNeedsRedraw();\n      return this;\n    } // Timer Queries\n\n  }, {\n    key: \"_timerQueryStart\",\n    value: function _timerQueryStart() {\n      if (this.timerQueryEnabled === true) {\n        if (!this.timeElapsedQuery) {\n          this.timeElapsedQuery = new Query(this.gl);\n        }\n\n        if (this.lastQueryReturned) {\n          this.lastQueryReturned = false;\n          this.timeElapsedQuery.beginTimeElapsedQuery();\n        }\n      }\n    }\n  }, {\n    key: \"_timerQueryEnd\",\n    value: function _timerQueryEnd() {\n      if (this.timerQueryEnabled === true) {\n        this.timeElapsedQuery.end(); // TODO: Skip results if 'gl.getParameter(this.ext.GPU_DISJOINT_EXT)' returns false\n        // should this be incorporated into Query object?\n\n        if (this.timeElapsedQuery.isResultAvailable()) {\n          this.lastQueryReturned = true;\n          var elapsedTime = this.timeElapsedQuery.getResult(); // Update stats (e.g. for seer)\n\n          this.stats.lastFrameTime = elapsedTime;\n          this.stats.accumulatedFrameTime += elapsedTime;\n          this.stats.profileFrameCount++;\n          this.stats.averageFrameTime = this.stats.accumulatedFrameTime / this.stats.profileFrameCount; // Log stats\n\n          log.log(LOG_DRAW_PRIORITY, \"GPU time \".concat(this.program.id, \": \").concat(this.stats.lastFrameTime, \"ms average \").concat(this.stats.averageFrameTime, \"ms accumulated: \").concat(this.stats.accumulatedFrameTime, \"ms count: \").concat(this.stats.profileFrameCount))();\n        }\n      }\n    } // Makes sure buffers are created for all attributes\n    // and that the program is updated with those buffers\n    // TODO - do we need the separation between \"attributes\" and \"buffers\"\n    // couldn't apps just create buffers directly?\n\n  }, {\n    key: \"_createBuffersFromAttributeDescriptors\",\n    value: function _createBuffersFromAttributeDescriptors(attributes) {\n      var gl = this.program.gl; // const attributes = {};\n\n      var buffers = {};\n\n      for (var attributeName in attributes) {\n        var descriptor = attributes[attributeName];\n        var attribute = this._attributes[attributeName];\n\n        if (descriptor instanceof Attribute) {\n          attribute = descriptor;\n        } else if (descriptor instanceof Buffer) {\n          attribute = attribute || new Attribute(gl, Object.assign({}, descriptor, descriptor.layout, {\n            id: attributeName\n          }));\n          attribute.update({\n            buffer: descriptor\n          });\n        } else if (attribute) {\n          attribute.update(descriptor);\n        } else {\n          attribute = new Attribute(gl, Object.assign({}, descriptor, {\n            id: attributeName\n          }));\n        }\n\n        this._attributes[attributeName] = attribute;\n        buffers[attributeName] = attribute.getValue();\n      }\n\n      return buffers;\n    }\n  }, {\n    key: \"_logDrawCallStart\",\n    value: function _logDrawCallStart(priority) {\n      var logDrawTimeout = priority > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n      if (log.priority < priority || Date.now() - this.lastLogTime < logDrawTimeout) {\n        return undefined;\n      }\n\n      this.lastLogTime = Date.now();\n      log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n        collapsed: log.priority <= 2\n      })();\n      return priority;\n    }\n  }, {\n    key: \"_logDrawCallEnd\",\n    value: function _logDrawCallEnd(priority, vertexArray, uniforms, framebuffer) {\n      // HACK: priority === undefined means logDrawCallStart didn't run\n      if (priority === undefined) {\n        return;\n      }\n\n      var attributeTable = getDebugTableForVertexArray({\n        vertexArray: vertexArray,\n        header: \"\".concat(this.id, \" attributes\"),\n        attributes: this._attributes\n      });\n\n      var _getDebugTableForUnif = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms)\n      }),\n          uniformTable = _getDebugTableForUnif.table,\n          unusedTable = _getDebugTableForUnif.unusedTable,\n          unusedCount = _getDebugTableForUnif.unusedCount; // log missing uniforms\n\n\n      var _getDebugTableForUnif2 = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms),\n        undefinedOnly: true\n      }),\n          missingTable = _getDebugTableForUnif2.table,\n          missingCount = _getDebugTableForUnif2.count;\n\n      if (missingCount > 0) {\n        log.log('MISSING UNIFORMS', Object.keys(missingTable))(); // log.table(priority, missingTable)();\n      }\n\n      if (unusedCount > 0) {\n        log.log('UNUSED UNIFORMS', Object.keys(unusedTable))(); // log.log(priority, 'Unused uniforms ', unusedTable)();\n      }\n\n      var configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n      log.table(priority, attributeTable)();\n      log.table(priority, uniformTable)();\n      log.table(priority + 1, configTable)();\n      logModel(this, uniforms);\n\n      if (framebuffer) {\n        framebuffer.log({\n          priority: LOG_DRAW_PRIORITY,\n          message: \"Rendered to \".concat(framebuffer.id)\n        });\n      }\n\n      log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n    }\n  }, {\n    key: \"vertexCount\",\n    get: function get() {\n      if (Number.isFinite(this.props.vertexCount)) {\n        return this.props.vertexCount;\n      }\n\n      return this.geometry && this.geometry.getVertexCount();\n    }\n  }, {\n    key: \"drawMode\",\n    get: function get() {\n      if (Number.isFinite(this.props.drawMode)) {\n        return this.props.drawMode;\n      }\n\n      return this.geometry && this.geometry.drawMode;\n    }\n  }]);\n\n  return Model;\n}(Object3D);\n\nexport { Model as default };","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n/* global OffscreenCanvas */\n\nimport { createGLContext, resizeGLContext, resetParameters } from '../webgl-context';\nimport { getPageLoadPromise } from '../webgl-context';\nimport { makeDebugContext } from '../webgl-context/debug-context';\nimport { isWebGL, requestAnimationFrame, cancelAnimationFrame } from '../webgl-utils';\nimport { log } from '../utils';\nimport assert from '../utils/assert'; // TODO - remove dependency on webgl classes\n\nimport { Framebuffer } from '../webgl';\nvar DEFAULT_GL_OPTIONS = {\n  preserveDrawingBuffer: true\n};\n\nvar AnimationLoop = /*#__PURE__*/function () {\n  /*\n   * @param {HTMLCanvasElement} canvas - if provided, width and height will be passed to context\n   */\n  function AnimationLoop() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnimationLoop);\n\n    var _props$onCreateContex = props.onCreateContext,\n        onCreateContext = _props$onCreateContex === void 0 ? function (opts) {\n      return createGLContext(opts);\n    } : _props$onCreateContex,\n        _props$onAddHTML = props.onAddHTML,\n        onAddHTML = _props$onAddHTML === void 0 ? null : _props$onAddHTML,\n        _props$onInitialize = props.onInitialize,\n        onInitialize = _props$onInitialize === void 0 ? function () {} : _props$onInitialize,\n        _props$onRender = props.onRender,\n        onRender = _props$onRender === void 0 ? function () {} : _props$onRender,\n        _props$onFinalize = props.onFinalize,\n        onFinalize = _props$onFinalize === void 0 ? function () {} : _props$onFinalize,\n        _props$gl = props.gl,\n        gl = _props$gl === void 0 ? null : _props$gl,\n        _props$glOptions = props.glOptions,\n        glOptions = _props$glOptions === void 0 ? {} : _props$glOptions,\n        _props$debug = props.debug,\n        debug = _props$debug === void 0 ? false : _props$debug,\n        _props$createFramebuf = props.createFramebuffer,\n        createFramebuffer = _props$createFramebuf === void 0 ? false : _props$createFramebuf,\n        _props$autoResizeView = props.autoResizeViewport,\n        autoResizeViewport = _props$autoResizeView === void 0 ? true : _props$autoResizeView,\n        _props$autoResizeDraw = props.autoResizeDrawingBuffer,\n        autoResizeDrawingBuffer = _props$autoResizeDraw === void 0 ? true : _props$autoResizeDraw;\n    var _props$useDevicePixel = props.useDevicePixels,\n        useDevicePixels = _props$useDevicePixel === void 0 ? true : _props$useDevicePixel;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext: onCreateContext,\n      onAddHTML: onAddHTML,\n      onInitialize: onInitialize,\n      onRender: onRender,\n      onFinalize: onFinalize,\n      gl: gl,\n      glOptions: glOptions,\n      debug: debug,\n      createFramebuffer: createFramebuffer\n    }; // state\n\n    this.gl = gl;\n    this.needsRedraw = null;\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._startPromise = null;\n    this.setProps({\n      autoResizeViewport: autoResizeViewport,\n      autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n      useDevicePixels: useDevicePixels\n    }); // Bind methods\n\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n    return this;\n  }\n\n  _createClass(AnimationLoop, [{\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      assert(typeof reason === 'string');\n      this.needsRedraw = this.needsRedraw || reason;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('autoResizeViewport' in props) {\n        this.autoResizeViewport = props.autoResizeViewport;\n      }\n\n      if ('autoResizeDrawingBuffer' in props) {\n        this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      }\n\n      if ('useDevicePixels' in props) {\n        this.useDevicePixels = props.useDevicePixels;\n      }\n\n      return this;\n    } // Starts a render loop if not already running\n    // @param {Object} context - contains frame specific info (E.g. tick, width, height, etc)\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._running) {\n        return this;\n      }\n\n      this._running = true; // console.debug(`Starting ${this.constructor.name}`);\n      // Wait for start promise before rendering frame\n\n      this._startPromise = getPageLoadPromise().then(function () {\n        if (!_this._running || _this._initialized) {\n          return null;\n        } // Create the WebGL context\n\n\n        _this._createWebGLContext(opts);\n\n        _this._createFramebuffer();\n\n        _this._startEventHandling(); // Initialize the callback data\n\n\n        _this._initializeCallbackData();\n\n        _this._updateCallbackData(); // Default viewport setup, in case onInitialize wants to render\n\n\n        _this._resizeCanvasDrawingBuffer();\n\n        _this._resizeViewport(); // Note: onIntialize can return a promise (in case it needs to load resources)\n\n\n        var initializationPromise = _this.onInitialize(_this.animationProps);\n\n        _this._initialized = true;\n        return initializationPromise;\n      }).then(function (appContext) {\n        if (_this._running) {\n          _this._addCallbackData(appContext || {});\n\n          if (appContext !== false) {\n            _this._startLoop();\n          }\n        }\n      });\n      return this;\n    } // Redraw now\n\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      this._setupFrame();\n\n      this._updateCallbackData(); // call callback\n\n\n      this.onRender(this.animationProps); // end callback\n      // clear needsRedraw flag\n\n      this._clearNeedsRedraw(); // https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/commit\n      // Chrome's offscreen canvas does not require gl.commit\n\n\n      if (this.offScreen && this.gl.commit) {\n        this.gl.commit();\n      }\n\n      return this;\n    } // Stops a render loop if already running, finalizing\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      // console.debug(`Stopping ${this.constructor.name}`);\n      if (this._running) {\n        this._finalizeCallbackData();\n\n        cancelAnimationFrame(this._animationFrameId);\n        this._animationFrameId = null;\n        this._running = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"onCreateContext\",\n    value: function onCreateContext() {\n      var _this$props;\n\n      return (_this$props = this.props).onCreateContext.apply(_this$props, arguments);\n    }\n  }, {\n    key: \"onInitialize\",\n    value: function onInitialize() {\n      var _this$props2;\n\n      return (_this$props2 = this.props).onInitialize.apply(_this$props2, arguments);\n    }\n  }, {\n    key: \"onRender\",\n    value: function onRender() {\n      var _this$props3;\n\n      return (_this$props3 = this.props).onRender.apply(_this$props3, arguments);\n    }\n  }, {\n    key: \"onFinalize\",\n    value: function onFinalize() {\n      var _this$props4;\n\n      return (_this$props4 = this.props).onFinalize.apply(_this$props4, arguments);\n    } // DEPRECATED/REMOVED METHODS\n\n  }, {\n    key: \"getHTMLControlValue\",\n    value: function getHTMLControlValue(id) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var element = document.getElementById(id);\n      return element ? Number(element.value) : defaultValue;\n    } // Update parameters\n\n  }, {\n    key: \"setViewParameters\",\n    value: function setViewParameters() {\n      log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n      return this;\n    } // PRIVATE METHODS\n\n  }, {\n    key: \"_startLoop\",\n    value: function _startLoop() {\n      var _this2 = this;\n\n      var renderFrame = function renderFrame() {\n        if (!_this2._running) {\n          return;\n        }\n\n        _this2.redraw();\n\n        _this2._animationFrameId = requestAnimationFrame(renderFrame);\n      }; // cancel any pending renders to ensure only one loop can ever run\n\n\n      cancelAnimationFrame(this._animationFrameId);\n      this._animationFrameId = requestAnimationFrame(renderFrame);\n    }\n  }, {\n    key: \"_clearNeedsRedraw\",\n    value: function _clearNeedsRedraw() {\n      this.needsRedraw = null;\n    }\n  }, {\n    key: \"_setupFrame\",\n    value: function _setupFrame() {\n      if (this._onSetupFrame) {\n        // call callback\n        this._onSetupFrame(this.animationProps); // end callback\n\n      } else {\n        this._resizeCanvasDrawingBuffer();\n\n        this._resizeViewport();\n\n        this._resizeFramebuffer();\n      }\n    } // Initialize the  object that will be passed to app callbacks\n\n  }, {\n    key: \"_initializeCallbackData\",\n    value: function _initializeCallbackData() {\n      this.animationProps = {\n        gl: this.gl,\n        stop: this.stop,\n        canvas: this.gl.canvas,\n        framebuffer: this.framebuffer,\n        // Initial values\n        useDevicePixels: this.useDevicePixels,\n        needsRedraw: null,\n        // Animation props\n        startTime: Date.now(),\n        time: 0,\n        tick: 0,\n        tock: 0,\n        // canvas\n        // Experimental\n        _loop: this,\n        _animationLoop: this,\n        _mousePosition: null // Event props\n\n      };\n    } // Update the context object that will be passed to app callbacks\n\n  }, {\n    key: \"_updateCallbackData\",\n    value: function _updateCallbackData() {\n      var _this$_getSizeAndAspe = this._getSizeAndAspect(),\n          width = _this$_getSizeAndAspe.width,\n          height = _this$_getSizeAndAspe.height,\n          aspect = _this$_getSizeAndAspe.aspect;\n\n      if (width !== this.animationProps.width || height !== this.animationProps.height) {\n        this.setNeedsRedraw('drawing buffer resized');\n      }\n\n      if (aspect !== this.animationProps.aspect) {\n        this.setNeedsRedraw('drawing buffer aspect changed');\n      }\n\n      this.animationProps.width = width;\n      this.animationProps.height = height;\n      this.animationProps.aspect = aspect;\n      this.animationProps.needsRedraw = this.needsRedraw; // Increment tick\n\n      this.animationProps.time = Date.now() - this.animationProps.startTime;\n      this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n      this.animationProps.tock++; // experimental\n\n      this.animationProps._offScreen = this.offScreen;\n    }\n  }, {\n    key: \"_finalizeCallbackData\",\n    value: function _finalizeCallbackData() {\n      // call callback\n      this.onFinalize(this.animationProps); // end callback\n    } // Add application's data to the app context object\n\n  }, {\n    key: \"_addCallbackData\",\n    value: function _addCallbackData(appContext) {\n      if (_typeof(appContext) === 'object' && appContext !== null) {\n        this.animationProps = Object.assign({}, this.animationProps, appContext);\n      }\n    } // Either uses supplied or existing context, or calls provided callback to create one\n\n  }, {\n    key: \"_createWebGLContext\",\n    value: function _createWebGLContext(opts) {\n      this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas; // Create the WebGL context if necessary\n\n      opts = Object.assign({}, opts, DEFAULT_GL_OPTIONS, this.props.glOptions);\n      this.gl = this.props.gl || this.onCreateContext(opts);\n\n      if (!isWebGL(this.gl)) {\n        throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n      }\n\n      if (this.props.debug) {\n        this.gl = makeDebugContext(this.gl);\n      } // Reset the WebGL context.\n\n\n      resetParameters(this.gl);\n\n      this._createInfoDiv();\n    }\n  }, {\n    key: \"_createInfoDiv\",\n    value: function _createInfoDiv() {\n      if (this.gl.canvas && this.props.onAddHTML) {\n        /* global document */\n        var wrapperDiv = document.createElement('div');\n        document.body.appendChild(wrapperDiv);\n        wrapperDiv.style.position = 'relative';\n        var div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.left = '10px';\n        div.style.bottom = '10px';\n        div.style.width = '300px';\n        div.style.background = 'white';\n        wrapperDiv.appendChild(this.gl.canvas);\n        wrapperDiv.appendChild(div);\n        var html = this.props.onAddHTML(div);\n\n        if (html) {\n          div.innerHTML = html;\n        }\n      }\n    }\n  }, {\n    key: \"_getSizeAndAspect\",\n    value: function _getSizeAndAspect() {\n      // https://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html\n      var width = this.gl.drawingBufferWidth;\n      var height = this.gl.drawingBufferHeight; // https://webglfundamentals.org/webgl/lessons/webgl-anti-patterns.html\n\n      var aspect = 1;\n      var _this$gl$canvas = this.gl.canvas,\n          clientWidth = _this$gl$canvas.clientWidth,\n          clientHeight = _this$gl$canvas.clientHeight;\n\n      if (clientWidth >= 0 && clientHeight >= 0) {\n        aspect = height > 0 ? clientWidth / clientHeight : 1;\n      } else if (width > 0 && height > 0) {\n        aspect = width / height;\n      }\n\n      return {\n        width: width,\n        height: height,\n        aspect: aspect\n      };\n    } // Default viewport setup\n\n  }, {\n    key: \"_resizeViewport\",\n    value: function _resizeViewport() {\n      if (this.autoResizeViewport) {\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n      }\n    } // Resize the render buffer of the canvas to match canvas client size\n    // Optionally multiplying with devicePixel ratio\n\n  }, {\n    key: \"_resizeCanvasDrawingBuffer\",\n    value: function _resizeCanvasDrawingBuffer() {\n      if (this.autoResizeDrawingBuffer) {\n        resizeGLContext(this.gl, {\n          useDevicePixels: this.useDevicePixels\n        });\n      }\n    } // TBD - deprecated?\n\n  }, {\n    key: \"_createFramebuffer\",\n    value: function _createFramebuffer() {\n      // Setup default framebuffer\n      if (this.props.createFramebuffer) {\n        this.framebuffer = new Framebuffer(this.gl);\n      }\n    }\n  }, {\n    key: \"_resizeFramebuffer\",\n    value: function _resizeFramebuffer() {\n      if (this.framebuffer) {\n        this.framebuffer.resize({\n          width: this.gl.drawingBufferWidth,\n          height: this.gl.drawingBufferHeight\n        });\n      }\n    } // Event handling\n\n  }, {\n    key: \"_startEventHandling\",\n    value: function _startEventHandling() {\n      this.gl.canvas.addEventListener('mousemove', this._onMousemove);\n      this.gl.canvas.addEventListener('mouseleave', this._onMouseleave);\n    }\n  }, {\n    key: \"_onMousemove\",\n    value: function _onMousemove(e) {\n      this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n    }\n  }, {\n    key: \"_onMouseleave\",\n    value: function _onMouseleave(e) {\n      this.animationProps._mousePosition = null;\n    }\n  }]);\n\n  return AnimationLoop;\n}();\n\nexport { AnimationLoop as default };","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar NULL_PICKING_COLOR = new Uint8Array([0, 0, 0]); // Encodes an index as a Uint8Array([r, g, b]) format picking color\n\nexport function encodePickingColor(i) {\n  return [i + 1 & 255, i + 1 >> 8 & 255, i + 1 >> 16 & 255];\n} // Decodes a picking color in [r, g, b] format to an index\n\nexport function decodePickingColor(color) {\n  // assert(color instanceof Uint8Array);\n  var _color = _slicedToArray(color, 3),\n      i1 = _color[0],\n      i2 = _color[1],\n      i3 = _color[2]; // 1 was added to seperate from no selection\n\n\n  var index = i1 + i2 * 256 + i3 * 65536 - 1;\n  return index;\n} // Return picking color representing no item at that pixel\n\nexport function getNullPickingColor() {\n  return NULL_PICKING_COLOR;\n}","import assert from 'assert';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '../shadertools/src';\nvar SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nvar SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nvar VS_POS_VARIABLE = 'transform_position'; // Scan provided vertex shader\n// for each texture attribute, inject sampler instructions and build uniforms for sampler\n// for texture target, get varying type and inject position instruction\n\nexport function updateForTextures(_ref) {\n  var vs = _ref.vs,\n      sourceTextureMap = _ref.sourceTextureMap,\n      targetTextureVarying = _ref.targetTextureVarying,\n      targetTexture = _ref.targetTexture;\n  var texAttributeNames = Object.keys(sourceTextureMap);\n  var sourceCount = texAttributeNames.length;\n  var targetTextureType = null;\n  var samplerTextureMap = {};\n  var updatedVs = vs;\n  var finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    var vsLines = updatedVs.split('\\n');\n    var updateVsLines = vsLines.slice();\n    vsLines.forEach(function (line, index, lines) {\n      // TODO add early exit\n      if (sourceCount > 0) {\n        var updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          var updatedLine = updated.updatedLine,\n              inject = updated.inject;\n          updateVsLines[index] = updatedLine; // sampleInstructions.push(sampleInstruction);\n\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      var uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      var posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      var inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    // updated vertex shader (commented texture attribute definition)\n    vs: updatedVs,\n    // type (float, vec2, vec3 of vec4) target texture varying\n    targetTextureType: targetTextureType,\n    // required vertex and fragment shader injects\n    inject: finalInject,\n    // map of sampler name to texture name, can be used to set attributes\n    // usefull when swapping textures, as source and destination texture change when swap is called.\n    samplerTextureMap: samplerTextureMap\n  };\n} // builds and returns an object contaning size uniform for each texture\n\nexport function getSizeUniforms(_ref2) {\n  var sourceTextureMap = _ref2.sourceTextureMap,\n      targetTextureVarying = _ref2.targetTextureVarying,\n      targetTexture = _ref2.targetTexture;\n  var uniforms = {};\n  var width;\n  var height;\n\n  if (targetTextureVarying) {\n    width = targetTexture.width;\n    height = targetTexture.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (var textureName in sourceTextureMap) {\n    var _sourceTextureMap$tex = sourceTextureMap[textureName];\n    width = _sourceTextureMap$tex.width;\n    height = _sourceTextureMap$tex.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n} // Checks if provided line is defining an attribute, if so returns details otherwise null\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  var samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  var uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName: samplerName,\n    sizeName: sizeName,\n    uniformDeclerations: uniformDeclerations\n  };\n} // Return size (float, vec2 etc) of a given varying, null if doens't exist.\n\n\nexport function getVaryingType(line, varying) {\n  var qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n} // build required definitions, sample instructions for each texture attribute\n\nexport function processAttributeDefinition(line, textureMap) {\n  var samplerTextureMap = {};\n  var attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  var type = attributeData.type,\n      name = attributeData.name;\n\n  if (name && textureMap[name]) {\n    var updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n\n    var _getSamplerDecleratio = getSamplerDeclerations(name),\n        samplerName = _getSamplerDecleratio.samplerName,\n        sizeName = _getSamplerDecleratio.sizeName,\n        uniformDeclerations = _getSamplerDecleratio.uniformDeclerations;\n\n    var channels = typeToChannelSuffix(type);\n    var sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    var inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    }; // samplerNameMap\n\n    return {\n      // update vertex shader line.\n      updatedLine: updatedLine,\n      // inject object with sampler instructions.\n      inject: inject,\n      // sampler name to texture name map\n      samplerTextureMap: samplerTextureMap\n    };\n  }\n\n  return null;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SRC_TEX_PARAMETER_OV;\n\nimport Model from './model';\nimport Buffer from '../webgl/buffer';\nimport Framebuffer from '../webgl/framebuffer';\nimport Texture2D from '../webgl/texture-2d';\nimport TransformFeedback from '../webgl/transform-feedback';\nimport { combineInjects } from '../shadertools/src/lib/inject-shader';\nimport { _transform as transform, getPassthroughFS, typeToChannelCount } from '../shadertools/src';\nimport { isWebGL2, assertWebGL2Context, getShaderVersion, cloneTextureFrom } from '../webgl-utils';\nimport assert from '../utils/assert';\nimport { log, isObjectEmpty } from '../utils';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils'; // Texture parameters needed so sample can precisely pick pixel for given element id.\n\nvar SRC_TEX_PARAMETER_OVERRIDES = (_SRC_TEX_PARAMETER_OV = {}, _defineProperty(_SRC_TEX_PARAMETER_OV, 10241, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10240, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10242, 33071), _defineProperty(_SRC_TEX_PARAMETER_OV, 10243, 33071), _SRC_TEX_PARAMETER_OV);\nvar FS_OUTPUT_VARIABLE = 'transform_output';\n\nvar Transform = /*#__PURE__*/function () {\n  _createClass(Transform, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      // For now WebGL2 only\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Transform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Transform);\n\n    assertWebGL2Context(gl);\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.currentIndex = 0; // Source and destination resources are stored in two element Arrays for easier swapping when\n    // 'feedbackMap' is provided. If not only the first array elment is used.\n    // Each array element is an object with attribute name as Key and Buffer object as value.\n\n    this.sourceBuffers = new Array(2); // Each array element is an object with attribute name as Key and Texture object as value.\n\n    this.sourceTextures = new Array(2); // Each array element is an object with varying name as Key and Buffer object as value.\n\n    this.feedbackBuffers = new Array(2); // Each array element is a Texture object used as color attachment for framebuffer.\n\n    this.targetTextures = new Array(2); // Each array element is a TransformFeedback object.\n\n    this.transformFeedbacks = new Array(2); // Each array element is a Framebuffer object.\n\n    this.framebuffers = new Array(2);\n    this._createdBuffers = {};\n    this.elementIDBuffer = null; // reference source texture name for target texture\n\n    this._targetRefTexName = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  } // Delete owned resources.\n\n\n  _createClass(Transform, [{\n    key: \"delete\",\n    value: function _delete() {\n      for (var name in this._createdBuffers) {\n        this._createdBuffers[name].delete();\n      }\n\n      this.model.delete();\n    } // Return Buffer object for given varying name.\n\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      var varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var bufferOrParams = varyingName ? this.feedbackBuffers[this.currentIndex][varyingName] : null;\n\n      if (!bufferOrParams) {\n        return null;\n      }\n\n      return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n    } // Returns the color attachment textuer from current framebuffer target\n\n  }, {\n    key: \"_getTargetTexture\",\n    value: function _getTargetTexture() {\n      if (this.framebuffers[this.currentIndex]) {\n        return this.framebuffers[this.currentIndex].attachments[36064];\n      }\n\n      return null;\n    } // Return data either from Buffer or from Texture\n\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$varyingName = _ref.varyingName,\n          varyingName = _ref$varyingName === void 0 ? null : _ref$varyingName,\n          _ref$packed = _ref.packed,\n          packed = _ref$packed === void 0 ? false : _ref$packed; // Either there should be specified feedbackBuffer or we should be rendering to a texture\n\n\n      var buffer = this.getBuffer(varyingName);\n\n      if (buffer) {\n        return buffer.getData();\n      } // When varyingName is not provided return data from framebuffer object.\n\n\n      assert(!varyingName || varyingName === this.targetTextureVarying);\n      var pixels = this.framebuffers[this.currentIndex].readPixels();\n\n      if (!packed) {\n        return pixels;\n      } // readPixels returns 4 elements for each pixel, pack the elements when requested\n\n\n      var ArrayType = pixels.constructor;\n      var channelCount = typeToChannelCount(this.targetTextureType);\n      var packedPixels = new ArrayType(pixels.length * channelCount / 4);\n      var packCount = 0;\n\n      for (var i = 0; i < pixels.length; i += 4) {\n        for (var j = 0; j < channelCount; j++) {\n          packedPixels[packCount++] = pixels[i + j];\n        }\n      }\n\n      return packedPixels;\n    } // returns current framebuffer object that is being used.\n\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      return this.framebuffers[this.currentIndex];\n    }\n  }, {\n    key: \"_getInputs\",\n    value: function _getInputs() {\n      var uniforms = {};\n      var current = this.currentIndex; // Buffer inputs\n\n      var attributes = Object.assign({}, this.sourceBuffers[current]); // Texture inputs\n\n      if (this.hasSourceTextures || this.targetTextureVarying) {\n        // TODO: add option not generate position using element id.\n        attributes.transform_elementID = this.elementIDBuffer;\n\n        for (var sampler in this.samplerTextureMap) {\n          var textureName = this.samplerTextureMap[sampler];\n          uniforms[sampler] = this.sourceTextures[current][textureName];\n        } // Also update size uniforms , add samplerSizeMap\n\n\n        this._setSourceTextureParameters(); // get texture size uniforms\n\n\n        var sizeUniforms = getSizeUniforms({\n          sourceTextureMap: this.sourceTextures[current],\n          targetTextureVarying: this.targetTextureVarying,\n          targetTexture: this.targetTextures[current]\n        });\n        Object.assign(uniforms, sizeUniforms);\n      }\n\n      return {\n        attributes: attributes,\n        uniforms: uniforms\n      };\n    } // Run one transform feedback loop.\n\n  }, {\n    key: \"run\",\n    value: function run() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var _this$_getInputs = this._getInputs(),\n          attributes = _this$_getInputs.attributes,\n          uniforms = _this$_getInputs.uniforms;\n\n      Object.assign(uniforms, opts.uniforms);\n      var parameters = Object.assign({}, opts.parameters);\n      var _opts$clearRenderTarg = opts.clearRenderTarget,\n          clearRenderTarget = _opts$clearRenderTarg === void 0 ? true : _opts$clearRenderTarg;\n      var framebuffer = null;\n      var discard = true;\n\n      if (this.renderingToTexture) {\n        discard = false;\n        framebuffer = this.framebuffers[this.currentIndex];\n        assert(framebuffer);\n        parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n\n        if (clearRenderTarget) {\n          this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n        }\n      }\n\n      this.model.setAttributes(attributes);\n      this.model.transform(Object.assign({}, opts, {\n        transformFeedback: this.transformFeedbacks[this.currentIndex],\n        uniforms: uniforms,\n        discard: discard,\n        framebuffer: framebuffer,\n        parameters: parameters\n      }));\n    } // Swap source and destination buffers and textures.\n\n  }, {\n    key: \"swapBuffers\",\n    value: function swapBuffers() {\n      log.deprecated('swapBuffers()', 'swap()');\n      this.swap();\n    } // Swap source and destination buffers and textures.\n\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      assert(this.feedbackMap || this._swapTexture);\n      this.currentIndex = (this.currentIndex + 1) % 2;\n    } // Update some or all buffer bindings.\n\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (opts.elementCount) {\n        this._setElementCount(opts.elementCount);\n      }\n\n      var _opts$sourceBuffers = opts.sourceBuffers,\n          sourceBuffers = _opts$sourceBuffers === void 0 ? null : _opts$sourceBuffers,\n          _opts$feedbackBuffers = opts.feedbackBuffers,\n          feedbackBuffers = _opts$feedbackBuffers === void 0 ? null : _opts$feedbackBuffers;\n      var currentIndex = this.currentIndex;\n\n      if (sourceBuffers || feedbackBuffers) {\n        for (var bufferName in feedbackBuffers) {\n          assert(feedbackBuffers[bufferName] instanceof Buffer || feedbackBuffers[bufferName].buffer instanceof Buffer);\n        }\n\n        Object.assign(this.sourceBuffers[currentIndex], sourceBuffers);\n        Object.assign(this.feedbackBuffers[currentIndex], feedbackBuffers);\n\n        this._createFeedbackBuffers({\n          feedbackBuffers: feedbackBuffers\n        });\n\n        if (this.transformFeedbacks[currentIndex]) {\n          this.transformFeedbacks[currentIndex].setBuffers(this.feedbackBuffers[currentIndex]);\n        } // Buffers have changed, need to re-setup swap buffers.\n\n\n        this._setupSwapBuffers();\n      }\n\n      var _sourceTextures = opts._sourceTextures,\n          _targetTexture = opts._targetTexture;\n\n      if (_sourceTextures || _targetTexture) {\n        Object.assign(this.sourceTextures[currentIndex], _sourceTextures); // if _targetTexture specified use it, other wise rebuild traget texture using\n        // '_targetRefTexName' as coresponding source texture may have been update.\n\n        this._updateTargetTexture(_targetTexture || this._targetRefTexName, currentIndex); // textures have changed, need to re-setup swap textures.\n\n\n        this._setupSwapTextures();\n      }\n    } // set texture filtering parameters on source textures.\n\n  }, {\n    key: \"_setSourceTextureParameters\",\n    value: function _setSourceTextureParameters() {\n      var index = this.currentIndex;\n\n      for (var name in this.sourceTextures[index]) {\n        this.sourceTextures[index][name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n      }\n    } // set element count and updated elementID buffer if needed.\n\n  }, {\n    key: \"_setElementCount\",\n    value: function _setElementCount(elementCount) {\n      if (this.elementCount === elementCount) {\n        return;\n      }\n\n      if (this.elementCount < elementCount) {\n        this._updateElementIDBuffer(elementCount);\n      }\n\n      this.model.setVertexCount(elementCount);\n      this.elementCount = elementCount;\n    } // sets target texture for rendering by updating framebuffer\n\n  }, {\n    key: \"_updateTargetTexture\",\n    value: function _updateTargetTexture(texture, index) {\n      var targetTexture = this._buildTargetTexture(texture);\n\n      if (targetTexture) {\n        this.targetTextures[index] = targetTexture;\n\n        if (this.framebuffers[index]) {\n          // First update texture without re-sizing attachments\n          this.framebuffers[index].update({\n            attachments: _defineProperty({}, 36064, this.targetTextures[index]),\n            resizeAttachments: false\n          }); // Resize to new taget texture size\n\n          this.framebuffers[index].resize({\n            width: targetTexture.width,\n            height: targetTexture.height\n          });\n        }\n      }\n    } // Private\n\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var _this$_validateProps = this._validateProps(props),\n          feedbackBuffers = _this$_validateProps.feedbackBuffers,\n          feedbackMap = _this$_validateProps.feedbackMap;\n\n      var sourceBuffers = props.sourceBuffers,\n          varyings = props.varyings,\n          _targetTexture = props._targetTexture,\n          _targetTextureVarying = props._targetTextureVarying,\n          _swapTexture = props._swapTexture;\n      var varyingsArray = varyings;\n\n      if (feedbackMap && !Array.isArray(varyings)) {\n        varyingsArray = Object.values(feedbackMap);\n      }\n\n      this.varyingsArray = varyingsArray;\n      this.feedbackMap = feedbackMap;\n      this._swapTexture = _swapTexture;\n\n      if (_targetTexture) {\n        this.targetTextureVarying = _targetTextureVarying;\n        this.renderingToTexture = true;\n        assert(this.targetTextureVarying);\n      }\n\n      this._setupBuffers({\n        sourceBuffers: sourceBuffers,\n        feedbackBuffers: feedbackBuffers\n      });\n\n      this._setupTextures(props);\n\n      this._setupSwapBuffers();\n\n      this._setupSwapTextures();\n\n      this._buildModel(Object.assign({}, props, {\n        id: props.id || 'transform-model',\n        drawMode: props.drawMode || 0,\n        varyings: varyingsArray\n      }));\n    } // assert on required parameters\n\n    /* eslint-disable complexity */\n\n  }, {\n    key: \"_validateProps\",\n    value: function _validateProps(props) {\n      var feedbackBuffers = props.feedbackBuffers,\n          feedbackMap = props.feedbackMap; // backward compitability\n\n      var destinationBuffers = props.destinationBuffers,\n          sourceDestinationMap = props.sourceDestinationMap;\n\n      if (destinationBuffers) {\n        log.deprecated('destinationBuffers', 'feedbackBuffers')();\n        feedbackBuffers = feedbackBuffers || destinationBuffers;\n      }\n\n      if (sourceDestinationMap) {\n        log.deprecated('sourceDestinationMap', 'feedbackMap')();\n        feedbackMap = feedbackMap || sourceDestinationMap;\n      } // assert on required parameters\n\n\n      var vs = props.vs,\n          elementCount = props.elementCount,\n          varyings = props.varyings;\n      var _sourceTextures = props._sourceTextures,\n          _targetTexture = props._targetTexture,\n          _targetTextureVarying = props._targetTextureVarying,\n          _swapTexture = props._swapTexture;\n      assert(vs && ( // destinations are provided\n      varyings || feedbackMap || _targetTexture) && // when only writting to textures auto-duduce from texture dimenstions\n      elementCount);\n\n      for (var bufferName in feedbackBuffers || {}) {\n        assert(feedbackBuffers[bufferName] instanceof Buffer || feedbackBuffers[bufferName].buffer instanceof Buffer);\n      }\n\n      for (var textureName in _sourceTextures || {}) {\n        assert(_sourceTextures[textureName] instanceof Texture2D);\n      } // If rendering to texture , varying is provided\n\n\n      assert(!_targetTexture || _targetTextureVarying); // swap texture must be a valid source texture\n\n      assert(!_swapTexture || _sourceTextures[_swapTexture]);\n      return {\n        feedbackBuffers: feedbackBuffers,\n        feedbackMap: feedbackMap\n      };\n    }\n    /* eslint-enable complexity */\n    // setup source and destination buffers\n\n  }, {\n    key: \"_setupBuffers\",\n    value: function _setupBuffers(_ref2) {\n      var _ref2$sourceBuffers = _ref2.sourceBuffers,\n          sourceBuffers = _ref2$sourceBuffers === void 0 ? null : _ref2$sourceBuffers,\n          _ref2$feedbackBuffers = _ref2.feedbackBuffers,\n          feedbackBuffers = _ref2$feedbackBuffers === void 0 ? null : _ref2$feedbackBuffers;\n      this.sourceBuffers[0] = Object.assign({}, sourceBuffers);\n      this.feedbackBuffers[0] = Object.assign({}, feedbackBuffers);\n\n      this._createFeedbackBuffers({\n        feedbackBuffers: feedbackBuffers\n      });\n\n      this.sourceBuffers[1] = {};\n      this.feedbackBuffers[1] = {};\n    } // setup source and destination textures\n\n  }, {\n    key: \"_setupTextures\",\n    value: function _setupTextures() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _sourceTextures = props._sourceTextures,\n          _targetTexture = props._targetTexture; // Setup source texture\n\n      this.sourceTextures[0] = Object.assign({}, _sourceTextures);\n      this.sourceTextures[1] = {};\n      this.hasSourceTextures = Object.keys(this.sourceTextures[0]).length > 0;\n\n      if (this.targetTextureVarying) {\n        var texture = this._buildTargetTexture(_targetTexture); // Either a texture or refAttribute must be provided\n\n\n        assert(texture);\n        this.targetTextures[0] = texture;\n        this.targetTextures[1] = null;\n      }\n    } // Builds target texture using source reference or provided texture object.\n\n  }, {\n    key: \"_buildTargetTexture\",\n    value: function _buildTargetTexture(textureOrAttribute) {\n      var _parameters;\n\n      if (textureOrAttribute instanceof Texture2D) {\n        return textureOrAttribute;\n      }\n\n      var refTexture = this.sourceTextures[0][textureOrAttribute];\n\n      if (!refTexture) {\n        return null;\n      } // save reference texture name, when corresponding source texture is updated\n      // we also update target texture.\n\n\n      this._targetRefTexName = textureOrAttribute;\n      return cloneTextureFrom(refTexture, {\n        parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9728), _defineProperty(_parameters, 10240, 9728), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters),\n        pixelStore: _defineProperty({}, 37440, false)\n      });\n    } // auto create any feedback buffers\n\n  }, {\n    key: \"_createFeedbackBuffers\",\n    value: function _createFeedbackBuffers(_ref3) {\n      var feedbackBuffers = _ref3.feedbackBuffers;\n\n      if (!this.feedbackMap) {\n        // feedbackMap required to auto create buffers.\n        return;\n      }\n\n      var current = this.currentIndex;\n\n      for (var sourceBufferName in this.feedbackMap) {\n        var feedbackBufferName = this.feedbackMap[sourceBufferName];\n\n        if (feedbackBufferName !== this.targetTextureVarying && (!feedbackBuffers || !feedbackBuffers[feedbackBufferName])) {\n          // Create new buffer with same layout and settings as source buffer\n          var sourceBuffer = this.sourceBuffers[current][sourceBufferName];\n          var bytes = sourceBuffer.bytes,\n              type = sourceBuffer.type,\n              usage = sourceBuffer.usage,\n              accessor = sourceBuffer.accessor;\n          var buffer = new Buffer(this.gl, {\n            bytes: bytes,\n            type: type,\n            usage: usage,\n            accessor: accessor\n          });\n\n          if (this._createdBuffers[feedbackBufferName]) {\n            this._createdBuffers[feedbackBufferName].delete();\n          }\n\n          this._createdBuffers[feedbackBufferName] = buffer;\n          this.feedbackBuffers[current][feedbackBufferName] = buffer;\n        }\n      }\n    } // Create a buffer and add to list of buffers to be deleted.\n\n  }, {\n    key: \"_createNewBuffer\",\n    value: function _createNewBuffer(name, opts) {\n      var buffer = new Buffer(this.gl, opts);\n\n      if (this._createdBuffers[name]) {\n        this._createdBuffers[name].delete();\n\n        this._createdBuffers[name] = buffer;\n      }\n\n      return buffer;\n    } // setup buffers for swapping.\n    // Second set of source and feedback objects are setup to point\n    // to corresponding feedback and source buffers.\n\n  }, {\n    key: \"_setupSwapBuffers\",\n    value: function _setupSwapBuffers() {\n      if (!this.feedbackMap) {\n        // feedbackMap required set up swap buffers.\n        return;\n      }\n\n      var current = this.currentIndex;\n      var next = (current + 1) % 2; // Copy all buffers/textures so un-mapped sources will remain same\n\n      Object.assign(this.sourceBuffers[next], this.sourceBuffers[current]);\n      Object.assign(this.feedbackBuffers[next], this.feedbackBuffers[current]);\n\n      for (var srcName in this.feedbackMap) {\n        var dstName = this.feedbackMap[srcName]; // TODO: add textureMap and remove this if loop\n\n        if (dstName !== this.targetTextureVarying) {\n          this.sourceBuffers[next][srcName] = this.feedbackBuffers[current][dstName];\n          this.feedbackBuffers[next][dstName] = this.sourceBuffers[current][srcName]; // make sure the new destination buffer is a Buffer object\n\n          assert(this.feedbackBuffers[next][dstName] instanceof Buffer);\n        }\n      } // When triggered by `update()` TranformFeedback objects are already set up,\n      // if so update buffers\n\n\n      if (this.transformFeedbacks[next]) {\n        this.transformFeedbacks[next].setBuffers(this.feedbackBuffers[next]);\n      } // TODO: add swap support for targetTexture and framebuffers\n\n    } // setup textures for swapping.\n\n  }, {\n    key: \"_setupSwapTextures\",\n    value: function _setupSwapTextures() {\n      if (!this._swapTexture || !this.targetTextureVarying) {\n        // Must be rendering to a texture and _swapTexture is provided\n        return;\n      }\n\n      var current = this.currentIndex;\n      var next = (current + 1) % 2;\n      Object.assign(this.sourceTextures[next], this.sourceTextures[current]);\n      this.sourceTextures[next][this._swapTexture] = this.targetTextures[current];\n\n      this._updateTargetTexture(this.sourceTextures[current][this._swapTexture], next);\n    } // build Model and TransformFeedback objects\n\n  }, {\n    key: \"_buildModel\",\n    value: function _buildModel() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var _this$_getShaders = this._getShaders(props),\n          vs = _this$_getShaders.vs,\n          fs = _this$_getShaders.fs,\n          modules = _this$_getShaders.modules,\n          uniforms = _this$_getShaders.uniforms,\n          inject = _this$_getShaders.inject,\n          samplerTextureMap = _this$_getShaders.samplerTextureMap;\n\n      this.model = new Model(this.gl, Object.assign({}, props, {\n        vs: vs,\n        fs: fs,\n        vertexCount: props.elementCount,\n        modules: modules,\n        uniforms: uniforms,\n        inject: inject\n      }));\n      this.samplerTextureMap = samplerTextureMap; // setup TF to capture varyings.\n\n      this._setupTransformFeedback(); // setup Framebuffer object for rendering to Texture.\n\n\n      this._setupFramebuffers(); // create buffer to access source texture pixesl.\n\n\n      this._setElementCount(props.elementCount);\n    } // setup TransformFeedback objects to capture the results\n\n  }, {\n    key: \"_setupTransformFeedback\",\n    value: function _setupTransformFeedback() {\n      if (isObjectEmpty(this.feedbackBuffers[0])) {\n        return;\n      }\n\n      this.transformFeedbacks[0] = new TransformFeedback(this.gl, {\n        program: this.model.program,\n        buffers: this.feedbackBuffers[0]\n      }); // If buffers are swappable setup second transform feedback object.\n\n      if (this.feedbackMap) {\n        this.transformFeedbacks[1] = new TransformFeedback(this.gl, {\n          program: this.model.program,\n          buffers: this.feedbackBuffers[1]\n        });\n      }\n    } // setup framebuffers with texture attachments, to which results are rendered\n\n  }, {\n    key: \"_setupFramebuffers\",\n    value: function _setupFramebuffers() {\n      if (!this.renderingToTexture) {\n        return;\n      }\n\n      var _this$targetTextures$ = this.targetTextures[0],\n          width = _this$targetTextures$.width,\n          height = _this$targetTextures$.height;\n      this.framebuffers[0] = new Framebuffer(this.gl, {\n        id: \"\".concat(this.id || 'transform', \"-framebuffer-0\"),\n        width: width,\n        height: height,\n        attachments: _defineProperty({}, 36064, this.targetTextures[0])\n      });\n\n      if (this._swapTexture) {\n        var _this$targetTextures$2 = this.targetTextures[1];\n        width = _this$targetTextures$2.width;\n        height = _this$targetTextures$2.height;\n        this.framebuffers[1] = new Framebuffer(this.gl, {\n          id: \"\".concat(this.id || 'transform', \"-framebuffer-1\"),\n          width: width,\n          height: height,\n          attachments: _defineProperty({}, 36064, this.targetTextures[1])\n        });\n      }\n    } // create/update buffer to access source texture's individual pixels.\n\n  }, {\n    key: \"_updateElementIDBuffer\",\n    value: function _updateElementIDBuffer(elementCount) {\n      if (!this.hasSourceTextures && !this.targetTextureVarying) {\n        return;\n      } // NOTE: using float so this will work with GLSL 1.0 shaders.\n\n\n      var elementIds = new Float32Array(elementCount);\n      elementIds.forEach(function (_, index, array) {\n        array[index] = index;\n      });\n\n      if (!this.elementIDBuffer) {\n        this.elementIDBuffer = new Buffer(this.gl, {\n          data: elementIds,\n          size: 1\n        });\n      } else {\n        this.elementIDBuffer.setData({\n          data: elementIds\n        });\n      }\n    } // build and return shader releated parameters\n\n  }, {\n    key: \"_getShaders\",\n    value: function _getShaders() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var _this$_processVertexS = this._processVertexShader(props.vs),\n          vs = _this$_processVertexS.vs,\n          uniforms = _this$_processVertexS.uniforms,\n          targetTextureType = _this$_processVertexS.targetTextureType,\n          inject = _this$_processVertexS.inject,\n          samplerTextureMap = _this$_processVertexS.samplerTextureMap;\n\n      var combinedInject = combineInjects([props.inject || {}, inject]);\n      this.targetTextureType = targetTextureType;\n      var fs = getPassthroughFS({\n        version: getShaderVersion(vs),\n        input: this.targetTextureVarying,\n        inputType: targetTextureType,\n        output: FS_OUTPUT_VARIABLE\n      });\n      var modules = this.hasSourceTextures || this.targetTextureVarying ? [transform].concat(props.modules || []) : props.modules;\n      return {\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        uniforms: uniforms,\n        inject: combinedInject,\n        samplerTextureMap: samplerTextureMap\n      };\n    } // scan and update vertex shader for texture atrributes.\n\n  }, {\n    key: \"_processVertexShader\",\n    value: function _processVertexShader(vs) {\n      return updateForTextures({\n        vs: vs,\n        sourceTextureMap: this.sourceTextures[this.currentIndex],\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture: this.targetTextures[this.currentIndex]\n      });\n    }\n  }]);\n\n  return Transform;\n}();\n\nexport { Transform as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Geometry from './geometry';\nimport { uid } from '../utils';\n\nvar CubeGeometry = /*#__PURE__*/function (_Geometry) {\n  _inherits(CubeGeometry, _Geometry);\n\n  function CubeGeometry() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, CubeGeometry);\n\n    var _opts$id = opts.id,\n        id = _opts$id === void 0 ? uid('cube-geometry') : _opts$id;\n    return _possibleConstructorReturn(this, _getPrototypeOf(CubeGeometry).call(this, Object.assign({}, opts, {\n      id: id,\n      attributes: getCubeAttributes()\n    })));\n  }\n\n  return CubeGeometry;\n}(Geometry);\n/* eslint-disable no-multi-spaces, indent */\n\n\nexport { CubeGeometry as default };\nvar CUBE_INDICES = new Uint16Array([0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23]);\nvar CUBE_POSITIONS = new Float32Array([-1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, -1, -1, 1, -1, 1, 1, -1, 1, -1, -1, -1, 1, -1, -1, 1, 1, 1, 1, 1, 1, 1, -1, -1, -1, -1, 1, -1, -1, 1, -1, 1, -1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, -1, -1, -1, -1, -1, 1, -1, 1, 1, -1, 1, -1]);\nvar CUBE_NORMALS = new Float32Array([// Front face\n0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, // Back face\n0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, // Top face\n0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, // Bottom face\n0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, // Right face\n1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, // Left face\n-1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0]);\nvar CUBE_TEX_COORDS = new Float32Array([// Front face\n0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, // Back face\n1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, // Top face\n0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, // Bottom face\n1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, // Right face\n1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, // Left face\n0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0]);\n/* eslint-enable no-multi-spaces, indent */\n\nfunction getCubeAttributes() {\n  return {\n    indices: new Uint16Array(CUBE_INDICES),\n    positions: new Float32Array(CUBE_POSITIONS),\n    normals: new Float32Array(CUBE_NORMALS),\n    texCoords: new Float32Array(CUBE_TEX_COORDS)\n  };\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { ConeGeometry } from '../geometry';\nimport { Model } from '../core';\n\nvar Cone = /*#__PURE__*/function (_Model) {\n  _inherits(Cone, _Model);\n\n  function Cone(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Cone);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Cone).call(this, gl, Object.assign({}, opts, {\n      geometry: new ConeGeometry(opts)\n    })));\n  }\n\n  return Cone;\n}(Model);\n\nexport { Cone as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { CubeGeometry } from '../geometry';\nimport { Model } from '../core';\nimport { uid } from '../utils';\n\nvar Cube = /*#__PURE__*/function (_Model) {\n  _inherits(Cube, _Model);\n\n  function Cube(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Cube);\n\n    var _opts$id = opts.id,\n        id = _opts$id === void 0 ? uid('cube') : _opts$id;\n    return _possibleConstructorReturn(this, _getPrototypeOf(Cube).call(this, gl, Object.assign({}, opts, {\n      id: id,\n      geometry: new CubeGeometry(opts)\n    })));\n  }\n\n  return Cube;\n}(Model);\n\nexport { Cube as default };","// Export core modules for luma.gl\n// Initialize any global state\nrequire('./init'); // WebGL\n\n\nexport { isWebGL, isWebGL2 } from './webgl-utils/webgl-checks';\nexport { cloneTextureFrom } from './webgl-utils/texture-utils';\nexport { getKeyValue, getKey } from './webgl-utils/constants-to-keys';\nexport { createGLContext, destroyGLContext, resizeGLContext, pollGLContext, setContextDefaults } from './webgl-context/context';\nexport { trackContextState } from './webgl-context';\nexport { resetParameters, getParameter, getParameters, setParameter, setParameters, withParameters, getModifiedParameters } from './webgl-context/context-state';\nexport { getContextInfo, getGLContextInfo, getContextLimits, glGetDebugInfo } from './webgl-context/context-limits';\nexport { FEATURES, hasFeature, hasFeatures, getFeatures, canCompileGLGSExtension } from './webgl-context/context-features'; // WebGL1 classes\n\nexport { default as Buffer } from './webgl/buffer';\nexport { Shader, VertexShader, FragmentShader } from './webgl/shader';\nexport { default as Program } from './webgl/program';\nexport { default as Framebuffer } from './webgl/framebuffer';\nexport { default as Renderbuffer } from './webgl/renderbuffer';\nexport { default as Texture2D } from './webgl/texture-2d';\nexport { default as TextureCube } from './webgl/texture-cube';\nexport { clear, clearBuffer } from './webgl/clear'; // WebGL2 classes & Extensions\n\nexport { default as FenceSync } from './webgl/fence-sync';\nexport { default as Query } from './webgl/query';\nexport { default as Sampler } from './webgl/sampler';\nexport { default as Texture3D } from './webgl/texture-3d';\nexport { default as Texture2DArray } from './webgl/texture-2d-array';\nexport { default as TransformFeedback } from './webgl/transform-feedback';\nexport { default as VertexArrayObject } from './webgl/vertex-array-object';\nexport { default as VertexArray } from './webgl/vertex-array';\nexport { default as UniformBufferLayout } from './webgl/uniform-buffer-layout'; // experimental WebGL exports\n\nexport { default as _Accessor } from './webgl/accessor';\nexport { clearBuffer as _clearBuffer } from './webgl/clear'; // CORE\n\nexport { default as Object3D } from './core/object-3d';\nexport { default as Group } from './core/group';\nexport { default as Model } from './core/model';\nexport { default as AnimationLoop } from './core/animation-loop';\nexport { default as pickModels } from './core/pick-models';\nexport { encodePickingColor, decodePickingColor, getNullPickingColor } from './core/picking-colors'; // Experimental core exports\n\nexport { default as Transform } from './core/transform';\nexport { default as _Attribute } from './core/attribute';\nexport { default as _ShaderCache } from './core/shader-cache';\nexport { default as _AnimationLoopProxy } from './core/animation-loop-proxy'; // Multipass Rendering\n\nexport { default as _MultiPassRenderer } from './multipass/multi-pass-renderer';\nexport { default as _RenderState } from './multipass/render-state';\nexport { default as _Pass } from './multipass/pass';\nexport { default as _CompositePass } from './multipass/composite-pass';\nexport { default as _ClearPass } from './multipass/clear-pass';\nexport { default as _RenderPass } from './multipass/render-pass';\nexport { default as _CopyPass } from './multipass/copy-pass';\nexport { default as _TexturePass } from './multipass/texture-pass'; // export {default as _MaskPass} from './multipass/mask-pass';\n// export {default as _ClearMaskPass} from './multipass/clearmask-pass';\n\nexport { default as _PickingPass } from './multipass/picking-pass';\nexport { default as _ShaderModulePass } from './multipass/shader-module-pass';\nexport { default as _Canvas } from './multipass/canvas'; // Geometry\n\nexport { default as Geometry } from './geometry/geometry';\nexport { default as ConeGeometry } from './geometry/cone-geometry';\nexport { default as CubeGeometry } from './geometry/cube-geometry';\nexport { default as CylinderGeometry } from './geometry/cylinder-geometry';\nexport { default as IcoSphereGeometry } from './geometry/ico-sphere-geometry';\nexport { default as PlaneGeometry } from './geometry/plane-geometry';\nexport { default as SphereGeometry } from './geometry/sphere-geometry';\nexport { default as TruncatedConeGeometry } from './geometry/truncated-cone-geometry'; // Models\n\nexport { default as Cone } from './models/cone';\nexport { default as Cube } from './models/cube';\nexport { default as Cylinder } from './models/cylinder';\nexport { default as IcoSphere } from './models/ico-sphere';\nexport { default as Plane } from './models/plane';\nexport { default as Sphere } from './models/sphere';\nexport { default as TruncatedCone } from './models/truncated-cone';\nexport { default as ClipSpace } from './models/clip-space'; // IO\n\nexport { setPathPrefix, loadFile, loadImage, loadTexture, loadFiles, loadImages, loadTextures, loadProgram, loadModel, parseModel } from './io'; // shadertools\n\nexport { setDefaultShaderModules, registerShaderModules } from './shadertools/src/lib/resolve-modules';\nexport { assembleShaders } from './shadertools/src/lib/assemble-shaders';\nexport { normalizeShaderModule } from './shadertools/src/lib/filters/normalize-module'; // shader modules\n\nexport { default as fp32 } from './shadertools/src/modules/fp32/fp32';\nexport { default as fp64 } from './shadertools/src/modules/fp64/fp64';\nexport { default as project } from './shadertools/src/modules/project/project';\nexport { default as lighting } from './shadertools/src/modules/lighting/lighting';\nexport { default as dirlight } from './shadertools/src/modules/dirlight/dirlight';\nexport { default as picking } from './shadertools/src/modules/picking/picking';\nexport { default as diffuse } from './shadertools/src/modules/diffuse/diffuse';\nexport { default as pbr } from './shadertools/src/modules/pbr/pbr'; // UTILS - mainly for sub-modules\n\nexport { default as assert } from './utils/assert';\nexport { default as log } from './utils/log';\nexport { global, window, document, self } from './utils/globals';\nexport { default as isBrowser } from './utils/is-browser';\nexport { default as isOldIE } from './utils/is-old-ie';\nexport { stubRemovedMethods } from './utils/stub-methods'; // TO BE REMOVED IN v7\n\nexport { makeDebugContext } from './webgl-context/debug-context'; // DEPRECATED EXPORTS IN v6.0\n\nexport { default as ClipSpaceQuad } from './models/clip-space'; // DEPRECATED EXPORTS IN v5.3\n\nexport { glGet, glKey, glKeyType } from './webgl-utils/constants-to-keys';","import React, { Component } from 'react';\nimport {\n  ContainerLg,\n  H1,\n  H2,\n  H3,\n  H4,\n  Paragraph,\n  List,\n  ListItem,\n  InlineCode,\n} from './styling/components';\n\nimport Waypoint from 'react-waypoint';\n\nimport { AnimationLoop, setParameters, Cube, dirlight } from 'luma.gl';\nimport { Matrix4, radians } from 'math.gl';\n\nconst isBrowser = typeof window !== `undefined`;\n\nconst SIDE = 64;\n\nlet projectionMatrix = new Matrix4();\n\nconst animationLoop = new AnimationLoop({\n  createFramebuffer: true,\n  onInitialize({ gl }) {\n    setParameters(gl, {\n      clearColor: [0, 0, 0, 1],\n      clearDepth: 1,\n      depthTest: true,\n      depthFunc: gl.LEQUAL,\n    });\n\n    return {\n      cube: makeInstancedCube(gl),\n    };\n  },\n  onFinalize({ gl, cube }) {\n    cube.delete();\n  },\n  onRender({ gl, tick, aspect, cube, framebuffer }) {\n    try {\n      projectionMatrix = new Matrix4().perspective({\n        fov: radians(60),\n        aspect,\n        near: 1,\n        far: 2048.0,\n      });\n    } catch (error) {\n    }\n    \n    cube.setUniforms({\n      uTime: tick * 0.1,\n      // Basic projection matrix\n      uProjection: projectionMatrix,\n      // Move the eye around the plane\n      uView: new Matrix4().lookAt({\n        center: [0, 0, 0],\n        eye: [0, (Math.sin(tick * 0.006) * SIDE) / 2, 32],\n      }),\n      uLightDirection: [\n        (Math.cos(tick * 0.001) * SIDE) / 2,\n        (Math.sin(tick * 0.001) * SIDE) / 2,\n        128,\n      ],\n      // Rotate all the individual cubes\n      uModel: new Matrix4().rotateX(tick * 0.01).rotateY(tick * 0.013),\n    });\n\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    cube.render();\n  },\n});\n\n// Make a cube with 65K instances and attributes to control offset and color of each instance\nfunction makeInstancedCube(gl) {\n  let offsets = [];\n  for (let i = 0; i < SIDE; i++) {\n    const x = ((-SIDE + 1) * 3) / 2 + i * 3;\n    for (let j = 0; j < SIDE; j++) {\n      const y = ((-SIDE + 1) * 3) / 2 + j * 3;\n      offsets.push(x, y);\n    }\n  }\n  offsets = new Float32Array(offsets);\n  /*\n     const material = new THREE.MeshPhongMaterial({\n       color: 0x110B2A,\n       specular: 0x8C0112,\n       emissive: 0x100C27,\n       shininess: 30,\n       shading: THREE.FlatShading,\n       side: THREE.DoubleSide,\n     });\n  */\n\n  const colors = new Float32Array(SIDE * SIDE * 3).map(\n    i => [0.06640625, 0.04296875, 0.1640625][i % 3]\n  );\n\n  const { vs, fs } = {\n    vs: `\\\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 instanceOffsets;\nattribute vec3 instanceColors;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform float uTime;\n\nuniform vec3 uLightDirection;\n\nvarying vec3 color;\n\nvoid main(void) {\n  vec3 normal = vec3(uModel * vec4(normals, 1.0));\n\n  // Set up data for modules\n  color = instanceColors;\n  project_setNormal(normal);\n\n  // Vertex position (z coordinate undulates with time), and model rotates around center\n  float delta = length(instanceOffsets);\n  vec4 offset = vec4(instanceOffsets, sin((uTime + delta) * 0.1) * 16.0, 0);\n  gl_Position = uProjection * uView * (uModel * vec4(positions, 1.0) + offset);\n}\n`,\n    fs: `\\\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 color;\n\nvoid main(void) {\n  gl_FragColor = vec4(color, 0.9);\n  gl_FragColor = dirlight_filterColor(gl_FragColor);\n}\n`,\n  };\n\n  return new Cube(gl, {\n    vs,\n    fs,\n    modules: [dirlight],\n    isInstanced: 1,\n    instanceCount: SIDE * SIDE,\n    attributes: {\n      instanceOffsets: { value: offsets, size: 2, instanced: 1 },\n      instanceColors: { value: colors, size: 3, instanced: 1 },\n    },\n  });\n}\n\nclass Hero extends Component {\n  componentWillUnmount() {\n    this._animationStop();\n  }\n\n  _animationStart() {\n    animationLoop.start({ canvas: 'lumagl-canvas' });\n  }\n\n  _animationStop() {\n    animationLoop.stop({ canvas: 'lumagl-canvas' });\n  }\n\n  render() {\n    return (\n      <div id=\"hero\">\n        {isBrowser ? (\n          <Waypoint\n            onEnter={this._animationStart}\n            onLeave={this._animationStop}\n          >\n            <canvas\n              id=\"lumagl-canvas\"\n              style={{\n                position: 'absolute',\n                height: '500px',\n                top: 0,\n                width: '100vw',\n                zIndex: -1,\n              }}\n            />\n          </Waypoint>\n        ) : null}\n        <div className=\"main\">\n          {'Large scale '}\n          <em>geospatial</em>\n          {' data visualization'}\n        </div>\n        <div className=\"secondary\">\n          Promoting Industry Collaboration through Open Source and Open Governance\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Hero;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { ContainerSm, H1, H3, Paragraph, List } from './styling/components';\n\n/*\n\n# Open Governance\n\n#### vis.gl 8.4-8.5 Community Planning\n#### vis.gl 8.2-8.3 Community Planning\n\n*/\n\nconst TitleSection = styled(H1)`\n  font-family: ${props => props.theme.fontFamilyLight};\n  line-height: 150%;\n  background: url(${props => props.backgroundImg}) no-repeat;\n  min-height: 300px;\n  padding-left: 200px;\n  margin-top: 50px;\n  padding-top: 50px;\n`;\n\nconst ContributorContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n`;\n\nconst OpenGovContainer = styled.div`\n  .image {\n    margin-top: 50px;\n  }\n`;\nconst ContributorSection = styled.div`\n  display: flex;\n  flex-direction: column;\n  .logo-title {\n    font-size: 14px;\n    line-height: 110%;\n    color: ${props => props.theme.gray};\n    font-family: ${props => props.theme.fontFamilyLight};\n  }\n\n  .logo {\n    margin-top: 30px;\n\n    a {\n      margin-right: 100px;\n    }\n  }\n\n  .logo.tall {\n    margin-top: 20px;\n    margin-left: -18px;\n  }\n\n  :not(:first-child) {\n    border-left: 1px solid ${props => props.theme.gray};\n    padding-left: 40px;\n  }\n`;\n\nconst SectionContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`;\n\nconst SectionTitle = styled.div`\n  width: 264px;\n  margin-right: 20px;\n  font-size: 18px;\n  line-height: 20px;\n  font-family: ${props => props.theme.fontFamilyMedium};\n  flex-shrink: 0;\n`;\n\nconst SectionContent = styled.div`\n  flex-grow: 1;\n`;\n\nconst ListTitle = styled.div`\n  font-size: 16px;\n  margin-top: 18px;\n  font-family: ${props => props.theme.fontFamilyMedium};\n\n  :first-child {\n    margin-top: 0;\n  }\n`;\n\nconst ListItem = styled.div`\n  font-size: 16px;\n  color: ${props => props.theme.gray};\n`;\nexport default function ManifestoSection({ imageResolver }) {\n  console.log(imageResolver);\n  return (\n    <div>\n      {/*\n      <div className=\"section-title\">\n        <Paragraph>vis.gl</Paragraph>\n        <Paragraph>GPU powered geospatial frameworks</Paragraph>\n        <Paragraph>Promoting Industry Collaboration via Open Governance</Paragraph>\n      </div>\n      */}\n      <ContainerSm>\n        <TitleSection backgroundImg={imageResolver['logos/vis-logo.png']}>\n          Vis.gl is a suite of composable, interoperable open source geospatial\n          visualization frameworks centered around{' '}\n          <a href=\"https://deck.gl\">deck.gl</a>.\n        </TitleSection>\n      </ContainerSm>\n      <ContainerSm>\n        <SectionContainer>\n          <SectionTitle>Contribution</SectionTitle>\n          <SectionContent>\n            <ContributorContainer>\n              <ContributorSection>\n                <div className=\"logo-title\">Lead Contributors</div>\n                <div className=\"logo\">\n                  <a href=\"https://unfolded.ai\">\n                    <img\n                      height=\"40\"\n                      src={imageResolver['logos/unfolded-logo.png']}\n                    />\n                  </a>\n                  <a href=\"https://carto.com\">\n                    <img\n                      height=\"40\"\n                      src={imageResolver['logos/CARTO-logo-positive.png']}\n                    />\n                  </a>\n                </div>\n              </ContributorSection>\n              <ContributorSection>\n                <div className=\"logo-title\">Created By</div>\n                <div className=\"logo tall\">\n                  <a href=\"https://uber.com/\">\n                    <img\n                      height=\"60\"\n                      src={imageResolver['logos/uber-logo-black.jpg']}\n                    />\n                  </a>\n                </div>\n              </ContributorSection>\n            </ContributorContainer>\n          </SectionContent>\n        </SectionContainer>\n      </ContainerSm>\n      {/*\n        <center>\n          <H2>Sponsored By</H2>\n          <a href=\"https://uber.com/\">\n            <img height=\"60\" src={imageResolver['logos/uber-logo-black.jpg']} />\n          </a>\n          <span style={{ padding: 10 }} />\n          <a href=\"https://www.here.com/\">\n            <img height=\"40\" src={imageResolver['logos/here-logo.png']} />\n          </a>\n          <span style={{ padding: 10 }} />\n          <a href=\"https://google.com\">\n            <img height=\"40\" src={imageResolver['logos/google-logo.png']} />\n          </a>\n          <span style={{ padding: 10 }} />\n          <a href=\"https://esri.com\">\n            <img height=\"40\" src={imageResolver['logos/esri-logo.png']} />\n          </a>\n        </center>\n        <br />\n        */}\n      <ContainerSm>\n        <SectionContainer>\n          <SectionTitle>Open Governance</SectionTitle>\n          <SectionContent>\n            <OpenGovContainer>\n              <Paragraph>\n                vis.gl is under open governance, and anyone can join the open\n                planning meetings. Contributor status is available and technical\n                steering committee membership is available to major\n                contributors.\n              </Paragraph>\n              <div className=\"image\">\n                <a href=\"https://www.linuxfoundation.org//\">\n                  <img\n                    height=\"40\"\n                    src={imageResolver['logos/linux-foundation.svg']}\n                  />\n                </a>\n                <span style={{ padding: 50 }} />\n                <a href=\"https://uc.foundation/\">\n                  <img\n                    height=\"40\"\n                    src={imageResolver['logos/ucf-color-hztl.svg']}\n                  />\n                </a>\n              </div>\n            </OpenGovContainer>\n          </SectionContent>\n        </SectionContainer>\n      </ContainerSm>\n\n      <ContainerSm>\n        <SectionContainer>\n          <SectionTitle>Frameworks</SectionTitle>\n          <SectionContent>\n            <OpenGovContainer>\n              <Paragraph>\n                The <a href=\"/frameworks\">vis.gl Framework Catalog</a> provides\n                an overview of the various frameworks in the vis.gl framework\n                suite.\n              </Paragraph>\n              <img src={imageResolver['frameworks.jpg']} width=\"100%\" />\n            </OpenGovContainer>\n          </SectionContent>\n        </SectionContainer>\n      </ContainerSm>\n\n      <ContainerSm>\n        <SectionContainer>\n          <SectionTitle>Releases</SectionTitle>\n          <SectionContent>\n            <H3>vis.gl 8.4</H3>\n            <Paragraph>\n              <ListTitle>Release Date: Jan 31, 2021</ListTitle>\n              <ListTitle>deck.gl 8.4</ListTitle>\n\n              <ListItem>\n                <a href=\"https://deck.gl/docs/whats-new\">Release Notes</a>\n              </ListItem>\n              <div style={{marginTop: 5}} />\n              <List>\n                <ListItem>MVTLayer - 2x performance via binary mode. TileJSON. Query Features.</ListItem>\n                <ListItem>HeatmapLayer - GPU aggregations now include MEAN and SUM</ListItem>\n                <ListItem>BitmapLayer - pixel picking</ListItem>\n                <ListItem>All Layers - performance, rendering edge cases</ListItem>\n                <ListItem>Interaction - mobile improvments, new gesture for 3D interaction, inertia</ListItem>\n                <ListItem>loaders.gl integration - More control of loader autoselection</ListItem>\n                <ListItem>@deck.gl/carto - enables data-driven map visualizations using CARTOColors</ListItem>\n\n              </List>\n\n              <ListTitle>luma.gl 8.4</ListTitle>\n              <ListItem>\n                <a href=\"https://luma.gl/docs/whats-new\">Release Notes</a>\n              </ListItem>\n              <div style={{marginTop: 5}} />\n              <List>\n                <ListItem><b>TypeScript</b> - types are now exported</ListItem>\n              </List>\n\n              <ListTitle>react-map-gl v6.1</ListTitle>\n              <ListItem>\n                <a href=\"https://visgl.github.io/react-map-gl/docs/whats-new\">Release Notes</a>\n              </ListItem>\n              <div style={{marginTop: 5}} />\n              <List>\n                <ListItem>\n                  Choose your mapbox API compatible rendering library:\n                  Mapbox GL JS v2, Mapbox GL JS v1, MapLibre.\n                </ListItem>\n                <ListItem><b>TypeScript</b> - types are now exported</ListItem>\n              </List>\n\n              <ListTitle>math.gl 3.4</ListTitle>\n              <ListItem>\n                <a href=\"https://math.gl/docs/whats-new\">Release Notes</a>\n              </ListItem>\n              <div style={{marginTop: 5}} />\n              <List>\n                <ListItem>\n                  @math.gl/geoid - New module for working with Earth Gravity\n                  Models\n                </ListItem>\n                <ListItem>\n                  @math.gl/polygon - Improved support for binary polygons\n                </ListItem>\n              </List>\n\n              <ListTitle>loaders.gl 2.3</ListTitle>\n              <ListItem>\n                <a href=\"https://loaders.gl/docs/whats-new\">Release Notes</a>\n              </ListItem>\n              <div style={{marginTop: 5}} />\n              <List>\n                <ListItem>\n                  loaders.gl is still on v2.3. The big 3.0 release is targeting vis.gl 8.5.\n                </ListItem>\n              </List>\n            </Paragraph>\n          </SectionContent>\n        </SectionContainer>\n      </ContainerSm>\n\n      <ContainerSm>\n        <SectionContainer>\n          <SectionTitle>History</SectionTitle>\n          <SectionContent>\n            <ListTitle>2020</ListTitle>\n            <List>\n              <ListItem>\n                vis.gl Open Governance meetings started, under the auspices of\n                the Linux Foundation and the UCF.\n              </ListItem>\n              <ListItem>\n                Uber transferred a set of core vis.gl frameworks to the UCF.\n              </ListItem>\n            </List>\n            <ListTitle>2019</ListTitle>\n            <List>\n              <ListItem>\n                Uber created the Urban Computing Foundation (a sub-foundation of\n                the Linux Foundation), transferring kepler.gl.\n              </ListItem>\n            </List>\n            <ListTitle>2018</ListTitle>\n            <List>\n              <ListItem>Uber open sourced kepler.gl</ListItem>\n              <ListItem>loaders.gl and nebula.gl were created.</ListItem>\n            </List>\n            <ListTitle>2017</ListTitle>\n            <List>\n              <ListItem>math.gl was created.</ListItem>\n              <ListItem>probe.gl was created.</ListItem>\n            </List>\n            <ListTitle>2016</ListTitle>\n            <ListItem>luma.gl was created.</ListItem>\n            <ListTitle>2015</ListTitle>\n            <List>\n              <ListItem>\n                The core deck.gl framework was open sourced by Uber.\n              </ListItem>\n              <ListItem>\n                The core deck.gl framework was developed by Uber to support a\n                wide range of geospatial visualization use cases across the\n                company.\n              </ListItem>\n            </List>\n          </SectionContent>\n        </SectionContainer>\n      </ContainerSm>\n    </div>\n  );\n}\n","import React from 'react';\nimport { graphql } from 'gatsby';\nimport Layout from '../components/layout';\nimport Hero from '../components/hero';\nimport ManifestoSection from '../components/manifesto-section';\n\nconst IndexPage = ({data}) => {\n  const imageResolver = data.allFile.edges.reduce((prev, curr) => {\n    prev[curr.node.relativePath] = curr.node.publicURL;\n    return prev;\n  }, {});\n  return (\n    <Layout page=\"home\">\n      <div id=\"home\">\n        <Hero />\n        <ManifestoSection imageResolver={imageResolver} />\n      </div>\n    </Layout>\n  );\n};\n\nexport default IndexPage;\nexport const query = graphql`\n  query {\n    allFile(filter: { sourceInstanceName: { eq: \"images\" } }) {\n      edges {\n        node {\n          relativePath\n          name\n          extension\n          publicURL\n        }\n      }\n    }\n  }\n`;\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport Texture from './texture';\nimport { assertWebGLContext } from '../webgl-utils';\n\nvar Texture2D = /*#__PURE__*/function (_Texture) {\n  _inherits(Texture2D, _Texture);\n\n  _createClass(Texture2D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl, opts) {\n      return Texture.isSupported(gl, opts);\n    }\n    /**\n     * @classdesc\n     * 2D WebGL Texture\n     * Note: Constructor will initialize your texture.\n     *\n     * @class\n     * @param {WebGLRenderingContext} gl - gl context\n     * @param {Image|ArrayBuffer|null} opts= - named options\n     * @param {Image|ArrayBuffer|null} opts.data= - buffer\n     * @param {GLint} width - width of texture\n     * @param {GLint} height - height of texture\n     */\n\n  }]);\n\n  function Texture2D(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture2D);\n\n    assertWebGLContext(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture2D).call(this, gl, Object.assign({}, opts, {\n      target: 3553\n    })));\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } // target cannot be modified by bind:\n  // textures are special because when you first bind them to a target,\n  // they get special information. When you first bind a texture as a\n  // GL_TEXTURE_2D, you are actually setting special state in the texture.\n  // You are saying that this texture is a 2D texture.\n  // And it will always be a 2D texture; this state cannot be changed ever.\n  // If you have a texture that was first bound as a GL_TEXTURE_2D,\n  // you must always bind it as a GL_TEXTURE_2D;\n  // attempting to bind it as GL_TEXTURE_1D will give rise to an error\n  // (while run-time).\n\n\n  _createClass(Texture2D, [{\n    key: \"bind\",\n    value: function bind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n      var gl = this.gl;\n\n      if (textureUnit === undefined) {\n        throw new Error('Texture.bind: must specify texture unit');\n      }\n\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n      gl.bindTexture(this.target, this.handle);\n      return textureUnit;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var gl = this.gl;\n\n      if (this.textureUnit === undefined) {\n        throw new Error('Texture.unbind: texture unit not specified');\n      }\n\n      gl.activeTexture(33984 + this.textureUnit);\n      gl.bindTexture(this.target, null);\n      return this.textureUnit;\n    }\n  }, {\n    key: \"getActiveUnit\",\n    value: function getActiveUnit() {\n      return this.gl.getParameter(34016) - 33984;\n    }\n  }]);\n\n  return Texture2D;\n}(Texture);\n\nexport { Texture2D as default };","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n/* eslint-disable no-inline-comments, max-len */\n\nimport { pushContextState, popContextState } from '../webgl-context/track-context-state';\nimport { getParameter, getParameters, setParameter, setParameters as glSetParameters, resetParameters, getModifiedParameters } from '../webgl-context/set-parameters';\nimport { isObjectEmpty } from '../utils';\nimport assert from '../utils/assert'; // map of parameter setter function names, parameter constants, default values and types\n// - Uses gl function names, except when setter function exist that are named differently\n// - When the WebGL api offers <setter> and <setter>Separate (e.g. blendEquation and\n//   blendEquationSeparate, we use non-separate name, but accept both non-separate and\n//   separate arguments. Thus, a `getParameter` call will always return all the separate values\n//   in an array, in a form that can be accepted by the setter.\n\nexport var LUMA_SETTERS = {\n  framebuffer: function framebuffer(gl, _framebuffer) {\n    // accepts 1) a WebGLFramebuffer 2) null (default framebuffer), or 3) luma.gl Framebuffer class\n    // framebuffer is null when restoring to default framebuffer, otherwise use the WebGL handle.\n    var handle = _framebuffer && 'handle' in _framebuffer ? _framebuffer.handle : _framebuffer;\n    return gl.bindFramebuffer(36160, handle);\n  },\n  blend: function blend(gl, value) {\n    return value ? gl.enable(3042) : gl.disable(3042);\n  },\n  blendColor: function blendColor(gl, value) {\n    return gl.blendColor.apply(gl, _toConsumableArray(value));\n  },\n  blendEquation: function blendEquation(gl, args) {\n    args = isArray(args) ? args : [args, args];\n    gl.blendEquationSeparate.apply(gl, _toConsumableArray(args));\n  },\n  blendFunc: function blendFunc(gl, args) {\n    args = isArray(args) && args.length === 2 ? _toConsumableArray(args).concat(_toConsumableArray(args)) : args;\n    gl.blendFuncSeparate.apply(gl, _toConsumableArray(args));\n  },\n  clearColor: function clearColor(gl, value) {\n    return gl.clearColor.apply(gl, _toConsumableArray(value));\n  },\n  clearDepth: function clearDepth(gl, value) {\n    return gl.clearDepth(value);\n  },\n  clearStencil: function clearStencil(gl, value) {\n    return gl.clearStencil(value);\n  },\n  colorMask: function colorMask(gl, value) {\n    return gl.colorMask.apply(gl, _toConsumableArray(value));\n  },\n  cull: function cull(gl, value) {\n    return value ? gl.enable(2884) : gl.disable(2884);\n  },\n  cullFace: function cullFace(gl, value) {\n    return gl.cullFace(value);\n  },\n  depthTest: function depthTest(gl, value) {\n    return value ? gl.enable(2929) : gl.disable(2929);\n  },\n  depthFunc: function depthFunc(gl, value) {\n    return gl.depthFunc(value);\n  },\n  depthMask: function depthMask(gl, value) {\n    return gl.depthMask(value);\n  },\n  depthRange: function depthRange(gl, value) {\n    return gl.depthRange.apply(gl, _toConsumableArray(value));\n  },\n  dither: function dither(gl, value) {\n    return value ? gl.enable(3024) : gl.disable(3024);\n  },\n  derivativeHint: function derivativeHint(gl, value) {\n    // gl1: 'OES_standard_derivatives'\n    gl.hint(35723, value);\n  },\n  frontFace: function frontFace(gl, value) {\n    return gl.frontFace(value);\n  },\n  mipmapHint: function mipmapHint(gl, value) {\n    return gl.hint(33170, value);\n  },\n  lineWidth: function lineWidth(gl, value) {\n    return gl.lineWidth(value);\n  },\n  polygonOffsetFill: function polygonOffsetFill(gl, value) {\n    return value ? gl.enable(32823) : gl.disable(32823);\n  },\n  polygonOffset: function polygonOffset(gl, value) {\n    return gl.polygonOffset.apply(gl, _toConsumableArray(value));\n  },\n  sampleCoverage: function sampleCoverage(gl, value) {\n    return gl.sampleCoverage.apply(gl, _toConsumableArray(value));\n  },\n  scissorTest: function scissorTest(gl, value) {\n    return value ? gl.enable(3089) : gl.disable(3089);\n  },\n  scissor: function scissor(gl, value) {\n    return gl.scissor.apply(gl, _toConsumableArray(value));\n  },\n  stencilTest: function stencilTest(gl, value) {\n    return value ? gl.enable(2960) : gl.disable(2960);\n  },\n  stencilMask: function stencilMask(gl, value) {\n    value = isArray(value) ? value : [value, value];\n\n    var _value = value,\n        _value2 = _slicedToArray(_value, 2),\n        mask = _value2[0],\n        backMask = _value2[1];\n\n    gl.stencilMaskSeparate(1028, mask);\n    gl.stencilMaskSeparate(1029, backMask);\n  },\n  stencilFunc: function stencilFunc(gl, args) {\n    args = isArray(args) && args.length === 3 ? _toConsumableArray(args).concat(_toConsumableArray(args)) : args;\n\n    var _args = args,\n        _args2 = _slicedToArray(_args, 6),\n        func = _args2[0],\n        ref = _args2[1],\n        mask = _args2[2],\n        backFunc = _args2[3],\n        backRef = _args2[4],\n        backMask = _args2[5];\n\n    gl.stencilFuncSeparate(1028, func, ref, mask);\n    gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n  },\n  stencilOp: function stencilOp(gl, args) {\n    args = isArray(args) && args.length === 3 ? _toConsumableArray(args).concat(_toConsumableArray(args)) : args;\n\n    var _args3 = args,\n        _args4 = _slicedToArray(_args3, 6),\n        sfail = _args4[0],\n        dpfail = _args4[1],\n        dppass = _args4[2],\n        backSfail = _args4[3],\n        backDpfail = _args4[4],\n        backDppass = _args4[5];\n\n    gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n    gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n  },\n  viewport: function viewport(gl, value) {\n    return gl.viewport.apply(gl, _toConsumableArray(value));\n  }\n}; // HELPERS\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n} // GETTERS AND SETTERS\n// Get the parameter value(s) from the context\n\n\nexport { getParameter }; // from '../webgl-utils/set-parameters'\n// Get the parameters from the context\n\nexport { getParameters }; // from '../webgl-utils/set-parameters'\n// Resets gl state to default values.\n\nexport { setParameter }; // from '../webgl-utils/set-parameters'\n// Resets gl state to default values.\n\nexport { resetParameters }; // from '../webgl-utils/set-parameters'\n// Get a map of modified parameters\n\nexport { getModifiedParameters }; // Note: \"setParameters\" is given extra treatment below\n// Set the parameter value(s) by key to the context\n// Sets value with key to context.\n// Value may be \"normalized\" (in case a short form is supported). In that case\n// the normalized value is retured.\n\nexport function setParameters(gl, parameters) {\n  glSetParameters(gl, parameters);\n\n  for (var key in parameters) {\n    var setter = LUMA_SETTERS[key];\n\n    if (setter) {\n      setter(gl, parameters[key], key);\n    }\n  }\n} // VERY LIMITED / BASIC GL STATE MANAGEMENT\n// Executes a function with gl states temporarily set, exception safe\n// Currently support pixelStorage, scissor test and framebuffer binding\n\nexport function withParameters(gl, parameters, func) {\n  // assertWebGLContext(gl);\n  if (isObjectEmpty(parameters)) {\n    // Avoid setting state if no parameters provided. Just call and return\n    return func(gl);\n  }\n\n  var _parameters$nocatch = parameters.nocatch,\n      nocatch = _parameters$nocatch === void 0 ? true : _parameters$nocatch; // frameBuffer not supported use framebuffer\n\n  assert(!parameters.frameBuffer);\n  pushContextState(gl);\n  setParameters(gl, parameters); // Setup is done, call the function\n\n  var value;\n\n  if (nocatch) {\n    // Avoid try catch to minimize stack size impact for safe execution paths\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    // Wrap in a try-catch to ensure that parameters are restored on exceptions\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL_PARAMETERS;\n/* eslint-disable no-inline-comments, max-len, camelcase */\n\n\nvar OES_element_index = 'OES_element_index';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nvar GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nvar GL_DONT_CARE = 0x1100;\nvar GL_GPU_DISJOINT_EXT = 0x8fbb;\nvar GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nvar GL_UNMASKED_VENDOR_WEBGL = 0x9245; // vendor string of the graphics driver.\n\nvar GL_UNMASKED_RENDERER_WEBGL = 0x9246; // renderer string of the graphics driver.\n\nvar getWebGL2ValueOrZero = function getWebGL2ValueOrZero(gl) {\n  return !isWebGL2(gl) ? 0 : undefined;\n}; // if a function returns undefined in this table,\n// the original getParameter will be called, defeating the override\n\n\nvar WEBGL_PARAMETERS = (_WEBGL_PARAMETERS = {}, _defineProperty(_WEBGL_PARAMETERS, 3074, function (gl) {\n  return !isWebGL2(gl) ? 36064 : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_FRAGMENT_SHADER_DERIVATIVE_HINT, function (gl) {\n  return !isWebGL2(gl) ? GL_DONT_CARE : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35977, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 32937, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL_GPU_DISJOINT_EXT, function (gl, getParameter) {\n  var ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n  return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_VENDOR_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_RENDERER_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT, function (gl, getParameter) {\n  var ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n  return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n}), _defineProperty(_WEBGL_PARAMETERS, 32883, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35071, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37447, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36063, function (gl, getParameter) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35379, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35374, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35377, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34852, function (gl) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 36203, // Guess: per webglstats.com 99.6% of webgl2 supports 2147483647\nfunction (gl) {\n  return gl.getExtension(OES_element_index) ? 2147483647 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33001, // Guess: \"Reasonably safe\" per webglstats.com - could be higher/lower (on some mobile devices)\nfunction (gl) {\n  return gl.getExtension(OES_element_index) ? 16777216 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33000, // Guess: \"Reasonably safe\" per webglstats.com - could be higher/lower (on some mobile devices)\nfunction (gl) {\n  return 16777216;\n}), _defineProperty(_WEBGL_PARAMETERS, 37157, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35373, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35657, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36183, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37137, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34045, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35978, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35979, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35968, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35376, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35375, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35659, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37154, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35371, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35658, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35076, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35077, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35380, getWebGL2ValueOrZero), _WEBGL_PARAMETERS); // Return true if WebGL2 context\n\nfunction isWebGL2(gl) {\n  var GL_TEXTURE_BINDING_3D = 0x806a;\n  return gl && 32874 === GL_TEXTURE_BINDING_3D;\n} // A \"replacement\" gl.getParameter that accepts \"enums\" from extensions and WebGL2\n// and returns reasonably safe defaults\n\n\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  // Return mock limits (usually 0) for WebGL2 constants to ensure these\n  // can be queries without error\n  var limit = WEBGL_PARAMETERS[pname];\n  var value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  var result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import { WebGLRenderingContext, WebGL2RenderingContext } from './webgl-types';\nimport assert from '../utils/assert'; // Heuristic testing of contexts (to indentify debug wrappers around gl contexts)\n\nvar GL_ARRAY_BUFFER = 0x8892;\nvar GL_TEXTURE_BINDING_3D = 0x806a;\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(glAlias) {\n  return Boolean(glAlias && (glAlias instanceof WebGLRenderingContext || // `glAlias` name prevents gl constant inliner from making this always true\n  glAlias.ARRAY_BUFFER === GL_ARRAY_BUFFER));\n}\nexport function isWebGL2(glAlias) {\n  return Boolean(glAlias && (glAlias instanceof WebGL2RenderingContext || // `glAlias` name prevents gl constant inliner from making this always true\n  glAlias.TEXTURE_BINDING_3D === GL_TEXTURE_BINDING_3D));\n}\nexport function assertWebGLContext(gl) {\n  // Need to handle debug context\n  assert(isWebGL(gl), ERR_CONTEXT);\n}\nexport function assertWebGL2Context(gl) {\n  // Need to handle debug context\n  assert(isWebGL2(gl), ERR_WEBGL2);\n}","import styled from 'styled-components';\nimport { breakpointsMediaQueries } from './style';\n\n// New components\nexport const ContainerLg = styled.div.attrs({\n  className: 'container-lg',\n})`\n  max-width: ${props => props.theme.containerMaxWidth}px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n\n  ${breakpointsMediaQueries.xl} {\n    margin: 0px 40px;\n\n    &.no-margin {\n      margin: 0 0;\n    }\n  }\n`;\n\nexport const ContainerSm = styled(ContainerLg).attrs({\n  className: 'container-sm',\n})`\n  max-width: 1100px;\n  margin-top: 100px;\n\n  :last-child {\n    margin-bottom: 100px\n  }\n`;\n\nexport const Headline = styled.div.attrs({\n  className: 'content-title',\n})`\n  font-family: ${props => props.theme.fontFamilySemiBold};\n  font-size: ${props => props.theme.fontSizeUltraHeading};\n  line-height: ${props => props.theme.lineHeightUltraHeading};\n  letter-spacing: ${props => props.theme.letterSpacingUltraHeading};\n  font-weight: ${props => props.theme.fontWeightUltraHeading};\n`;\n\nexport const H1 = styled(Headline).attrs({\n  className: 'content-title h1',\n})`\n  font-size: ${props => props.theme.fontSizeH1};\n  font-family: ${props => props.theme.fontFamilyMedium};\n  line-height: ${props => props.theme.lineHeightH1};\n  color: ${props => props.theme.darkBlue};\n  letter-spacing: ${props => props.theme.letterSpacingH1};\n  margin: 4px 0 24px;\n`;\n\nexport const H2 = styled(Headline).attrs({\n  className: 'content-title h2',\n})`\n  font-size: ${props => props.theme.fontSizeH2};\n  line-height: ${props => props.theme.lineHeightH2};\n  font-family: ${props => props.theme.fontFamilyMedium};\n  margin: 24px 0 16px;\n`;\n\nexport const H3 = styled(Headline).attrs({\n  className: 'content-title h3',\n})`\n  font-weight: normal;\n  font-family: ${props => props.theme.fontFamily};\n  font-size: ${props => props.theme.fontSizeH3};\n  line-height: ${props => props.theme.lineHeightH3};\n`;\n\nexport const H4 = styled(H3).attrs({\n  className: 'content-title h4',\n})`\n  font-family: ${props => props.theme.fontFamily};\n  font-size: ${props => props.theme.fontSizeH4};\n  line-height: ${props => props.theme.lineHeightH4};\n`;\n\nexport const Paragraph = styled.p.attrs({\n  className: 'content-paragraph',\n})`\n  font-family: ${props => props.theme.fontFamily};\n  font-size: ${props => props.theme.fontSizeP1};\n  line-height: ${props => props.theme.lineHeightP1};\n  margin: 0 0 16px;\n`;\n\nexport const List = styled.ul`\n  margin: 0 0 12px;\n`;\n\nexport const ListItem = styled.li`\n  margin-bottom: 4px;\n`;\n\nexport const InlineCode = styled.code`\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  padding: 0 5px;\n  font-family: Consolas, Menlo, Monaco, 'Andale Mono WT', 'Andale Mono',\n    'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono',\n    'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L',\n    'Courier New', Courier, monospace;\n  font-size: 0.9em;\n  margin: 1px 0;\n  line-height: calc(1.5em / 0.9 - 2px);\n  display: inline-block;\n  vertical-align: top;\n`;\n\nexport const SubTitle = styled.div`\n  color: ${props => props.theme.gray};\n  font-size: 14px;\n`;\n/*\n// paragraph on dark background\nexport const ParagraphLight = styled(Paragraph)`\n  color: ${props => props.theme.fontColorLT};\n  opacity: 0.8;\n`;\n\nexport const SubTitle = styled(H3)`\n  margin-top: 44px;\n  text-align: center;\n`;\n\nexport const HeadlineSubtitle = styled.div.attrs({\n  className: 'headline-subtitle'\n})`\n  font-size: 20px;\n  line-height: 180%;\n  color: ${props => props.theme.headlineSubtitleColor};\n  white-space: pre-line;\n\n  ${breakpointsMediaQueries.sm} {\n    font-size: 18px;\n    margin-bottom: 12px;\n  }\n`;\n// End new components\n\nexport const TitleSemiBold = styled.div.attrs({\n  className: 'content-title-semibold'\n})`\n  font-family: ${props => props.theme.fontFamilySemiBold};\n  font-size: ${props => props.theme.fontSizeH4}\n  font-weight: 500;\n  font-size: ${props => props.theme.lineHeightH4}\n  margin-top: 12px;\n  text-align: center;\n  color: ${props => props.theme.highlightColor};\n`;\n\nexport const Button = styled.button.attrs(props => ({\n  className: classnames('button', props.link ? 'link' : '')\n}))`\n  align-items: center;\n  background-color: ${props => props.theme.violetBtn};\n  border: none;\n  border-radius: 6px;\n  color: ${props => props.theme.primaryBtnColor};\n  cursor: pointer;\n  display: inline-flex;\n  font-size: 14px;\n  font-family: ${props => props.theme.fontFamilyMedium};\n  justify-content: center;\n  letter-spacing: 1px;\n  line-height: 14px;\n  outline: 0;\n  padding: 14px 32px;\n  text-align: center;\n  transition: ${props => props.theme.transition};\n  vertical-align: middle;\n  width: ${props => props.width || 'auto'};\n  white-space: nowrap;\n\n  :hover,\n  :focus,\n  :active,\n  &.active {\n    background-color: ${props => props.theme.primaryBtnBgdHover};\n  }\n\n  &.link {\n    background-color: transparent;\n    color: ${props => props.theme.carouselButton};\n    font-family: ${props => props.theme.fontFamilyMedium};\n    &:hover {\n      color: #000;\n    }\n  }\n\n  svg {\n    margin-right: 8px;\n  }\n`;\n\nexport const RoundButton = styled(Button)`\n  font-size: 16px;\n  font-weight: bold;\n  border-radius: 35px;\n  padding: 20px 32px;\n  ${breakpointsMediaQueries.sm} {\n    padding: 16px 20px;\n  }\n  &.outline {\n    color: ${props => props.theme.violetBtn};\n    background-color: transparent;\n    border: 1px solid ${props => props.theme.violetBtn};\n  }\n  &.white-btn {\n    color: ${props => props.theme.lightBtnColor};\n    background-color: ${props => props.theme.lightBtnBgd};\n    :hover,\n    :focus,\n    :active,\n    &.active {\n      background-color: ${props => props.theme.lightBtnBgdHover};\n    }\n  }\n`;\n\nexport const ClearButton = styled(Button)`\n  font-size: 16px;\n  font-weight: bold;\n  border-radius: 35px;\n  padding: 20px 32px;\n  background-color: transparent;\n  color: ${props => props.theme.violetBtn};\n  :hover,\n  :focus,\n  :active,\n  &.active {\n    background-color: transparent;\n    color: ${props => props.theme.primaryBtnBgdHover};\n  }\n`;\n\nconst StyledIconTile = styled.div.attrs({\n  className: 'icon-tile'\n})`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media (max-width: 768px) {\n    flex-direction: row;\n    align-items: left;\n  }\n\n  .icon {\n    width: 62px;\n    height: 62px;\n\n    image: {\n      width: 100%;\n    }\n  }\n\n  .title {\n    font-family: ${props => props.theme.fontFamilySemiBold};\n    font-size: 18px;\n    line-height: 22px;\n    text-align: center;\n    margin-top: 24px;\n    margin-left: 10px;\n  }\n`;\n\nexport const SectionList = styled.div.attrs({\n  className: 'site-section__list'\n})`\n  width: 100%;\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  padding-top: ${props => props.theme.sectonContentPadding};\n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: center;\n  }\n`;\n\nexport const SectionListFixed = styled.div.attrs({\n  className: 'site-section__list-fixed'\n})`\n  width: 100%;\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  padding-top: ${props => props.theme.sectonContentPadding};\n`;\n\nexport const SectionListLeft = styled.div.attrs({\n  className: 'site-section__list-left'\n})`\n  width: 100%;\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  padding-top: ${props => props.theme.sectonContentPadding};\n  @media (max-width: 1024px) {\n    margin-left: 450px;\n  }\n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: left;\n    margin-left: 100px;\n  }\n`;\n\nexport const SectionListColumn = styled.div.attrs({\n  className: 'site-section__list__column'\n})`\n  max-width: 460px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin-left: 40px;\n  margin-bottom: 40px;\n`;\n*/\n","import isBrowser from './utils/is-browser';\nimport { global } from './utils/globals';\nimport log from './utils/log'; // TODO - when webgl2 gets ubiquitous, remove default support for webgl1 by dropping next line\n\nimport './webgl1'; // Version detection using babel plugin\n\n/* global __VERSION__ */\n\nvar VERSION = typeof \"6.4.3\" !== 'undefined' ? \"6.4.3\" : 'untranspiled source';\nvar STARTUP_MESSAGE = 'set luma.log.priority=1 (or higher) to trace rendering'; // Assign luma.log.priority in console to control logging: \\\n// 0: none, 1: minimal, 2: verbose, 3: attribute/uniforms, 4: gl logs\n// luma.log.break[], set to gl funcs, luma.log.profile[] set to model names`;\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(global.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!global.luma) {\n  if (isBrowser) {\n    log.log(0, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  global.luma = global.luma || {\n    VERSION: VERSION,\n    version: VERSION,\n    log: log,\n    // A global stats object that various components can add information to\n    // E.g. see webgl/resource.js\n    stats: {},\n    // Keep some luma globals in a sub-object\n    // This allows us to dynamically detect if certain modules have been\n    // included (such as IO and headless) and enable related functionality,\n    // without unconditionally requiring and thus bundling big dependencies\n    // into the app.\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { global };\nexport default global.luma;","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import Texture2D from '../webgl/texture-2d';\nimport TextureCube from '../webgl/texture-cube';\nimport Texture3D from '../webgl/texture-3d';\nimport assert from 'assert'; // Clone a new texture object from a reference texture object.\n\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  var TextureType = refTexture.constructor;\n  var gl = refTexture.gl,\n      width = refTexture.width,\n      height = refTexture.height,\n      format = refTexture.format,\n      type = refTexture.type,\n      dataFormat = refTexture.dataFormat,\n      border = refTexture.border,\n      mipmaps = refTexture.mipmaps;\n  var textureOptions = Object.assign({\n    width: width,\n    height: height,\n    format: format,\n    type: type,\n    dataFormat: dataFormat,\n    border: border,\n    mipmaps: mipmaps\n  }, overrides); // TODO: move this to `Texture` class as instance method and use this.constructor\n\n  return new TextureType(gl, textureOptions);\n}","import assert from '../utils/assert';\nimport log from '../utils/log'; // Resolve a WebGL enumeration name (returns itself if already a number)\n\nexport function getKeyValue(gl, name) {\n  // If not a string, return (assume number)\n  if (typeof name !== 'string') {\n    return name;\n  } // If string converts to number, return number\n\n\n  var number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  } // Look up string, after removing any 'GL.' or 'gl.' prefix\n\n\n  name = name.replace(/^.*\\./, '');\n  var value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n} // Public methods\n// Resolve a WebGL enumeration name (returns itself if already a number)\n// TODO - unify with methods above\n\nexport function glGet(gl, name) {\n  if (!name) {\n    log.removed('glGet(name)', 'glGet(gl, name)', '6.0')();\n  }\n\n  return getKeyValue(gl, name);\n}\nexport function glKey(gl, value) {\n  if (value === undefined) {\n    log.removed('glKey(value)', 'glKey(gl, value)', '6.0')();\n  }\n\n  return getKey(gl, value);\n}\nexport function glKeyType(gl, value) {\n  if (value === undefined) {\n    log.removed('glKeyType(value)', 'glKeyType(gl, value)', '6.0')();\n  }\n\n  return getKeyType(gl, value);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = installDebugger;\n\nvar _debugParameters = require(\"./webgl-debug/debug-parameters\"); // Expose Khronos Debug support module on global context\n\n/* global window, global */\n\n\nvar WebGLDebug = require('webgl-debug');\n\nvar global_ = typeof global !== 'undefined' ? global : window;\nglobal_.WebGLDebug = WebGLDebug;\nconsole.log('luma.gl: WebGL debug support imported'); // eslint-disable-line\n// eslint-disable-next-line\n\nfunction installDebugger() {\n  (0, _debugParameters.installParameterDefinitions)();\n  console.log('luma.gl: WebGL debug support installed'); // eslint-disable-line\n}","import { window } from './globals'; // opts allows user agent to be overridden for testing\n\nexport default function isOldIE() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var navigator = window.navigator || {};\n  var userAgent = opts.userAgent || navigator.userAgent || ''; // We only care about older versions of IE (IE 11 and below). Newer versions of IE (Edge)\n  // have much better web standards support.\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n}; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\nvar isBrowser = typeof window !== 'undefined' && window.addEventListener;\nvar timers = new Map();\n/**\n * Ready check for Seer initialization\n *\n * @returns {Boolean}\n */\n\nvar isReady = function isReady() {\n  return isBrowser && window.__SEER_INITIALIZED__;\n};\n/**\n * Utility method allowing to throttle a user action based on a key and a minimun delay.\n *\n * @param key {String} A unique key\n * @param delay {Number} The minimal delay to throttle\n * @returns {Boolean}\n */\n\n\nvar throttle = function throttle(key, delay) {\n  var time = timers.get(key);\n  var now = Date.now();\n\n  if (time && now - time < delay) {\n    return true;\n  }\n\n  timers.set(key, now);\n  return false;\n};\n\nvar replacer = function replacer(seen) {\n  return function (key, value) {\n    if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && seen.has(value)) {\n      return;\n    }\n\n    seen.add(value);\n    var isArray = Object.prototype.toString.call(value).slice(8, -1).includes('Array');\n\n    if (isArray) {\n      return Array.prototype.slice.call(value, 0, 20);\n    }\n\n    return value;\n  };\n};\n/**\n * Low-level api leveraging window.postMessage\n *\n * @param type {String} The action type\n * @param payload {Any} The action payload\n */\n\n\nvar send = function send(type) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isBrowser || !isReady()) {\n    return;\n  }\n\n  var seen = new Set();\n  var payload = JSON.stringify(data, replacer(seen));\n\n  try {\n    window.postMessage({\n      type: type,\n      payload: payload,\n      source: 'seer-agent'\n    }, '*');\n  } catch (e) {\n    if (throttle('seer-log', 2E3)) {\n      return;\n    }\n\n    console.log(e); // eslint-disable-line\n  }\n};\n\nvar listeners = new Map();\n\nvar listener = function listener(message) {\n  if (!message || !message.data || message.data.source !== 'seer-core') {\n    return;\n  }\n\n  var _message$data = message.data,\n      type = _message$data.type,\n      payload = _message$data.payload;\n  var typeListeners = listeners.get(type);\n\n  if (typeListeners) {\n    typeListeners.forEach(function (cb) {\n      return cb(payload);\n    });\n  }\n};\n/**\n * Initilize window listener. There will be only one for the whole process\n * to prevent too many registrations.\n *\n * This method will be called automatically if you use the `listenFor` method.\n */\n\n\nvar init = function init() {\n  if (!isBrowser || window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.addEventListener('message', listener);\n  window.__SEER_LISTENER__ = true;\n};\n/**\n * Clean listener. Can be useful in case you want to unregister upcoming events\n * or liberate memory.\n */\n\n\nvar clean = function clean() {\n  if (!isBrowser || !window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.removeEventListener('message', listener);\n  delete window.__SEER_LISTENER__;\n};\n/**\n * Create a listener that will be called upon events of the given key.\n *\n * @param key {String} The unique tab key\n * @param cb {Function} A callback that will receive the message payload\n */\n\n\nvar listenFor = function listenFor(type, cb) {\n  if (!isBrowser) {\n    return;\n  }\n\n  if (!type || !cb) {\n    throw new Error('Please provide a type and callback');\n  }\n\n  if (!listeners.has(type)) {\n    listeners.set(type, []);\n  }\n\n  if (!window.__SEER_LISTENER__) {\n    init();\n  }\n\n  listeners.get(type).push(cb);\n};\n/**\n * Remove an identity listener\n *\n * @param cb {Function} The callback to remove\n */\n\n\nvar removeListener = function removeListener(cb) {\n  listeners.forEach(function (typeListeners, key) {\n    listeners.set(key, typeListeners.filter(function (l) {\n      return l !== cb;\n    }));\n  });\n};\n/**\n * Creates a new indexed list.\n * It works by index to get O(1) accessing and performance.\n *\n * @param key {String} The key of the tab\n * @param data {Object} The indexed object\n */\n\n\nvar list = function list(key, data) {\n  return send('LIST', {\n    key: key,\n    data: data\n  });\n};\n/**\n * Creates an element in the indexed list, based on the itemKey.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param data {Any} The value of the item\n */\n\n\nvar listItem = function listItem(key, itemKey) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return send('LIST_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    data: data\n  });\n};\n/**\n * Update an item property, can be deeply nested.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param path {String} The path of the variable you want to update\n * @param data {Object} The new value\n */\n\n\nvar updateItem = function updateItem(key, itemKey, path, data) {\n  return send('UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    path: path,\n    data: data\n  });\n};\n/**\n * Similar to updateItem, but allows to pass an array with {path,data} pairs for\n * multiple update of the same item without having to send multiple messages.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param array {Array} The array of updates\n * @param array.path {String} The path for this update\n * @param array.data {Object} The value of this update\n */\n\n\nvar multiUpdate = function multiUpdate(key, itemKey, array) {\n  return send('MULTI_UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    array: array\n  });\n};\n/**\n * Remove a specific item in a specific tab.\n *\n * @param key {String} They key of the tab\n * @param itemKey {String} The key of the item\n */\n\n\nvar deleteItem = function deleteItem(key, itemKey) {\n  return send('DELETE_ITEM', {\n    key: key,\n    itemKey: itemKey\n  });\n};\n/**\n * Will create a log message to an item, that will be displayde with the current time.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param msg {String} The message to display\n */\n\n\nvar addLog = function addLog(key, itemKey, msg) {\n  return send('ADD_LOG', {\n    key: key,\n    itemKey: itemKey,\n    msg: msg\n  });\n};\n\nexports.default = {\n  send: send,\n  throttle: throttle,\n  isReady: isReady,\n  list: list,\n  listItem: listItem,\n  updateItem: updateItem,\n  multiUpdate: multiUpdate,\n  deleteItem: deleteItem,\n  addLog: addLog,\n  listeners: listeners,\n  listenFor: listenFor,\n  removeListener: removeListener,\n  init: init,\n  clean: clean\n};","import assert from './assert';\nvar uidCounters = {};\n/**\n * Returns a UID.\n * @param {String} id= - Identifier base name\n * @return {number} uid\n **/\n\nexport function uid() {\n  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id';\n  uidCounters[id] = uidCounters[id] || 1;\n  var count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\n/**\n * Verifies if a given number is power of two or not.\n * @param {object} n - The number to check.\n * @return {Array} Returns true if the given number is power of 2, false otherwise.\n **/\n\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n} // Returns true if given object is empty, false otherwise.\n\nexport function isObjectEmpty(obj) {\n  var isEmpty = true;\n  /* eslint-disable no-unused-vars  */\n\n  for (var key in obj) {\n    isEmpty = false;\n    break;\n  }\n  /* eslint-enable no-unused-vars  */\n\n\n  return isEmpty;\n}","// TODO / DEPRECATED - delete when confident that probe.gl logging implements all opts\n\n/* eslint-disable no-console */\nfunction formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","// Recommendation is to ignore message but current test suite checks agains the\n// message so keep it for now.\nexport default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import log from './log'; // Install stubs for removed methods\n\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  var upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide\");\n  var prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(function (methodName) {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = function () {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage);\n      throw new Error(methodName);\n    };\n  });\n}","/* global self, window, global, document */\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\"; // Support for listening to context state changes and intercepting state queries\n//\n// NOTE: this system does not handle buffer bindings\n\nimport { setParameters, getParameters, GL_PARAMETER_DEFAULTS } from './set-parameters';\nimport assert from '../utils/assert';\nexport var clone = function clone(x) {\n  return Array.isArray(x) || ArrayBuffer.isView(x) ? x.slice() : x;\n};\nexport var deepEqual = function deepEqual(x, y) {\n  var isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  var isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (var i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return x === y;\n}; // interceptors for WEBGL FUNCTIONS that set WebGLRenderingContext state\n// These \"setters\" map functions to gl parameters\n\nexport var GL_STATE_SETTERS = {\n  // GENERIC SETTERS\n  enable: function enable(update, cap) {\n    return update(_defineProperty({}, cap, true));\n  },\n  disable: function disable(update, cap) {\n    return update(_defineProperty({}, cap, false));\n  },\n  pixelStorei: function pixelStorei(update, pname, param) {\n    return update(_defineProperty({}, pname, param));\n  },\n  hint: function hint(update, pname, _hint) {\n    return update(_defineProperty({}, pname, _hint));\n  },\n  // SPECIFIC SETTERS\n  bindFramebuffer: function bindFramebuffer(update, target, fb) {\n    var _update5;\n\n    switch (target) {\n      case 36160:\n        return update((_update5 = {}, _defineProperty(_update5, 36006, fb), _defineProperty(_update5, 36010, fb), _update5));\n\n      case 36009:\n        return update(_defineProperty({}, 36006, fb));\n\n      case 36008:\n        return update(_defineProperty({}, 36010, fb));\n\n      default:\n        return null;\n    }\n  },\n  blendColor: function blendColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 32773, new Float32Array([r, g, b, a])));\n  },\n  blendEquation: function blendEquation(update, mode) {\n    var _update9;\n\n    return update((_update9 = {}, _defineProperty(_update9, 32777, mode), _defineProperty(_update9, 34877, mode), _update9));\n  },\n  blendEquationSeparate: function blendEquationSeparate(update, modeRGB, modeAlpha) {\n    var _update10;\n\n    return update((_update10 = {}, _defineProperty(_update10, 32777, modeRGB), _defineProperty(_update10, 34877, modeAlpha), _update10));\n  },\n  blendFunc: function blendFunc(update, src, dst) {\n    var _update11;\n\n    return update((_update11 = {}, _defineProperty(_update11, 32969, src), _defineProperty(_update11, 32968, dst), _defineProperty(_update11, 32971, src), _defineProperty(_update11, 32970, dst), _update11));\n  },\n  blendFuncSeparate: function blendFuncSeparate(update, srcRGB, dstRGB, srcAlpha, dstAlpha) {\n    var _update12;\n\n    return update((_update12 = {}, _defineProperty(_update12, 32969, srcRGB), _defineProperty(_update12, 32968, dstRGB), _defineProperty(_update12, 32971, srcAlpha), _defineProperty(_update12, 32970, dstAlpha), _update12));\n  },\n  clearColor: function clearColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 3106, new Float32Array([r, g, b, a])));\n  },\n  clearDepth: function clearDepth(update, depth) {\n    return update(_defineProperty({}, 2931, depth));\n  },\n  clearStencil: function clearStencil(update, s) {\n    return update(_defineProperty({}, 2961, s));\n  },\n  colorMask: function colorMask(update, r, g, b, a) {\n    return update(_defineProperty({}, 3107, [r, g, b, a]));\n  },\n  cullFace: function cullFace(update, mode) {\n    return update(_defineProperty({}, 2885, mode));\n  },\n  depthFunc: function depthFunc(update, func) {\n    return update(_defineProperty({}, 2932, func));\n  },\n  depthRange: function depthRange(update, zNear, zFar) {\n    return update(_defineProperty({}, 2928, new Float32Array([zNear, zFar])));\n  },\n  depthMask: function depthMask(update, mask) {\n    return update(_defineProperty({}, 2930, mask));\n  },\n  frontFace: function frontFace(update, face) {\n    return update(_defineProperty({}, 2886, face));\n  },\n  lineWidth: function lineWidth(update, width) {\n    return update(_defineProperty({}, 2849, width));\n  },\n  polygonOffset: function polygonOffset(update, factor, units) {\n    var _update23;\n\n    return update((_update23 = {}, _defineProperty(_update23, 32824, factor), _defineProperty(_update23, 10752, units), _update23));\n  },\n  sampleCoverage: function sampleCoverage(update, value, invert) {\n    var _update24;\n\n    return update((_update24 = {}, _defineProperty(_update24, 32938, value), _defineProperty(_update24, 32939, invert), _update24));\n  },\n  scissor: function scissor(update, x, y, width, height) {\n    return update(_defineProperty({}, 3088, new Int32Array([x, y, width, height])));\n  },\n  stencilMask: function stencilMask(update, mask) {\n    var _update26;\n\n    return update((_update26 = {}, _defineProperty(_update26, 2968, mask), _defineProperty(_update26, 36005, mask), _update26));\n  },\n  stencilMaskSeparate: function stencilMaskSeparate(update, face, mask) {\n    return update(_defineProperty({}, face === 1028 ? 2968 : 36005, mask));\n  },\n  stencilFunc: function stencilFunc(update, func, ref, mask) {\n    var _update28;\n\n    return update((_update28 = {}, _defineProperty(_update28, 2962, func), _defineProperty(_update28, 2967, ref), _defineProperty(_update28, 2963, mask), _defineProperty(_update28, 34816, func), _defineProperty(_update28, 36003, ref), _defineProperty(_update28, 36004, mask), _update28));\n  },\n  stencilFuncSeparate: function stencilFuncSeparate(update, face, func, ref, mask) {\n    var _update29;\n\n    return update((_update29 = {}, _defineProperty(_update29, face === 1028 ? 2962 : 34816, func), _defineProperty(_update29, face === 1028 ? 2967 : 36003, ref), _defineProperty(_update29, face === 1028 ? 2963 : 36004, mask), _update29));\n  },\n  stencilOp: function stencilOp(update, fail, zfail, zpass) {\n    var _update30;\n\n    return update((_update30 = {}, _defineProperty(_update30, 2964, fail), _defineProperty(_update30, 2965, zfail), _defineProperty(_update30, 2966, zpass), _defineProperty(_update30, 34817, fail), _defineProperty(_update30, 34818, zfail), _defineProperty(_update30, 34819, zpass), _update30));\n  },\n  stencilOpSeparate: function stencilOpSeparate(update, face, fail, zfail, zpass) {\n    var _update31;\n\n    return update((_update31 = {}, _defineProperty(_update31, face === 1028 ? 2964 : 34817, fail), _defineProperty(_update31, face === 1028 ? 2965 : 34818, zfail), _defineProperty(_update31, face === 1028 ? 2966 : 34819, zpass), _update31));\n  },\n  viewport: function viewport(update, x, y, width, height) {\n    return update(_defineProperty({}, 2978, new Int32Array([x, y, width, height])));\n  }\n}; // HELPER FUNCTIONS - INSTALL GET/SET INTERCEPTORS (SPYS) ON THE CONTEXT\n// Overrides a WebGLRenderingContext state \"getter\" function\n// to return values directly from cache\n\nfunction installGetterOverride(gl, functionName) {\n  // Get the original function from the WebGLRenderingContext\n  var originalGetterFunc = gl[functionName].bind(gl); // Wrap it with a spy so that we can update our state cache when it gets called\n\n  gl[functionName] = function get() {\n    var pname = arguments.length <= 0 ? undefined : arguments[0]; // WebGL limits are not prepopulated in the cache, we must\n    // query first time. They are all primitive (single value)\n\n    if (!(pname in gl.state.cache)) {\n      gl.state.cache[pname] = originalGetterFunc.apply(void 0, arguments);\n    } // Optionally call the original function to do a \"hard\" query from the WebGLRenderingContext\n\n\n    return gl.state.enable ? // Call the getter the params so that it can e.g. serve from a cache\n    gl.state.cache[pname] : // Optionally call the original function to do a \"hard\" query from the WebGLRenderingContext\n    originalGetterFunc.apply(void 0, arguments);\n  }; // Set the name of this anonymous function to help in debugging and profiling\n\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n} // Overrides a WebGLRenderingContext state \"setter\" function\n// to call a setter spy before the actual setter. Allows us to keep a cache\n// updated with a copy of the WebGL context state.\n\n\nfunction installSetterSpy(gl, functionName, setter) {\n  // Get the original function from the WebGLRenderingContext\n  var originalSetterFunc = gl[functionName].bind(gl); // Wrap it with a spy so that we can update our state cache when it gets called\n\n  gl[functionName] = function set() {\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    } // Update the value\n    // Call the setter with the state cache and the params so that it can store the parameters\n\n\n    var _setter = setter.apply(void 0, [gl.state._updateCache].concat(params)),\n        valueChanged = _setter.valueChanged,\n        oldValue = _setter.oldValue; // Call the original WebGLRenderingContext func to make sure the context actually gets updated\n\n\n    if (valueChanged) {\n      var _gl$state;\n\n      (_gl$state = gl.state).log.apply(_gl$state, [\"gl.\".concat(functionName)].concat(params)); // eslint-disable-line\n\n\n      originalSetterFunc.apply(void 0, params);\n    } // Note: if the original function fails to set the value, our state cache will be bad\n    // No solution for this at the moment, but assuming that this is unlikely to be a real problem\n    // We could call the setter after the originalSetterFunc. Concern is that this would\n    // cause different behavior in debug mode, where originalSetterFunc can throw exceptions\n\n\n    return oldValue;\n  }; // Set the name of this anonymous function to help in debugging and profiling\n\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n} // HELPER CLASS - GLState\n\n/* eslint-disable no-shadow */\n\n\nvar GLState = /*#__PURE__*/function () {\n  function GLState(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$copyState = _ref.copyState,\n        copyState = _ref$copyState === void 0 ? false : _ref$copyState,\n        _ref$log = _ref.log,\n        log = _ref$log === void 0 ? function () {} : _ref$log;\n\n    _classCallCheck(this, GLState);\n\n    this.gl = gl;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(GLState, [{\n    key: \"push\",\n    value: function push() {\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.stateStack.push({});\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      assert(this.stateStack.length > 0); // Use the saved values in the state stack to restore parameters\n\n      var oldValues = this.stateStack[this.stateStack.length - 1];\n      setParameters(this.gl, oldValues, this.cache); // Don't pop until we have reset parameters (to make sure other \"stack frames\" are not affected)\n\n      this.stateStack.pop();\n    } // interceptor for context set functions - update our cache and our stack\n    // values (Object) - the key values for this setter\n\n  }, {\n    key: \"_updateCache\",\n    value: function _updateCache(values) {\n      var valueChanged = false;\n      var oldValue; // = undefined\n\n      var oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n      for (var key in values) {\n        assert(key !== undefined); // Check that value hasn't already been shadowed\n\n        if (!deepEqual(values[key], this.cache[key])) {\n          valueChanged = true;\n          oldValue = this.cache[key]; // First, save current value being shadowed\n          // If a state stack frame is active, save the current parameter values for pop\n          // but first check that value hasn't already been shadowed and saved\n\n          if (oldValues && !(key in oldValues)) {\n            oldValues[key] = this.cache[key];\n          } // Save current value being shadowed\n\n\n          this.cache[key] = values[key];\n        }\n      }\n\n      return {\n        valueChanged: valueChanged,\n        oldValue: oldValue\n      };\n    }\n  }]);\n\n  return GLState;\n}(); // PUBLIC API\n\n/**\n * Initialize WebGL state caching on a context\n * can be called multiple times to enable/disable\n * @param {WebGLRenderingContext} - context\n */\n// After calling this function, context state will be cached\n// gl.state.push() and gl.state.pop() will be available for saving,\n// temporarily modifying, and then restoring state.\n\n\nexport default function trackContextState(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$enable = _ref2.enable,\n      enable = _ref2$enable === void 0 ? true : _ref2$enable,\n      copyState = _ref2.copyState;\n\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    /* global window, global */\n    var global_ = typeof global !== 'undefined' ? global : window;\n\n    if (global_.polyfillContext) {\n      global_.polyfillContext(gl);\n    } // Create a state cache\n\n\n    gl.state = new GLState(gl, {\n      copyState: copyState,\n      enable: enable\n    }); // intercept all setter functions in the table\n\n    for (var key in GL_STATE_SETTERS) {\n      var setter = GL_STATE_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    } // intercept all getter functions in the table\n\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\"; // This function is needed in initialization stages,\n// make sure it can be imported in isolation\n\n/* global process */\n\nimport isElectron from './is-electron';\nvar isNode = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && String(process) === '[object process]' && !process.browser;\nvar isBrowser = !isNode || isElectron; // document does not exist on worker thread\n\nexport var isBrowserMainThread = isBrowser && typeof document !== 'undefined';\nexport default isBrowser;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/*\n** Copyright (c) 2012 The Khronos Group Inc.\n**\n** Permission is hereby granted, free of charge, to any person obtaining a\n** copy of this software and/or associated documentation files (the\n** \"Materials\"), to deal in the Materials without restriction, including\n** without limitation the rights to use, copy, modify, merge, publish,\n** distribute, sublicense, and/or sell copies of the Materials, and to\n** permit persons to whom the Materials are furnished to do so, subject to\n** the following conditions:\n**\n** The above copyright notice and this permission notice shall be included\n** in all copies or substantial portions of the Materials.\n**\n** THE MATERIALS ARE PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n** EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n** MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n** IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n** CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n** TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n** MATERIALS OR THE USE OR OTHER DEALINGS IN THE MATERIALS.\n*/\n//Ported to node by Marcin Ignac on 2016-05-20\n// Various functions for helping debug WebGL apps.\nWebGLDebugUtils = function () {\n  var window; //polyfill window in node\n\n  if (typeof window == 'undefined') {\n    window = global;\n  }\n  /**\n   * Wrapped logging function.\n   * @param {string} msg Message to log.\n   */\n\n\n  var log = function log(msg) {\n    if (window.console && window.console.log) {\n      window.console.log(msg);\n    }\n  };\n  /**\n   * Wrapped error logging function.\n   * @param {string} msg Message to log.\n   */\n\n\n  var error = function error(msg) {\n    if (window.console && window.console.error) {\n      window.console.error(msg);\n    } else {\n      log(msg);\n    }\n  };\n  /**\n   * Which arguments are enums based on the number of arguments to the function.\n   * So\n   *    'texImage2D': {\n   *       9: { 0:true, 2:true, 6:true, 7:true },\n   *       6: { 0:true, 2:true, 3:true, 4:true },\n   *    },\n   *\n   * means if there are 9 arguments then 6 and 7 are enums, if there are 6\n   * arguments 3 and 4 are enums\n   *\n   * @type {!Object.<number, !Object.<number, string>}\n   */\n\n\n  var glValidEnumContexts = {\n    // Generic setters and getters\n    'enable': {\n      1: {\n        0: true\n      }\n    },\n    'disable': {\n      1: {\n        0: true\n      }\n    },\n    'getParameter': {\n      1: {\n        0: true\n      }\n    },\n    // Rendering\n    'drawArrays': {\n      3: {\n        0: true\n      }\n    },\n    'drawElements': {\n      4: {\n        0: true,\n        2: true\n      }\n    },\n    // Shaders\n    'createShader': {\n      1: {\n        0: true\n      }\n    },\n    'getShaderParameter': {\n      2: {\n        1: true\n      }\n    },\n    'getProgramParameter': {\n      2: {\n        1: true\n      }\n    },\n    'getShaderPrecisionFormat': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    // Vertex attributes\n    'getVertexAttrib': {\n      2: {\n        1: true\n      }\n    },\n    'vertexAttribPointer': {\n      6: {\n        2: true\n      }\n    },\n    // Textures\n    'bindTexture': {\n      2: {\n        0: true\n      }\n    },\n    'activeTexture': {\n      1: {\n        0: true\n      }\n    },\n    'getTexParameter': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    'texParameterf': {\n      3: {\n        0: true,\n        1: true\n      }\n    },\n    'texParameteri': {\n      3: {\n        0: true,\n        1: true,\n        2: true\n      }\n    },\n    // texImage2D and texSubImage2D are defined below with WebGL 2 entrypoints\n    'copyTexImage2D': {\n      8: {\n        0: true,\n        2: true\n      }\n    },\n    'copyTexSubImage2D': {\n      8: {\n        0: true\n      }\n    },\n    'generateMipmap': {\n      1: {\n        0: true\n      }\n    },\n    // compressedTexImage2D and compressedTexSubImage2D are defined below with WebGL 2 entrypoints\n    // Buffer objects\n    'bindBuffer': {\n      2: {\n        0: true\n      }\n    },\n    // bufferData and bufferSubData are defined below with WebGL 2 entrypoints\n    'getBufferParameter': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    // Renderbuffers and framebuffers\n    'pixelStorei': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    // readPixels is defined below with WebGL 2 entrypoints\n    'bindRenderbuffer': {\n      2: {\n        0: true\n      }\n    },\n    'bindFramebuffer': {\n      2: {\n        0: true\n      }\n    },\n    'checkFramebufferStatus': {\n      1: {\n        0: true\n      }\n    },\n    'framebufferRenderbuffer': {\n      4: {\n        0: true,\n        1: true,\n        2: true\n      }\n    },\n    'framebufferTexture2D': {\n      5: {\n        0: true,\n        1: true,\n        2: true\n      }\n    },\n    'getFramebufferAttachmentParameter': {\n      3: {\n        0: true,\n        1: true,\n        2: true\n      }\n    },\n    'getRenderbufferParameter': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    'renderbufferStorage': {\n      4: {\n        0: true,\n        1: true\n      }\n    },\n    // Frame buffer operations (clear, blend, depth test, stencil)\n    'clear': {\n      1: {\n        0: {\n          'enumBitwiseOr': ['COLOR_BUFFER_BIT', 'DEPTH_BUFFER_BIT', 'STENCIL_BUFFER_BIT']\n        }\n      }\n    },\n    'depthFunc': {\n      1: {\n        0: true\n      }\n    },\n    'blendFunc': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    'blendFuncSeparate': {\n      4: {\n        0: true,\n        1: true,\n        2: true,\n        3: true\n      }\n    },\n    'blendEquation': {\n      1: {\n        0: true\n      }\n    },\n    'blendEquationSeparate': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    'stencilFunc': {\n      3: {\n        0: true\n      }\n    },\n    'stencilFuncSeparate': {\n      4: {\n        0: true,\n        1: true\n      }\n    },\n    'stencilMaskSeparate': {\n      2: {\n        0: true\n      }\n    },\n    'stencilOp': {\n      3: {\n        0: true,\n        1: true,\n        2: true\n      }\n    },\n    'stencilOpSeparate': {\n      4: {\n        0: true,\n        1: true,\n        2: true,\n        3: true\n      }\n    },\n    // Culling\n    'cullFace': {\n      1: {\n        0: true\n      }\n    },\n    'frontFace': {\n      1: {\n        0: true\n      }\n    },\n    // ANGLE_instanced_arrays extension\n    'drawArraysInstancedANGLE': {\n      4: {\n        0: true\n      }\n    },\n    'drawElementsInstancedANGLE': {\n      5: {\n        0: true,\n        2: true\n      }\n    },\n    // EXT_blend_minmax extension\n    'blendEquationEXT': {\n      1: {\n        0: true\n      }\n    },\n    // WebGL 2 Buffer objects\n    'bufferData': {\n      3: {\n        0: true,\n        2: true\n      },\n      // WebGL 1\n      4: {\n        0: true,\n        2: true\n      },\n      // WebGL 2\n      5: {\n        0: true,\n        2: true\n      } // WebGL 2\n\n    },\n    'bufferSubData': {\n      3: {\n        0: true\n      },\n      // WebGL 1\n      4: {\n        0: true\n      },\n      // WebGL 2\n      5: {\n        0: true\n      } // WebGL 2\n\n    },\n    'copyBufferSubData': {\n      5: {\n        0: true,\n        1: true\n      }\n    },\n    'getBufferSubData': {\n      3: {\n        0: true\n      },\n      4: {\n        0: true\n      },\n      5: {\n        0: true\n      }\n    },\n    // WebGL 2 Framebuffer objects\n    'blitFramebuffer': {\n      10: {\n        8: {\n          'enumBitwiseOr': ['COLOR_BUFFER_BIT', 'DEPTH_BUFFER_BIT', 'STENCIL_BUFFER_BIT']\n        },\n        9: true\n      }\n    },\n    'framebufferTextureLayer': {\n      5: {\n        0: true,\n        1: true\n      }\n    },\n    'invalidateFramebuffer': {\n      2: {\n        0: true\n      }\n    },\n    'invalidateSubFramebuffer': {\n      6: {\n        0: true\n      }\n    },\n    'readBuffer': {\n      1: {\n        0: true\n      }\n    },\n    // WebGL 2 Renderbuffer objects\n    'getInternalformatParameter': {\n      3: {\n        0: true,\n        1: true,\n        2: true\n      }\n    },\n    'renderbufferStorageMultisample': {\n      5: {\n        0: true,\n        2: true\n      }\n    },\n    // WebGL 2 Texture objects\n    'texStorage2D': {\n      5: {\n        0: true,\n        2: true\n      }\n    },\n    'texStorage3D': {\n      6: {\n        0: true,\n        2: true\n      }\n    },\n    'texImage2D': {\n      9: {\n        0: true,\n        2: true,\n        6: true,\n        7: true\n      },\n      // WebGL 1 & 2\n      6: {\n        0: true,\n        2: true,\n        3: true,\n        4: true\n      },\n      // WebGL 1\n      10: {\n        0: true,\n        2: true,\n        6: true,\n        7: true\n      } // WebGL 2\n\n    },\n    'texImage3D': {\n      10: {\n        0: true,\n        2: true,\n        7: true,\n        8: true\n      },\n      11: {\n        0: true,\n        2: true,\n        7: true,\n        8: true\n      }\n    },\n    'texSubImage2D': {\n      9: {\n        0: true,\n        6: true,\n        7: true\n      },\n      // WebGL 1 & 2\n      7: {\n        0: true,\n        4: true,\n        5: true\n      },\n      // WebGL 1\n      10: {\n        0: true,\n        6: true,\n        7: true\n      } // WebGL 2\n\n    },\n    'texSubImage3D': {\n      11: {\n        0: true,\n        8: true,\n        9: true\n      },\n      12: {\n        0: true,\n        8: true,\n        9: true\n      }\n    },\n    'copyTexSubImage3D': {\n      9: {\n        0: true\n      }\n    },\n    'compressedTexImage2D': {\n      7: {\n        0: true,\n        2: true\n      },\n      // WebGL 1 & 2\n      8: {\n        0: true,\n        2: true\n      },\n      // WebGL 2\n      9: {\n        0: true,\n        2: true\n      } // WebGL 2\n\n    },\n    'compressedTexImage3D': {\n      8: {\n        0: true,\n        2: true\n      },\n      9: {\n        0: true,\n        2: true\n      },\n      10: {\n        0: true,\n        2: true\n      }\n    },\n    'compressedTexSubImage2D': {\n      8: {\n        0: true,\n        6: true\n      },\n      // WebGL 1 & 2\n      9: {\n        0: true,\n        6: true\n      },\n      // WebGL 2\n      10: {\n        0: true,\n        6: true\n      } // WebGL 2\n\n    },\n    'compressedTexSubImage3D': {\n      10: {\n        0: true,\n        8: true\n      },\n      11: {\n        0: true,\n        8: true\n      },\n      12: {\n        0: true,\n        8: true\n      }\n    },\n    // WebGL 2 Vertex attribs\n    'vertexAttribIPointer': {\n      5: {\n        2: true\n      }\n    },\n    // WebGL 2 Writing to the drawing buffer\n    'drawArraysInstanced': {\n      4: {\n        0: true\n      }\n    },\n    'drawElementsInstanced': {\n      5: {\n        0: true,\n        2: true\n      }\n    },\n    'drawRangeElements': {\n      6: {\n        0: true,\n        4: true\n      }\n    },\n    // WebGL 2 Reading back pixels\n    'readPixels': {\n      7: {\n        4: true,\n        5: true\n      },\n      // WebGL 1 & 2\n      8: {\n        4: true,\n        5: true\n      } // WebGL 2\n\n    },\n    // WebGL 2 Multiple Render Targets\n    'clearBufferfv': {\n      3: {\n        0: true\n      },\n      4: {\n        0: true\n      }\n    },\n    'clearBufferiv': {\n      3: {\n        0: true\n      },\n      4: {\n        0: true\n      }\n    },\n    'clearBufferuiv': {\n      3: {\n        0: true\n      },\n      4: {\n        0: true\n      }\n    },\n    'clearBufferfi': {\n      4: {\n        0: true\n      }\n    },\n    // WebGL 2 Query objects\n    'beginQuery': {\n      2: {\n        0: true\n      }\n    },\n    'endQuery': {\n      1: {\n        0: true\n      }\n    },\n    'getQuery': {\n      2: {\n        0: true,\n        1: true\n      }\n    },\n    'getQueryParameter': {\n      2: {\n        1: true\n      }\n    },\n    // WebGL 2 Sampler objects\n    'samplerParameteri': {\n      3: {\n        1: true,\n        2: true\n      }\n    },\n    'samplerParameterf': {\n      3: {\n        1: true\n      }\n    },\n    'getSamplerParameter': {\n      2: {\n        1: true\n      }\n    },\n    // WebGL 2 Sync objects\n    'fenceSync': {\n      2: {\n        0: true,\n        1: {\n          'enumBitwiseOr': []\n        }\n      }\n    },\n    'clientWaitSync': {\n      3: {\n        1: {\n          'enumBitwiseOr': ['SYNC_FLUSH_COMMANDS_BIT']\n        }\n      }\n    },\n    'waitSync': {\n      3: {\n        1: {\n          'enumBitwiseOr': []\n        }\n      }\n    },\n    'getSyncParameter': {\n      2: {\n        1: true\n      }\n    },\n    // WebGL 2 Transform Feedback\n    'bindTransformFeedback': {\n      2: {\n        0: true\n      }\n    },\n    'beginTransformFeedback': {\n      1: {\n        0: true\n      }\n    },\n    'transformFeedbackVaryings': {\n      3: {\n        2: true\n      }\n    },\n    // WebGL2 Uniform Buffer Objects and Transform Feedback Buffers\n    'bindBufferBase': {\n      3: {\n        0: true\n      }\n    },\n    'bindBufferRange': {\n      5: {\n        0: true\n      }\n    },\n    'getIndexedParameter': {\n      2: {\n        0: true\n      }\n    },\n    'getActiveUniforms': {\n      3: {\n        2: true\n      }\n    },\n    'getActiveUniformBlockParameter': {\n      3: {\n        2: true\n      }\n    }\n  };\n  /**\n   * Map of numbers to names.\n   * @type {Object}\n   */\n\n  var glEnums = null;\n  /**\n   * Map of names to numbers.\n   * @type {Object}\n   */\n\n  var enumStringToValue = null;\n  /**\n   * Initializes this module. Safe to call more than once.\n   * @param {!WebGLRenderingContext} ctx A WebGL context. If\n   *    you have more than one context it doesn't matter which one\n   *    you pass in, it is only used to pull out constants.\n   */\n\n  function init(ctx) {\n    if (glEnums == null) {\n      glEnums = {};\n      enumStringToValue = {};\n\n      for (var propertyName in ctx) {\n        if (typeof ctx[propertyName] == 'number') {\n          glEnums[ctx[propertyName]] = propertyName;\n          enumStringToValue[propertyName] = ctx[propertyName];\n        }\n      }\n    }\n  }\n  /**\n   * Checks the utils have been initialized.\n   */\n\n\n  function checkInit() {\n    if (glEnums == null) {\n      throw 'WebGLDebugUtils.init(ctx) not called';\n    }\n  }\n  /**\n   * Returns true or false if value matches any WebGL enum\n   * @param {*} value Value to check if it might be an enum.\n   * @return {boolean} True if value matches one of the WebGL defined enums\n   */\n\n\n  function mightBeEnum(value) {\n    checkInit();\n    return glEnums[value] !== undefined;\n  }\n  /**\n   * Gets an string version of an WebGL enum.\n   *\n   * Example:\n   *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\n   *\n   * @param {number} value Value to return an enum for\n   * @return {string} The string version of the enum.\n   */\n\n\n  function glEnumToString(value) {\n    checkInit();\n    var name = glEnums[value];\n    return name !== undefined ? \"gl.\" + name : \"/*UNKNOWN WebGL ENUM*/ 0x\" + value.toString(16) + \"\";\n  }\n  /**\n   * Returns the string version of a WebGL argument.\n   * Attempts to convert enum arguments to strings.\n   * @param {string} functionName the name of the WebGL function.\n   * @param {number} numArgs the number of arguments passed to the function.\n   * @param {number} argumentIndx the index of the argument.\n   * @param {*} value The value of the argument.\n   * @return {string} The value as a string.\n   */\n\n\n  function glFunctionArgToString(functionName, numArgs, argumentIndex, value) {\n    var funcInfo = glValidEnumContexts[functionName];\n\n    if (funcInfo !== undefined) {\n      var funcInfo = funcInfo[numArgs];\n\n      if (funcInfo !== undefined) {\n        if (funcInfo[argumentIndex]) {\n          if (typeof funcInfo[argumentIndex] === 'object' && funcInfo[argumentIndex]['enumBitwiseOr'] !== undefined) {\n            var enums = funcInfo[argumentIndex]['enumBitwiseOr'];\n            var orResult = 0;\n            var orEnums = [];\n\n            for (var i = 0; i < enums.length; ++i) {\n              var enumValue = enumStringToValue[enums[i]];\n\n              if ((value & enumValue) !== 0) {\n                orResult |= enumValue;\n                orEnums.push(glEnumToString(enumValue));\n              }\n            }\n\n            if (orResult === value) {\n              return orEnums.join(' | ');\n            } else {\n              return glEnumToString(value);\n            }\n          } else {\n            return glEnumToString(value);\n          }\n        }\n      }\n    }\n\n    if (value === null) {\n      return \"null\";\n    } else if (value === undefined) {\n      return \"undefined\";\n    } else {\n      return value.toString();\n    }\n  }\n  /**\n   * Converts the arguments of a WebGL function to a string.\n   * Attempts to convert enum arguments to strings.\n   *\n   * @param {string} functionName the name of the WebGL function.\n   * @param {number} args The arguments.\n   * @return {string} The arguments as a string.\n   */\n\n\n  function glFunctionArgsToString(functionName, args) {\n    // apparently we can't do args.join(\",\");\n    var argStr = \"\";\n    var numArgs = args.length;\n\n    for (var ii = 0; ii < numArgs; ++ii) {\n      argStr += (ii == 0 ? '' : ', ') + glFunctionArgToString(functionName, numArgs, ii, args[ii]);\n    }\n\n    return argStr;\n  }\n\n  ;\n\n  function makePropertyWrapper(wrapper, original, propertyName) {\n    //log(\"wrap prop: \" + propertyName);\n    wrapper.__defineGetter__(propertyName, function () {\n      return original[propertyName];\n    }); // TODO(gmane): this needs to handle properties that take more than\n    // one value?\n\n\n    wrapper.__defineSetter__(propertyName, function (value) {\n      //log(\"set: \" + propertyName);\n      original[propertyName] = value;\n    });\n  } // Makes a function that calls a function on another object.\n\n\n  function makeFunctionWrapper(original, functionName) {\n    //log(\"wrap fn: \" + functionName);\n    var f = original[functionName];\n    return function () {\n      //log(\"call: \" + functionName);\n      var result = f.apply(original, arguments);\n      return result;\n    };\n  }\n  /**\n   * Given a WebGL context returns a wrapped context that calls\n   * gl.getError after every command and calls a function if the\n   * result is not gl.NO_ERROR.\n   *\n   * @param {!WebGLRenderingContext} ctx The webgl context to\n   *        wrap.\n   * @param {!function(err, funcName, args): void} opt_onErrorFunc\n   *        The function to call when gl.getError returns an\n   *        error. If not specified the default function calls\n   *        console.log with a message.\n   * @param {!function(funcName, args): void} opt_onFunc The\n   *        function to call when each webgl function is called.\n   *        You can use this to log all calls for example.\n   * @param {!WebGLRenderingContext} opt_err_ctx The webgl context\n   *        to call getError on if different than ctx.\n   */\n\n\n  function makeDebugContext(ctx, opt_onErrorFunc, opt_onFunc, opt_err_ctx) {\n    opt_err_ctx = opt_err_ctx || ctx;\n    init(ctx);\n\n    opt_onErrorFunc = opt_onErrorFunc || function (err, functionName, args) {\n      // apparently we can't do args.join(\",\");\n      var argStr = \"\";\n      var numArgs = args.length;\n\n      for (var ii = 0; ii < numArgs; ++ii) {\n        argStr += (ii == 0 ? '' : ', ') + glFunctionArgToString(functionName, numArgs, ii, args[ii]);\n      }\n\n      error(\"WebGL error \" + glEnumToString(err) + \" in \" + functionName + \"(\" + argStr + \")\");\n    }; // Holds booleans for each GL error so after we get the error ourselves\n    // we can still return it to the client app.\n\n\n    var glErrorShadow = {}; // Makes a function that calls a WebGL function and then calls getError.\n\n    function makeErrorWrapper(ctx, functionName) {\n      return function () {\n        if (opt_onFunc) {\n          opt_onFunc(functionName, arguments);\n        }\n\n        var result = ctx[functionName].apply(ctx, arguments);\n        var err = opt_err_ctx.getError();\n\n        if (err != 0) {\n          glErrorShadow[err] = true;\n          opt_onErrorFunc(err, functionName, arguments);\n        }\n\n        return result;\n      };\n    } // Make a an object that has a copy of every property of the WebGL context\n    // but wraps all functions.\n\n\n    var wrapper = {};\n\n    for (var propertyName in ctx) {\n      if (typeof ctx[propertyName] == 'function') {\n        if (propertyName != 'getExtension') {\n          wrapper[propertyName] = makeErrorWrapper(ctx, propertyName);\n        } else {\n          var wrapped = makeErrorWrapper(ctx, propertyName);\n\n          wrapper[propertyName] = function () {\n            var result = wrapped.apply(ctx, arguments);\n\n            if (!result) {\n              return null;\n            }\n\n            return makeDebugContext(result, opt_onErrorFunc, opt_onFunc, opt_err_ctx);\n          };\n        }\n      } else {\n        makePropertyWrapper(wrapper, ctx, propertyName);\n      }\n    } // Override the getError function with one that returns our saved results.\n\n\n    wrapper.getError = function () {\n      for (var err in glErrorShadow) {\n        if (glErrorShadow.hasOwnProperty(err)) {\n          if (glErrorShadow[err]) {\n            glErrorShadow[err] = false;\n            return err;\n          }\n        }\n      }\n\n      return ctx.NO_ERROR;\n    };\n\n    return wrapper;\n  }\n\n  function resetToInitialState(ctx) {\n    var isWebGL2RenderingContext = !!ctx.createTransformFeedback;\n\n    if (isWebGL2RenderingContext) {\n      ctx.bindVertexArray(null);\n    }\n\n    var numAttribs = ctx.getParameter(ctx.MAX_VERTEX_ATTRIBS);\n    var tmp = ctx.createBuffer();\n    ctx.bindBuffer(ctx.ARRAY_BUFFER, tmp);\n\n    for (var ii = 0; ii < numAttribs; ++ii) {\n      ctx.disableVertexAttribArray(ii);\n      ctx.vertexAttribPointer(ii, 4, ctx.FLOAT, false, 0, 0);\n      ctx.vertexAttrib1f(ii, 0);\n\n      if (isWebGL2RenderingContext) {\n        ctx.vertexAttribDivisor(ii, 0);\n      }\n    }\n\n    ctx.deleteBuffer(tmp);\n    var numTextureUnits = ctx.getParameter(ctx.MAX_TEXTURE_IMAGE_UNITS);\n\n    for (var ii = 0; ii < numTextureUnits; ++ii) {\n      ctx.activeTexture(ctx.TEXTURE0 + ii);\n      ctx.bindTexture(ctx.TEXTURE_CUBE_MAP, null);\n      ctx.bindTexture(ctx.TEXTURE_2D, null);\n\n      if (isWebGL2RenderingContext) {\n        ctx.bindTexture(ctx.TEXTURE_2D_ARRAY, null);\n        ctx.bindTexture(ctx.TEXTURE_3D, null);\n        ctx.bindSampler(ii, null);\n      }\n    }\n\n    ctx.activeTexture(ctx.TEXTURE0);\n    ctx.useProgram(null);\n    ctx.bindBuffer(ctx.ARRAY_BUFFER, null);\n    ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, null);\n    ctx.bindFramebuffer(ctx.FRAMEBUFFER, null);\n    ctx.bindRenderbuffer(ctx.RENDERBUFFER, null);\n    ctx.disable(ctx.BLEND);\n    ctx.disable(ctx.CULL_FACE);\n    ctx.disable(ctx.DEPTH_TEST);\n    ctx.disable(ctx.DITHER);\n    ctx.disable(ctx.SCISSOR_TEST);\n    ctx.blendColor(0, 0, 0, 0);\n    ctx.blendEquation(ctx.FUNC_ADD);\n    ctx.blendFunc(ctx.ONE, ctx.ZERO);\n    ctx.clearColor(0, 0, 0, 0);\n    ctx.clearDepth(1);\n    ctx.clearStencil(-1);\n    ctx.colorMask(true, true, true, true);\n    ctx.cullFace(ctx.BACK);\n    ctx.depthFunc(ctx.LESS);\n    ctx.depthMask(true);\n    ctx.depthRange(0, 1);\n    ctx.frontFace(ctx.CCW);\n    ctx.hint(ctx.GENERATE_MIPMAP_HINT, ctx.DONT_CARE);\n    ctx.lineWidth(1);\n    ctx.pixelStorei(ctx.PACK_ALIGNMENT, 4);\n    ctx.pixelStorei(ctx.UNPACK_ALIGNMENT, 4);\n    ctx.pixelStorei(ctx.UNPACK_FLIP_Y_WEBGL, false);\n    ctx.pixelStorei(ctx.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false); // TODO: Delete this IF.\n\n    if (ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL) {\n      ctx.pixelStorei(ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL, ctx.BROWSER_DEFAULT_WEBGL);\n    }\n\n    ctx.polygonOffset(0, 0);\n    ctx.sampleCoverage(1, false);\n    ctx.scissor(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.stencilFunc(ctx.ALWAYS, 0, 0xFFFFFFFF);\n    ctx.stencilMask(0xFFFFFFFF);\n    ctx.stencilOp(ctx.KEEP, ctx.KEEP, ctx.KEEP);\n    ctx.viewport(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.clear(ctx.COLOR_BUFFER_BIT | ctx.DEPTH_BUFFER_BIT | ctx.STENCIL_BUFFER_BIT);\n\n    if (isWebGL2RenderingContext) {\n      ctx.drawBuffers([ctx.BACK]);\n      ctx.readBuffer(ctx.BACK);\n      ctx.bindBuffer(ctx.COPY_READ_BUFFER, null);\n      ctx.bindBuffer(ctx.COPY_WRITE_BUFFER, null);\n      ctx.bindBuffer(ctx.PIXEL_PACK_BUFFER, null);\n      ctx.bindBuffer(ctx.PIXEL_UNPACK_BUFFER, null);\n      var numTransformFeedbacks = ctx.getParameter(ctx.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);\n\n      for (var ii = 0; ii < numTransformFeedbacks; ++ii) {\n        ctx.bindBufferBase(ctx.TRANSFORM_FEEDBACK_BUFFER, ii, null);\n      }\n\n      var numUBOs = ctx.getParameter(ctx.MAX_UNIFORM_BUFFER_BINDINGS);\n\n      for (var ii = 0; ii < numUBOs; ++ii) {\n        ctx.bindBufferBase(ctx.UNIFORM_BUFFER, ii, null);\n      }\n\n      ctx.disable(ctx.RASTERIZER_DISCARD);\n      ctx.pixelStorei(ctx.UNPACK_IMAGE_HEIGHT, 0);\n      ctx.pixelStorei(ctx.UNPACK_SKIP_IMAGES, 0);\n      ctx.pixelStorei(ctx.UNPACK_ROW_LENGTH, 0);\n      ctx.pixelStorei(ctx.UNPACK_SKIP_ROWS, 0);\n      ctx.pixelStorei(ctx.UNPACK_SKIP_PIXELS, 0);\n      ctx.pixelStorei(ctx.PACK_ROW_LENGTH, 0);\n      ctx.pixelStorei(ctx.PACK_SKIP_ROWS, 0);\n      ctx.pixelStorei(ctx.PACK_SKIP_PIXELS, 0);\n      ctx.hint(ctx.FRAGMENT_SHADER_DERIVATIVE_HINT, ctx.DONT_CARE);\n    } // TODO: This should NOT be needed but Firefox fails with 'hint'\n\n\n    while (ctx.getError()) {\n      ;\n    }\n  }\n\n  function makeLostContextSimulatingCanvas(canvas) {\n    var unwrappedContext_;\n    var wrappedContext_;\n    var onLost_ = [];\n    var onRestored_ = [];\n    var wrappedContext_ = {};\n    var contextId_ = 1;\n    var contextLost_ = false;\n    var resourceId_ = 0;\n    var resourceDb_ = [];\n    var numCallsToLoseContext_ = 0;\n    var numCalls_ = 0;\n    var canRestore_ = false;\n    var restoreTimeout_ = 0;\n    var isWebGL2RenderingContext; // Holds booleans for each GL error so can simulate errors.\n\n    var glErrorShadow_ = {};\n\n    canvas.getContext = function (f) {\n      return function () {\n        var ctx = f.apply(canvas, arguments); // Did we get a context and is it a WebGL context?\n\n        if (ctx instanceof WebGLRenderingContext || window.WebGL2RenderingContext && ctx instanceof WebGL2RenderingContext) {\n          if (ctx != unwrappedContext_) {\n            if (unwrappedContext_) {\n              throw \"got different context\";\n            }\n\n            isWebGL2RenderingContext = window.WebGL2RenderingContext && ctx instanceof WebGL2RenderingContext;\n            unwrappedContext_ = ctx;\n            wrappedContext_ = makeLostContextSimulatingContext(unwrappedContext_);\n          }\n\n          return wrappedContext_;\n        }\n\n        return ctx;\n      };\n    }(canvas.getContext);\n\n    function wrapEvent(listener) {\n      if (typeof listener == \"function\") {\n        return listener;\n      } else {\n        return function (info) {\n          listener.handleEvent(info);\n        };\n      }\n    }\n\n    var addOnContextLostListener = function addOnContextLostListener(listener) {\n      onLost_.push(wrapEvent(listener));\n    };\n\n    var addOnContextRestoredListener = function addOnContextRestoredListener(listener) {\n      onRestored_.push(wrapEvent(listener));\n    };\n\n    function wrapAddEventListener(canvas) {\n      var f = canvas.addEventListener;\n\n      canvas.addEventListener = function (type, listener, bubble) {\n        switch (type) {\n          case 'webglcontextlost':\n            addOnContextLostListener(listener);\n            break;\n\n          case 'webglcontextrestored':\n            addOnContextRestoredListener(listener);\n            break;\n\n          default:\n            f.apply(canvas, arguments);\n        }\n      };\n    }\n\n    wrapAddEventListener(canvas);\n\n    canvas.loseContext = function () {\n      if (!contextLost_) {\n        contextLost_ = true;\n        numCallsToLoseContext_ = 0;\n        ++contextId_;\n\n        while (unwrappedContext_.getError()) {\n          ;\n        }\n\n        clearErrors();\n        glErrorShadow_[unwrappedContext_.CONTEXT_LOST_WEBGL] = true;\n        var event = makeWebGLContextEvent(\"context lost\");\n        var callbacks = onLost_.slice();\n        setTimeout(function () {\n          //log(\"numCallbacks:\" + callbacks.length);\n          for (var ii = 0; ii < callbacks.length; ++ii) {\n            //log(\"calling callback:\" + ii);\n            callbacks[ii](event);\n          }\n\n          if (restoreTimeout_ >= 0) {\n            setTimeout(function () {\n              canvas.restoreContext();\n            }, restoreTimeout_);\n          }\n        }, 0);\n      }\n    };\n\n    canvas.restoreContext = function () {\n      if (contextLost_) {\n        if (onRestored_.length) {\n          setTimeout(function () {\n            if (!canRestore_) {\n              throw \"can not restore. webglcontestlost listener did not call event.preventDefault\";\n            }\n\n            freeResources();\n            resetToInitialState(unwrappedContext_);\n            contextLost_ = false;\n            numCalls_ = 0;\n            canRestore_ = false;\n            var callbacks = onRestored_.slice();\n            var event = makeWebGLContextEvent(\"context restored\");\n\n            for (var ii = 0; ii < callbacks.length; ++ii) {\n              callbacks[ii](event);\n            }\n          }, 0);\n        }\n      }\n    };\n\n    canvas.loseContextInNCalls = function (numCalls) {\n      if (contextLost_) {\n        throw \"You can not ask a lost contet to be lost\";\n      }\n\n      numCallsToLoseContext_ = numCalls_ + numCalls;\n    };\n\n    canvas.getNumCalls = function () {\n      return numCalls_;\n    };\n\n    canvas.setRestoreTimeout = function (timeout) {\n      restoreTimeout_ = timeout;\n    };\n\n    function isWebGLObject(obj) {\n      //return false;\n      return obj instanceof WebGLBuffer || obj instanceof WebGLFramebuffer || obj instanceof WebGLProgram || obj instanceof WebGLRenderbuffer || obj instanceof WebGLShader || obj instanceof WebGLTexture;\n    }\n\n    function checkResources(args) {\n      for (var ii = 0; ii < args.length; ++ii) {\n        var arg = args[ii];\n\n        if (isWebGLObject(arg)) {\n          return arg.__webglDebugContextLostId__ == contextId_;\n        }\n      }\n\n      return true;\n    }\n\n    function clearErrors() {\n      var k = Object.keys(glErrorShadow_);\n\n      for (var ii = 0; ii < k.length; ++ii) {\n        delete glErrorShadow_[k[ii]];\n      }\n    }\n\n    function loseContextIfTime() {\n      ++numCalls_;\n\n      if (!contextLost_) {\n        if (numCallsToLoseContext_ == numCalls_) {\n          canvas.loseContext();\n        }\n      }\n    } // Makes a function that simulates WebGL when out of context.\n\n\n    function makeLostContextFunctionWrapper(ctx, functionName) {\n      var f = ctx[functionName];\n      return function () {\n        // log(\"calling:\" + functionName);\n        // Only call the functions if the context is not lost.\n        loseContextIfTime();\n\n        if (!contextLost_) {\n          //if (!checkResources(arguments)) {\n          //  glErrorShadow_[wrappedContext_.INVALID_OPERATION] = true;\n          //  return;\n          //}\n          var result = f.apply(ctx, arguments);\n          return result;\n        }\n      };\n    }\n\n    function freeResources() {\n      for (var ii = 0; ii < resourceDb_.length; ++ii) {\n        var resource = resourceDb_[ii];\n\n        if (resource instanceof WebGLBuffer) {\n          unwrappedContext_.deleteBuffer(resource);\n        } else if (resource instanceof WebGLFramebuffer) {\n          unwrappedContext_.deleteFramebuffer(resource);\n        } else if (resource instanceof WebGLProgram) {\n          unwrappedContext_.deleteProgram(resource);\n        } else if (resource instanceof WebGLRenderbuffer) {\n          unwrappedContext_.deleteRenderbuffer(resource);\n        } else if (resource instanceof WebGLShader) {\n          unwrappedContext_.deleteShader(resource);\n        } else if (resource instanceof WebGLTexture) {\n          unwrappedContext_.deleteTexture(resource);\n        } else if (isWebGL2RenderingContext) {\n          if (resource instanceof WebGLQuery) {\n            unwrappedContext_.deleteQuery(resource);\n          } else if (resource instanceof WebGLSampler) {\n            unwrappedContext_.deleteSampler(resource);\n          } else if (resource instanceof WebGLSync) {\n            unwrappedContext_.deleteSync(resource);\n          } else if (resource instanceof WebGLTransformFeedback) {\n            unwrappedContext_.deleteTransformFeedback(resource);\n          } else if (resource instanceof WebGLVertexArrayObject) {\n            unwrappedContext_.deleteVertexArray(resource);\n          }\n        }\n      }\n    }\n\n    function makeWebGLContextEvent(statusMessage) {\n      return {\n        statusMessage: statusMessage,\n        preventDefault: function preventDefault() {\n          canRestore_ = true;\n        }\n      };\n    }\n\n    return canvas;\n\n    function makeLostContextSimulatingContext(ctx) {\n      // copy all functions and properties to wrapper\n      for (var propertyName in ctx) {\n        if (typeof ctx[propertyName] == 'function') {\n          wrappedContext_[propertyName] = makeLostContextFunctionWrapper(ctx, propertyName);\n        } else {\n          makePropertyWrapper(wrappedContext_, ctx, propertyName);\n        }\n      } // Wrap a few functions specially.\n\n\n      wrappedContext_.getError = function () {\n        loseContextIfTime();\n\n        if (!contextLost_) {\n          var err;\n\n          while (err = unwrappedContext_.getError()) {\n            glErrorShadow_[err] = true;\n          }\n        }\n\n        for (var err in glErrorShadow_) {\n          if (glErrorShadow_[err]) {\n            delete glErrorShadow_[err];\n            return err;\n          }\n        }\n\n        return wrappedContext_.NO_ERROR;\n      };\n\n      var creationFunctions = [\"createBuffer\", \"createFramebuffer\", \"createProgram\", \"createRenderbuffer\", \"createShader\", \"createTexture\"];\n\n      if (isWebGL2RenderingContext) {\n        creationFunctions.push(\"createQuery\", \"createSampler\", \"fenceSync\", \"createTransformFeedback\", \"createVertexArray\");\n      }\n\n      for (var ii = 0; ii < creationFunctions.length; ++ii) {\n        var functionName = creationFunctions[ii];\n\n        wrappedContext_[functionName] = function (f) {\n          return function () {\n            loseContextIfTime();\n\n            if (contextLost_) {\n              return null;\n            }\n\n            var obj = f.apply(ctx, arguments);\n            obj.__webglDebugContextLostId__ = contextId_;\n            resourceDb_.push(obj);\n            return obj;\n          };\n        }(ctx[functionName]);\n      }\n\n      var functionsThatShouldReturnNull = [\"getActiveAttrib\", \"getActiveUniform\", \"getBufferParameter\", \"getContextAttributes\", \"getAttachedShaders\", \"getFramebufferAttachmentParameter\", \"getParameter\", \"getProgramParameter\", \"getProgramInfoLog\", \"getRenderbufferParameter\", \"getShaderParameter\", \"getShaderInfoLog\", \"getShaderSource\", \"getTexParameter\", \"getUniform\", \"getUniformLocation\", \"getVertexAttrib\"];\n\n      if (isWebGL2RenderingContext) {\n        functionsThatShouldReturnNull.push(\"getInternalformatParameter\", \"getQuery\", \"getQueryParameter\", \"getSamplerParameter\", \"getSyncParameter\", \"getTransformFeedbackVarying\", \"getIndexedParameter\", \"getUniformIndices\", \"getActiveUniforms\", \"getActiveUniformBlockParameter\", \"getActiveUniformBlockName\");\n      }\n\n      for (var ii = 0; ii < functionsThatShouldReturnNull.length; ++ii) {\n        var functionName = functionsThatShouldReturnNull[ii];\n\n        wrappedContext_[functionName] = function (f) {\n          return function () {\n            loseContextIfTime();\n\n            if (contextLost_) {\n              return null;\n            }\n\n            return f.apply(ctx, arguments);\n          };\n        }(wrappedContext_[functionName]);\n      }\n\n      var isFunctions = [\"isBuffer\", \"isEnabled\", \"isFramebuffer\", \"isProgram\", \"isRenderbuffer\", \"isShader\", \"isTexture\"];\n\n      if (isWebGL2RenderingContext) {\n        isFunctions.push(\"isQuery\", \"isSampler\", \"isSync\", \"isTransformFeedback\", \"isVertexArray\");\n      }\n\n      for (var ii = 0; ii < isFunctions.length; ++ii) {\n        var functionName = isFunctions[ii];\n\n        wrappedContext_[functionName] = function (f) {\n          return function () {\n            loseContextIfTime();\n\n            if (contextLost_) {\n              return false;\n            }\n\n            return f.apply(ctx, arguments);\n          };\n        }(wrappedContext_[functionName]);\n      }\n\n      wrappedContext_.checkFramebufferStatus = function (f) {\n        return function () {\n          loseContextIfTime();\n\n          if (contextLost_) {\n            return wrappedContext_.FRAMEBUFFER_UNSUPPORTED;\n          }\n\n          return f.apply(ctx, arguments);\n        };\n      }(wrappedContext_.checkFramebufferStatus);\n\n      wrappedContext_.getAttribLocation = function (f) {\n        return function () {\n          loseContextIfTime();\n\n          if (contextLost_) {\n            return -1;\n          }\n\n          return f.apply(ctx, arguments);\n        };\n      }(wrappedContext_.getAttribLocation);\n\n      wrappedContext_.getVertexAttribOffset = function (f) {\n        return function () {\n          loseContextIfTime();\n\n          if (contextLost_) {\n            return 0;\n          }\n\n          return f.apply(ctx, arguments);\n        };\n      }(wrappedContext_.getVertexAttribOffset);\n\n      wrappedContext_.isContextLost = function () {\n        return contextLost_;\n      };\n\n      if (isWebGL2RenderingContext) {\n        wrappedContext_.getFragDataLocation = function (f) {\n          return function () {\n            loseContextIfTime();\n\n            if (contextLost_) {\n              return -1;\n            }\n\n            return f.apply(ctx, arguments);\n          };\n        }(wrappedContext_.getFragDataLocation);\n\n        wrappedContext_.clientWaitSync = function (f) {\n          return function () {\n            loseContextIfTime();\n\n            if (contextLost_) {\n              return wrappedContext_.WAIT_FAILED;\n            }\n\n            return f.apply(ctx, arguments);\n          };\n        }(wrappedContext_.clientWaitSync);\n\n        wrappedContext_.getUniformBlockIndex = function (f) {\n          return function () {\n            loseContextIfTime();\n\n            if (contextLost_) {\n              return wrappedContext_.INVALID_INDEX;\n            }\n\n            return f.apply(ctx, arguments);\n          };\n        }(wrappedContext_.getUniformBlockIndex);\n      }\n\n      return wrappedContext_;\n    }\n  }\n\n  return {\n    /**\n     * Initializes this module. Safe to call more than once.\n     * @param {!WebGLRenderingContext} ctx A WebGL context. If\n     *    you have more than one context it doesn't matter which one\n     *    you pass in, it is only used to pull out constants.\n     */\n    'init': init,\n\n    /**\n     * Returns true or false if value matches any WebGL enum\n     * @param {*} value Value to check if it might be an enum.\n     * @return {boolean} True if value matches one of the WebGL defined enums\n     */\n    'mightBeEnum': mightBeEnum,\n\n    /**\n     * Gets an string version of an WebGL enum.\n     *\n     * Example:\n     *   WebGLDebugUtil.init(ctx);\n     *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\n     *\n     * @param {number} value Value to return an enum for\n     * @return {string} The string version of the enum.\n     */\n    'glEnumToString': glEnumToString,\n\n    /**\n     * Converts the argument of a WebGL function to a string.\n     * Attempts to convert enum arguments to strings.\n     *\n     * Example:\n     *   WebGLDebugUtil.init(ctx);\n     *   var str = WebGLDebugUtil.glFunctionArgToString('bindTexture', 2, 0, gl.TEXTURE_2D);\n     *\n     * would return 'TEXTURE_2D'\n     *\n     * @param {string} functionName the name of the WebGL function.\n     * @param {number} numArgs The number of arguments\n     * @param {number} argumentIndx the index of the argument.\n     * @param {*} value The value of the argument.\n     * @return {string} The value as a string.\n     */\n    'glFunctionArgToString': glFunctionArgToString,\n\n    /**\n     * Converts the arguments of a WebGL function to a string.\n     * Attempts to convert enum arguments to strings.\n     *\n     * @param {string} functionName the name of the WebGL function.\n     * @param {number} args The arguments.\n     * @return {string} The arguments as a string.\n     */\n    'glFunctionArgsToString': glFunctionArgsToString,\n\n    /**\n     * Given a WebGL context returns a wrapped context that calls\n     * gl.getError after every command and calls a function if the\n     * result is not NO_ERROR.\n     *\n     * You can supply your own function if you want. For example, if you'd like\n     * an exception thrown on any GL error you could do this\n     *\n     *    function throwOnGLError(err, funcName, args) {\n     *      throw WebGLDebugUtils.glEnumToString(err) +\n     *            \" was caused by call to \" + funcName;\n     *    };\n     *\n     *    ctx = WebGLDebugUtils.makeDebugContext(\n     *        canvas.getContext(\"webgl\"), throwOnGLError);\n     *\n     * @param {!WebGLRenderingContext} ctx The webgl context to wrap.\n     * @param {!function(err, funcName, args): void} opt_onErrorFunc The function\n     *     to call when gl.getError returns an error. If not specified the default\n     *     function calls console.log with a message.\n     * @param {!function(funcName, args): void} opt_onFunc The\n     *     function to call when each webgl function is called. You\n     *     can use this to log all calls for example.\n     */\n    'makeDebugContext': makeDebugContext,\n\n    /**\n     * Given a canvas element returns a wrapped canvas element that will\n     * simulate lost context. The canvas returned adds the following functions.\n     *\n     * loseContext:\n     *   simulates a lost context event.\n     *\n     * restoreContext:\n     *   simulates the context being restored.\n     *\n     * lostContextInNCalls:\n     *   loses the context after N gl calls.\n     *\n     * getNumCalls:\n     *   tells you how many gl calls there have been so far.\n     *\n     * setRestoreTimeout:\n     *   sets the number of milliseconds until the context is restored\n     *   after it has been lost. Defaults to 0. Pass -1 to prevent\n     *   automatic restoring.\n     *\n     * @param {!Canvas} canvas The canvas element to wrap.\n     */\n    'makeLostContextSimulatingCanvas': makeLostContextSimulatingCanvas,\n\n    /**\n     * Resets a context to the initial state.\n     * @param {!WebGLRenderingContext} ctx The webgl context to\n     *     reset.\n     */\n    'resetToInitialState': resetToInitialState\n  };\n}();\n\nmodule.exports = WebGLDebugUtils;","// eslint-disable-next-line\nmodule.exports = require('./dist/es5/debug');","import React from 'react';\nimport { addEventListener } from 'consolidated-events';\nimport { isForwardRef } from 'react-is';\n/**\n * Attempts to parse the offset provided as a prop as a percentage. For\n * instance, if the component has been provided with the string \"20%\" as\n * a value of one of the offset props. If the value matches, then it returns\n * a numeric version of the prop. For instance, \"20%\" would become `0.2`.\n * If `str` isn't a percentage, then `undefined` will be returned.\n *\n * @param {string} str The value of an offset prop to be converted to a\n *   number.\n * @return {number|undefined} The numeric version of `str`. Undefined if `str`\n *   was not a percentage.\n */\n\nfunction parseOffsetAsPercentage(str) {\n  if (str.slice(-1) === '%') {\n    return parseFloat(str.slice(0, -1)) / 100;\n  }\n}\n/**\n * Attempts to parse the offset provided as a prop as a pixel value. If\n * parsing fails, then `undefined` is returned. Three examples of values that\n * will be successfully parsed are:\n * `20`\n * \"20px\"\n * \"20\"\n *\n * @param {string|number} str A string of the form \"{number}\" or \"{number}px\",\n *   or just a number.\n * @return {number|undefined} The numeric version of `str`. Undefined if `str`\n *   was neither a number nor string ending in \"px\".\n */\n\n\nfunction parseOffsetAsPixels(str) {\n  if (!isNaN(parseFloat(str)) && isFinite(str)) {\n    return parseFloat(str);\n  } else if (str.slice(-2) === 'px') {\n    return parseFloat(str.slice(0, -2));\n  }\n}\n/**\n * @param {string|number} offset\n * @param {number} contextHeight\n * @return {number} A number representing `offset` converted into pixels.\n */\n\n\nfunction computeOffsetPixels(offset, contextHeight) {\n  var pixelOffset = parseOffsetAsPixels(offset);\n\n  if (typeof pixelOffset === 'number') {\n    return pixelOffset;\n  }\n\n  var percentOffset = parseOffsetAsPercentage(offset);\n\n  if (typeof percentOffset === 'number') {\n    return percentOffset * contextHeight;\n  }\n}\n\nvar constants = {\n  above: 'above',\n  inside: 'inside',\n  below: 'below',\n  invisible: 'invisible'\n};\n\nfunction debugLog() {\n  if (process.env.NODE_ENV !== 'production') {\n    console.log(arguments); // eslint-disable-line no-console\n  }\n}\n\nvar errorMessage = '<Waypoint> expected to receive a single React element child.\\n\\n' + 'See https://goo.gl/LrBNgw for more info.';\n/**\n * Raise an error if more that one child was provided to \"children\"\n *\n * @param {?React.element} children\n * @return {undefined}\n */\n\nfunction ensureChildrenIsValid(children) {\n  if (children) {\n    try {\n      React.Children.only(children);\n    } catch (e) {\n      throw new Error(errorMessage);\n    }\n  }\n}\n/**\n * When an element's type is a string, it represents a DOM node with that tag name\n * https://facebook.github.io/react/blog/2015/12/18/react-components-elements-and-instances.html#dom-elements\n *\n * @param {React.element} Component\n * @return {bool} Whether the component is a DOM Element\n */\n\n\nfunction isDOMElement(Component) {\n  return typeof Component.type === 'string';\n}\n\nvar errorMessage$1 = '<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a ' + 'DOM element (e.g. <div>) nor does it use the innerRef prop.\\n\\n' + 'See https://goo.gl/LrBNgw for more info.';\n/**\n * Raise an error if \"children\" is not a DOM Element and there is no ref provided to Waypoint\n *\n * @param {?React.element} children\n * @param {?HTMLElement} ref\n * @return {undefined}\n */\n\nfunction ensureRefIsProvidedByChild(children, ref) {\n  if (children && !isDOMElement(children) && !ref) {\n    throw new Error(errorMessage$1);\n  }\n}\n/**\n * @param {object} bounds An object with bounds data for the waypoint and\n *   scrollable parent\n * @return {string} The current position of the waypoint in relation to the\n *   visible portion of the scrollable parent. One of `constants.above`,\n *   `constants.below`, or `constants.inside`.\n */\n\n\nfunction getCurrentPosition(bounds) {\n  if (bounds.viewportBottom - bounds.viewportTop === 0) {\n    return constants.invisible;\n  } // top is within the viewport\n\n\n  if (bounds.viewportTop <= bounds.waypointTop && bounds.waypointTop <= bounds.viewportBottom) {\n    return constants.inside;\n  } // bottom is within the viewport\n\n\n  if (bounds.viewportTop <= bounds.waypointBottom && bounds.waypointBottom <= bounds.viewportBottom) {\n    return constants.inside;\n  } // top is above the viewport and bottom is below the viewport\n\n\n  if (bounds.waypointTop <= bounds.viewportTop && bounds.viewportBottom <= bounds.waypointBottom) {\n    return constants.inside;\n  }\n\n  if (bounds.viewportBottom < bounds.waypointTop) {\n    return constants.below;\n  }\n\n  if (bounds.waypointTop < bounds.viewportTop) {\n    return constants.above;\n  }\n\n  return constants.invisible;\n}\n\nvar timeout = void 0;\nvar timeoutQueue = [];\n\nfunction onNextTick(cb) {\n  timeoutQueue.push(cb);\n\n  if (!timeout) {\n    timeout = setTimeout(function () {\n      timeout = null; // Drain the timeoutQueue\n\n      var item = void 0; // eslint-disable-next-line no-cond-assign\n\n      while (item = timeoutQueue.shift()) {\n        item();\n      }\n    }, 0);\n  }\n\n  var isSubscribed = true;\n  return function () {\n    function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n      var index = timeoutQueue.indexOf(cb);\n\n      if (index === -1) {\n        return;\n      }\n\n      timeoutQueue.splice(index, 1);\n\n      if (!timeoutQueue.length && timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n    }\n\n    return unsubscribe;\n  }();\n}\n\nfunction resolveScrollableAncestorProp(scrollableAncestor) {\n  // When Waypoint is rendered on the server, `window` is not available.\n  // To make Waypoint easier to work with, we allow this to be specified in\n  // string form and safely convert to `window` here.\n  if (scrollableAncestor === 'window') {\n    return global.window;\n  }\n\n  return scrollableAncestor;\n}\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar defaultProps = {\n  topOffset: '0px',\n  bottomOffset: '0px',\n  horizontal: false,\n  onEnter: function () {\n    function onEnter() {}\n\n    return onEnter;\n  }(),\n  onLeave: function () {\n    function onLeave() {}\n\n    return onLeave;\n  }(),\n  onPositionChange: function () {\n    function onPositionChange() {}\n\n    return onPositionChange;\n  }(),\n  fireOnRapidScroll: true\n}; // React.PureComponent was added in React 15.3.0\n\nvar BaseClass = typeof React.PureComponent !== 'undefined' ? React.PureComponent : React.Component; // Calls a function when you scroll to the element.\n\nvar Waypoint = function (_BaseClass) {\n  _inherits(Waypoint, _BaseClass);\n\n  function Waypoint(props) {\n    _classCallCheck(this, Waypoint);\n\n    var _this = _possibleConstructorReturn(this, (Waypoint.__proto__ || Object.getPrototypeOf(Waypoint)).call(this, props));\n\n    _this.refElement = function (e) {\n      return _this._ref = e;\n    };\n\n    return _this;\n  }\n\n  _createClass(Waypoint, [{\n    key: 'componentWillMount',\n    value: function () {\n      function componentWillMount() {\n        ensureChildrenIsValid(this.props.children);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: 'componentDidMount',\n    value: function () {\n      function componentDidMount() {\n        var _this2 = this;\n\n        if (!Waypoint.getWindow()) {\n          return;\n        } // this._ref may occasionally not be set at this time. To help ensure that\n        // this works smoothly and to avoid layout thrashing, we want to delay the\n        // initial execution until the next tick.\n\n\n        this.cancelOnNextTick = onNextTick(function () {\n          _this2.cancelOnNextTick = null; // Berofe doing anything, we want to check that this._ref is avaliable in Waypoint\n\n          ensureRefIsProvidedByChild(_this2.props.children, _this2._ref);\n          _this2._handleScroll = _this2._handleScroll.bind(_this2);\n          _this2.scrollableAncestor = _this2._findScrollableAncestor();\n\n          if (process.env.NODE_ENV !== 'production' && _this2.props.debug) {\n            debugLog('scrollableAncestor', _this2.scrollableAncestor);\n          }\n\n          _this2.scrollEventListenerUnsubscribe = addEventListener(_this2.scrollableAncestor, 'scroll', _this2._handleScroll, {\n            passive: true\n          });\n          _this2.resizeEventListenerUnsubscribe = addEventListener(window, 'resize', _this2._handleScroll, {\n            passive: true\n          });\n\n          _this2._handleScroll(null);\n        });\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function () {\n      function componentWillReceiveProps(newProps) {\n        ensureChildrenIsValid(newProps.children);\n      }\n\n      return componentWillReceiveProps;\n    }()\n  }, {\n    key: 'componentDidUpdate',\n    value: function () {\n      function componentDidUpdate() {\n        var _this3 = this;\n\n        if (!Waypoint.getWindow()) {\n          return;\n        }\n\n        if (!this.scrollableAncestor) {\n          // The Waypoint has not yet initialized.\n          return;\n        } // The element may have moved, so we need to recompute its position on the\n        // page. This happens via handleScroll in a way that forces layout to be\n        // computed.\n        //\n        // We want this to be deferred to avoid forcing layout during render, which\n        // causes layout thrashing. And, if we already have this work enqueued, we\n        // can just wait for that to happen instead of enqueueing again.\n\n\n        if (this.cancelOnNextTick) {\n          return;\n        }\n\n        this.cancelOnNextTick = onNextTick(function () {\n          _this3.cancelOnNextTick = null;\n\n          _this3._handleScroll(null);\n        });\n      }\n\n      return componentDidUpdate;\n    }()\n  }, {\n    key: 'componentWillUnmount',\n    value: function () {\n      function componentWillUnmount() {\n        if (!Waypoint.getWindow()) {\n          return;\n        }\n\n        if (this.scrollEventListenerUnsubscribe) {\n          this.scrollEventListenerUnsubscribe();\n        }\n\n        if (this.resizeEventListenerUnsubscribe) {\n          this.resizeEventListenerUnsubscribe();\n        }\n\n        if (this.cancelOnNextTick) {\n          this.cancelOnNextTick();\n        }\n      }\n\n      return componentWillUnmount;\n    }()\n    /**\n     * Traverses up the DOM to find an ancestor container which has an overflow\n     * style that allows for scrolling.\n     *\n     * @return {Object} the closest ancestor element with an overflow style that\n     *   allows for scrolling. If none is found, the `window` object is returned\n     *   as a fallback.\n     */\n\n  }, {\n    key: '_findScrollableAncestor',\n    value: function () {\n      function _findScrollableAncestor() {\n        var _props = this.props,\n            horizontal = _props.horizontal,\n            scrollableAncestor = _props.scrollableAncestor;\n\n        if (scrollableAncestor) {\n          return resolveScrollableAncestorProp(scrollableAncestor);\n        }\n\n        var node = this._ref;\n\n        while (node.parentNode) {\n          node = node.parentNode;\n\n          if (node === document.body) {\n            // We've reached all the way to the root node.\n            return window;\n          }\n\n          var style = window.getComputedStyle(node);\n          var overflowDirec = horizontal ? style.getPropertyValue('overflow-x') : style.getPropertyValue('overflow-y');\n          var overflow = overflowDirec || style.getPropertyValue('overflow');\n\n          if (overflow === 'auto' || overflow === 'scroll') {\n            return node;\n          }\n        } // A scrollable ancestor element was not found, which means that we need to\n        // do stuff on window.\n\n\n        return window;\n      }\n\n      return _findScrollableAncestor;\n    }()\n    /**\n     * @param {Object} event the native scroll event coming from the scrollable\n     *   ancestor, or resize event coming from the window. Will be undefined if\n     *   called by a React lifecyle method\n     */\n\n  }, {\n    key: '_handleScroll',\n    value: function () {\n      function _handleScroll(event) {\n        if (!this._ref) {\n          // There's a chance we end up here after the component has been unmounted.\n          return;\n        }\n\n        var bounds = this._getBounds();\n\n        var currentPosition = getCurrentPosition(bounds);\n        var previousPosition = this._previousPosition;\n\n        if (process.env.NODE_ENV !== 'production' && this.props.debug) {\n          debugLog('currentPosition', currentPosition);\n          debugLog('previousPosition', previousPosition);\n        } // Save previous position as early as possible to prevent cycles\n\n\n        this._previousPosition = currentPosition;\n\n        if (previousPosition === currentPosition) {\n          // No change since last trigger\n          return;\n        }\n\n        var callbackArg = {\n          currentPosition: currentPosition,\n          previousPosition: previousPosition,\n          event: event,\n          waypointTop: bounds.waypointTop,\n          waypointBottom: bounds.waypointBottom,\n          viewportTop: bounds.viewportTop,\n          viewportBottom: bounds.viewportBottom\n        };\n        this.props.onPositionChange.call(this, callbackArg);\n\n        if (currentPosition === constants.inside) {\n          this.props.onEnter.call(this, callbackArg);\n        } else if (previousPosition === constants.inside) {\n          this.props.onLeave.call(this, callbackArg);\n        }\n\n        var isRapidScrollDown = previousPosition === constants.below && currentPosition === constants.above;\n        var isRapidScrollUp = previousPosition === constants.above && currentPosition === constants.below;\n\n        if (this.props.fireOnRapidScroll && (isRapidScrollDown || isRapidScrollUp)) {\n          // If the scroll event isn't fired often enough to occur while the\n          // waypoint was visible, we trigger both callbacks anyway.\n          this.props.onEnter.call(this, {\n            currentPosition: constants.inside,\n            previousPosition: previousPosition,\n            event: event,\n            waypointTop: bounds.waypointTop,\n            waypointBottom: bounds.waypointBottom,\n            viewportTop: bounds.viewportTop,\n            viewportBottom: bounds.viewportBottom\n          });\n          this.props.onLeave.call(this, {\n            currentPosition: currentPosition,\n            previousPosition: constants.inside,\n            event: event,\n            waypointTop: bounds.waypointTop,\n            waypointBottom: bounds.waypointBottom,\n            viewportTop: bounds.viewportTop,\n            viewportBottom: bounds.viewportBottom\n          });\n        }\n      }\n\n      return _handleScroll;\n    }()\n  }, {\n    key: '_getBounds',\n    value: function () {\n      function _getBounds() {\n        var horizontal = this.props.horizontal;\n\n        var _ref$getBoundingClien = this._ref.getBoundingClientRect(),\n            left = _ref$getBoundingClien.left,\n            top = _ref$getBoundingClien.top,\n            right = _ref$getBoundingClien.right,\n            bottom = _ref$getBoundingClien.bottom;\n\n        var waypointTop = horizontal ? left : top;\n        var waypointBottom = horizontal ? right : bottom;\n        var contextHeight = void 0;\n        var contextScrollTop = void 0;\n\n        if (this.scrollableAncestor === window) {\n          contextHeight = horizontal ? window.innerWidth : window.innerHeight;\n          contextScrollTop = 0;\n        } else {\n          contextHeight = horizontal ? this.scrollableAncestor.offsetWidth : this.scrollableAncestor.offsetHeight;\n          contextScrollTop = horizontal ? this.scrollableAncestor.getBoundingClientRect().left : this.scrollableAncestor.getBoundingClientRect().top;\n        }\n\n        if (process.env.NODE_ENV !== 'production' && this.props.debug) {\n          debugLog('waypoint top', waypointTop);\n          debugLog('waypoint bottom', waypointBottom);\n          debugLog('scrollableAncestor height', contextHeight);\n          debugLog('scrollableAncestor scrollTop', contextScrollTop);\n        }\n\n        var _props2 = this.props,\n            bottomOffset = _props2.bottomOffset,\n            topOffset = _props2.topOffset;\n        var topOffsetPx = computeOffsetPixels(topOffset, contextHeight);\n        var bottomOffsetPx = computeOffsetPixels(bottomOffset, contextHeight);\n        var contextBottom = contextScrollTop + contextHeight;\n        return {\n          waypointTop: waypointTop,\n          waypointBottom: waypointBottom,\n          viewportTop: contextScrollTop + topOffsetPx,\n          viewportBottom: contextBottom - bottomOffsetPx\n        };\n      }\n\n      return _getBounds;\n    }()\n    /**\n     * @return {Object}\n     */\n\n  }, {\n    key: 'render',\n    value: function () {\n      function render() {\n        var _this4 = this;\n\n        var children = this.props.children;\n\n        if (!children) {\n          // We need an element that we can locate in the DOM to determine where it is\n          // rendered relative to the top of its context.\n          return React.createElement('span', {\n            ref: this.refElement,\n            style: {\n              fontSize: 0\n            }\n          });\n        }\n\n        if (isDOMElement(children) || isForwardRef(children.type)) {\n          var ref = function () {\n            function ref(node) {\n              _this4.refElement(node);\n\n              if (children.ref) {\n                if (typeof children.ref === 'function') {\n                  children.ref(node);\n                } else {\n                  children.ref.current = node;\n                }\n              }\n            }\n\n            return ref;\n          }();\n\n          return React.cloneElement(children, {\n            ref: ref\n          });\n        }\n\n        return React.cloneElement(children, {\n          innerRef: this.refElement\n        });\n      }\n\n      return render;\n    }()\n  }]);\n\n  return Waypoint;\n}(BaseClass);\n\nWaypoint.above = constants.above;\nWaypoint.below = constants.below;\nWaypoint.inside = constants.inside;\nWaypoint.invisible = constants.invisible;\n\nWaypoint.getWindow = function () {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n};\n\nWaypoint.defaultProps = defaultProps;\nWaypoint.displayName = 'Waypoint';\nexport default Waypoint;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","// Node.js polyfills for requestAnimationFrame and cancelAnimationFrame\n\n/* global window, setTimeout, clearTimeout */\nexport function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}","var GL_FRAGMENT_SHADER = 0x8b30;\nvar GL_VERTEX_SHADER = 0x8b31; // Supports GLSLIFY style naming of shaders\n// #define SHADER_NAME ...\n\nexport default function getShaderName(shader) {\n  var defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'unnamed';\n  var SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  var match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\nexport function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}","// TODO - formatGLSLCompilerError should not depend on this\nimport getShaderName, { getShaderTypeName } from './get-shader-name';\n/**\n * Parse a GLSL compiler error log into a string showing the source code around each error.\n * Based on https://github.com/wwwtyro/gl-format-compiler-error (public domain)\n */\n\n/* eslint-disable no-continue, max-statements */\n\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  var errorStrings = errLog.split(/\\r?\\n/);\n  var errors = {};\n  var warnings = {}; // Patch the shader name\n\n  var name = shaderName || getShaderName(src) || '(unnamed)';\n  var shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name); // Parse the error - note: browser and driver dependent\n\n  for (var i = 0; i < errorStrings.length; i++) {\n    var errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    var segments = errorString.split(':');\n    var type = segments[0];\n    var line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  } // Format the error inline with the code\n\n\n  var lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n} // Formats GLSL compiler error log into single string\n\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  var _parseGLSLCompilerErr = parseGLSLCompilerError(errLog, src, shaderType),\n      shaderName = _parseGLSLCompilerErr.shaderName,\n      errors = _parseGLSLCompilerErr.errors,\n      warnings = _parseGLSLCompilerErr.warnings;\n\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n} // helper function, outputs annotated errors or warnings\n\nfunction formatErrors(errors, lines) {\n  var message = '';\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      var error = errors[i + 1];\n      var segments = error.split(':', 3);\n      var type = segments[0];\n      var column = parseInt(segments[1], 10) || 0;\n      var err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n/**\n * Prepends line numbers to each line of a string.\n * The line numbers will be left-padded with spaces to ensure an\n * aligned layout when rendered using monospace fonts.\n * @param {String} string - multi-line string to add line numbers to\n * @param {Number} start=1 - number of spaces to add\n * @param {String} delim =': ' - injected between line number and original line\n * @return {String[]} strings - array of string, one per line, with line numbers added\n */\n\n\nfunction addLineNumbers(string) {\n  var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var delim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ': ';\n  var lines = string.split(/\\r?\\n/);\n  var maxDigits = String(lines.length + start - 1).length;\n  return lines.map(function (line, i) {\n    var lineNumber = i + start;\n    var digits = String(lineNumber).length;\n    var prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n/**\n * Pads a string with a number of spaces (space characters) to the left\n * @param {String} string - string to pad\n * @param {Number} digits - number of spaces to add\n * @return {String} string - The padded string\n */\n\n\nfunction padLeft(string, digits) {\n  var result = '';\n\n  for (var i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}","// returns GLSL shader version of given shader string\nexport function getShaderVersion(source) {\n  var version = 100;\n  var words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    var v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}"],"sourceRoot":""}